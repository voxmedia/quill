{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f3e82c5b9367de7d46ed","webpack:///./node_modules/parchment/src/parchment.ts","webpack:///./node_modules/parchment/src/registry.ts","webpack:///./node_modules/quill-delta/lib/delta.js","webpack:///./node_modules/extend/index.js","webpack:///./blots/block.js","webpack:///./core/quill.js","webpack:///./blots/inline.js","webpack:///./blots/text.js","webpack:///./core/emitter.js","webpack:///./core/module.js","webpack:///./core/logger.js","webpack:///./node_modules/deep-equal/index.js","webpack:///./node_modules/parchment/src/attributor/attributor.ts","webpack:///./core/editor.js","webpack:///./core/selection.js","webpack:///./formats/code.js","webpack:///./node_modules/parchment/src/blot/abstract/container.ts","webpack:///./node_modules/parchment/src/blot/abstract/format.ts","webpack:///./node_modules/parchment/src/blot/abstract/leaf.ts","webpack:///./node_modules/quill-delta/lib/op.js","webpack:///./blots/break.js","webpack:///./node_modules/clone/clone.js","webpack:///./blots/scroll.js","webpack:///./modules/keyboard.js","webpack:///./blots/cursor.js","webpack:///./blots/container.js","webpack:///./formats/color.js","webpack:///./formats/link.js","webpack:///./ui/picker.js","webpack:///./core.js","webpack:///./node_modules/parchment/src/blot/abstract/shadow.ts","webpack:///./node_modules/parchment/src/attributor/store.ts","webpack:///./node_modules/parchment/src/attributor/class.ts","webpack:///./node_modules/parchment/src/attributor/style.ts","webpack:///./core/theme.js","webpack:///./blots/embed.js","webpack:///./formats/align.js","webpack:///./formats/background.js","webpack:///./formats/direction.js","webpack:///./formats/font.js","webpack:///./formats/size.js","webpack:///./ui/icons.js","webpack:///./modules/history.js","webpack:///./themes/base.js","webpack:///./node_modules/parchment/src/collection/linked-list.ts","webpack:///./node_modules/parchment/src/blot/scroll.ts","webpack:///./node_modules/parchment/src/blot/inline.ts","webpack:///./node_modules/parchment/src/blot/block.ts","webpack:///./node_modules/parchment/src/blot/embed.ts","webpack:///./node_modules/parchment/src/blot/text.ts","webpack:///./core/polyfill.js","webpack:///./node_modules/fast-diff/diff.js","webpack:///./node_modules/deep-equal/lib/keys.js","webpack:///./node_modules/deep-equal/lib/is_arguments.js","webpack:///./node_modules/eventemitter3/index.js","webpack:///./modules/clipboard.js","webpack:///./formats/bold.js","webpack:///./modules/toolbar.js","webpack:///./assets/icons/code.svg","webpack:///./ui/color-picker.js","webpack:///./ui/icon-picker.js","webpack:///./ui/tooltip.js","webpack:///./themes/snow.js","webpack:///./quill.js","webpack:///./formats/indent.js","webpack:///./formats/blockquote.js","webpack:///./formats/header.js","webpack:///./formats/list.js","webpack:///./formats/italic.js","webpack:///./formats/script.js","webpack:///./formats/strike.js","webpack:///./formats/underline.js","webpack:///./formats/image.js","webpack:///./formats/video.js","webpack:///./modules/formula.js","webpack:///./modules/syntax.js","webpack:///./assets/icons/align-left.svg","webpack:///./assets/icons/align-center.svg","webpack:///./assets/icons/align-right.svg","webpack:///./assets/icons/align-justify.svg","webpack:///./assets/icons/background.svg","webpack:///./assets/icons/blockquote.svg","webpack:///./assets/icons/bold.svg","webpack:///./assets/icons/clean.svg","webpack:///./assets/icons/color.svg","webpack:///./assets/icons/direction-ltr.svg","webpack:///./assets/icons/direction-rtl.svg","webpack:///./assets/icons/float-center.svg","webpack:///./assets/icons/float-full.svg","webpack:///./assets/icons/float-left.svg","webpack:///./assets/icons/float-right.svg","webpack:///./assets/icons/formula.svg","webpack:///./assets/icons/header.svg","webpack:///./assets/icons/header-2.svg","webpack:///./assets/icons/italic.svg","webpack:///./assets/icons/image.svg","webpack:///./assets/icons/indent.svg","webpack:///./assets/icons/outdent.svg","webpack:///./assets/icons/link.svg","webpack:///./assets/icons/list-ordered.svg","webpack:///./assets/icons/list-bullet.svg","webpack:///./assets/icons/list-check.svg","webpack:///./assets/icons/subscript.svg","webpack:///./assets/icons/superscript.svg","webpack:///./assets/icons/strike.svg","webpack:///./assets/icons/underline.svg","webpack:///./assets/icons/video.svg","webpack:///./assets/icons/dropdown.svg","webpack:///./themes/bubble.js","webpack:///./test/unit.js","webpack:///./test/helpers/unit.js","webpack:///./test/unit/blots/scroll.js","webpack:///./test/unit/blots/block.js","webpack:///./test/unit/blots/block-embed.js","webpack:///./test/unit/blots/inline.js","webpack:///./test/unit/core/editor.js","webpack:///./test/unit/core/selection.js","webpack:///./test/unit/core/quill.js","webpack:///./test/unit/formats/color.js","webpack:///./test/unit/formats/link.js","webpack:///./test/unit/formats/script.js","webpack:///./test/unit/formats/align.js","webpack:///./test/unit/formats/code.js","webpack:///./test/unit/formats/header.js","webpack:///./test/unit/formats/indent.js","webpack:///./test/unit/formats/list.js","webpack:///./test/unit/formats/bold.js","webpack:///./test/unit/modules/clipboard.js","webpack:///./test/unit/modules/history.js","webpack:///./test/unit/modules/keyboard.js","webpack:///./test/unit/modules/toolbar.js","webpack:///./test/unit/ui/picker.js","webpack:///./test/unit/theme/base/tooltip.js"],"names":["NEWLINE_LENGTH","BlockEmbed","attributes","Attributor","Store","domNode","insert","value","formats","values","name","attribute","query","Scope","BLOCK_ATTRIBUTE","index","length","format","def","endsWith","block","create","Block","blotName","parent","insertBefore","next","insertAt","slice","Embed","scope","BLOCK_BLOT","cache","delta","descendants","Leaf","reduce","leaf","bubbleFormats","BLOCK","Math","min","lines","split","text","shift","children","tail","line","blot","ref","head","remove","source","moveChildren","target","merge","context","child","force","clone","tagName","defaultChild","allowedChildren","statics","default","debug","Quill","limit","level","node","__quill","find","imports","error","path","overwrite","attrName","register","Object","keys","forEach","key","warn","startsWith","container","options","expandConfig","html","innerHTML","trim","classList","add","root","addContainer","setAttribute","scrollingContainer","emitter","scroll","whitelist","editor","selection","theme","keyboard","addModule","clipboard","history","init","on","events","EDITOR_CHANGE","type","TEXT_CHANGE","toggle","isBlank","SCROLL_UPDATE","mutations","range","lastRange","undefined","modify","call","update","contents","convert","setContents","clear","placeholder","readOnly","disable","refNode","className","document","createElement","setRange","overload","deleteText","enable","enabled","scrollTop","focus","scrollIntoView","sources","API","getSelection","change","formatLine","formatText","setSelection","SILENT","bounds","getBounds","containerBounds","getBoundingClientRect","bottom","top","height","left","right","width","getLength","getContents","getFormat","offset","Number","MAX_VALUE","modules","getRange","getText","hasFocus","embed","insertEmbed","insertText","contains","off","apply","arguments","once","dangerouslyPasteHTML","removeFormat","deleted","applied","applyDelta","lastOp","ops","delete","ret","compose","USER","DEFAULTS","strict","version","userConfig","import","Error","themeConfig","config","module","moduleNames","concat","moduleConfig","moduleClass","toolbar","constructor","querySelector","modifier","isEnabled","oldDelta","shiftRange","args","emit","start","end","map","pos","transformPosition","max","Inline","compare","BLOT","isolate","wrap","self","other","selfIndex","order","indexOf","otherIndex","TextBlot","Text","EVENTS","eventName","addEventListener","querySelectorAll","handleDOM","Emitter","listeners","log","event","handler","push","SCROLL_BEFORE_UPDATE","SCROLL_OPTIMIZE","SELECTION_CHANGE","Module","quill","levels","method","namespace","ns","logger","bind","console","newLevel","ASCII","Editor","getDelta","consumeNextNewline","scrollLength","batchStart","normalizeDelta","op","retain","descendant","diff","formatAt","deleteAt","batchEnd","lengthRemaining","lineLength","codeIndex","codeLength","newlineIndex","optimize","leaves","formatsArr","blots","combineFormats","filter","join","replace","suffixLength","suffix","cursorIndex","data","match","textBlot","oldValue","CONTENTS","oldText","newText","diffDelta","combined","merged","Array","isArray","image","list","bullet","Range","Selection","composing","mouseDown","cursor","savedRange","handleComposition","handleDragging","listenDOM","setTimeout","native","getNativeRange","textNode","setNativeRange","ignored","startNode","startOffset","endNode","endOffset","restore","body","nativeRange","collapsed","after","attach","position","createRange","setStart","setEnd","side","rect","rangeCount","getRangeAt","normalizeNative","info","normalized","normalizedToRange","activeElement","positions","indexes","Container","startContainer","endContainer","childNodes","lastChild","i","first","last","scrollBounds","parentNode","removeAllRanges","addRange","blur","rangeToNative","oldRange","e","Code","CodeBlock","textContent","frag","nextNewline","prevNewline","isolateLength","mergeInto","searchIndex","reverse","lastIndexOf","appendChild","prev","removeChild","unwrap","TAB","Break","isLine","Scroll","batch","INLINE_BLOT","wrapper","pop","getLines","lengthLeft","forEachAt","observer","takeRecords","SHORTKEY","test","navigator","platform","Keyboard","evt","binding","normalize","some","which","keyCode","bindings","addBinding","ENTER","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","BACKSPACE","handleBackspace","DELETE","handleDelete","prefix","handleDeleteRange","listen","defaultPrevented","getLine","getLeaf","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","prevented","every","preventDefault","ESCAPE","LEFT","UP","RIGHT","DOWN","makeFormatHandler","indent","makeCodeBlockHandler","cutoff","updateContents","header","makeEmbedArrowHandler","where","curFormats","prevFormats","nextLength","nextFormats","firstFormats","lastFormats","lineFormats","scrollIndex","getIndex","toUpperCase","shortKey","charCodeAt","Cursor","createTextNode","_length","restoreText","mutation","ColorAttributor","component","parseInt","toString","Style","ColorClass","Class","INLINE","ColorStyle","Link","sanitize","getAttribute","url","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","optionsCounter","toggleAriaAttribute","element","Picker","select","buildPicker","style","display","label","togglePicker","escape","option","item","tabIndex","hasAttribute","selectItem","id","buildItem","selected","buildLabel","buildOptions","close","trigger","selectedIndex","removeAttribute","Event","dispatchEvent","createEvent","initEvent","isActive","Theme","themes","GUARD_TEXT","contentNode","childNode","leftGuard","rightGuard","prevLength","AlignAttribute","Attribute","AlignClass","AlignStyle","BackgroundClass","BackgroundStyle","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyleAttributor","FontStyle","SizeClass","SizeStyle","exports","require","History","lastRecorded","ignoreChange","userOnly","record","transform","undo","redo","dest","stack","getLastChangeIndex","changeDelta","undoDelta","timestamp","Date","now","delay","maxStack","endsWithNewlineChange","attr","deleteLength","changeIndex","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","listener","removeEventListener","tooltip","textbox","hide","pickers","picker","extendToolbar","buttons","icons","button","selects","fillSelect","align","handlers","formula","edit","fileInput","files","reader","FileReader","onload","result","readAsDataURL","click","video","BaseTooltip","boundsContainer","save","cancel","mode","preview","linkRange","restoreFocus","extractVideoUrl","defaultValue","elem","_toggle","DOMTokenList","prototype","token","String","searchString","substr","subjectString","isFinite","floor","lastIndex","defineProperty","predicate","TypeError","thisArg","execCommand","DOM_KEY","CLIPBOARD_CONFIG","Node","TEXT_NODE","matchText","matchNewline","matchBreak","ELEMENT_NODE","matchBlot","matchSpacing","matchAttributor","matchStyles","matchIndent","matchAlias","matchIgnore","ATTRIBUTE_ATTRIBUTORS","memo","keyName","STYLE_ATTRIBUTORS","Clipboard","onPaste","matchers","selector","matcher","matchVisual","addMatcher","innerText","prepareMatching","elementMatchers","textMatchers","traverse","deltaEndsWith","paste","pair","applyFormat","computeStyle","nodeType","window","getComputedStyle","endText","childrenDelta","classes","styles","ATTRIBUTE","nextSibling","nextElementSibling","nodeHeight","offsetHeight","parseFloat","marginTop","marginBottom","offsetTop","fontStyle","italic","fontWeight","bold","textIndent","whiteSpace","replacer","collapse","previousSibling","Bold","replaceWith","Toolbar","addControls","HTMLElement","controls","addHandler","input","prompt","addButton","groups","group","control","addSelect","clean","direction","link","ColorPicker","backgroundColor","colorLabel","stroke","fill","IconPicker","defaultItem","Tooltip","TEMPLATE","reference","offsetWidth","rootBounds","verticalShift","TOOLBAR_CONFIG","SnowTheme","buildButtons","buildPickers","SnowTooltip","show","IdentAttributor","IndentClass","Blockquote","Header","ListItem","List","listEventHandler","Italic","Script","Strike","Underline","ATTRIBUTES","Image","Video","FormulaBlot","katex","render","throwOnError","errorColor","Formula","SyntaxCodeBlock","highlight","cachedText","CodeToken","Syntax","timer","clearTimeout","interval","code","hljs","highlightAuto","BubbleTheme","BubbleTooltip","lastLine","arrow","marginLeft","div","onerror","msg","beforeEach","jasmine","addMatchers","toEqualHTML","compareHTML","toBeApproximately","compareApproximately","firstChild","initialize","actual","expected","tolerance","pass","abs","message","ignoreClassId","div1","div2","ignoredAttributes","compareNodes","node1","node2","attr1","attr2","pp","child1","klass","describe","it","expect","spyOn","and","callThrough","toHaveBeenCalledWith","any","done","toEqual","toBe","outerHTML","p","em","strike","color","underline","size","setup","textarea","not","fontFamily","lineHeight","border","float","span","afterEach","toBeGreaterThan","toThrow","toBeTruthy","pasteHTML","setText","old","calls","mostRecent","oldModules","syntax","oldTheme","oldToolbar","user","original","dataset","toContain","initial","script","toHaveBeenCalled","regex","composer","exec","changed","font","boldButton","linkButton","sizeSelect","toBeLessThan","centerButton","leftButton","createKeydownEvent","bubbles","cancelable","pickerSelectorInstance","pickerSelector","toBeFalsy","optionsId","ariaControlsLabel","pickerLabel","pickerItem","insertVideo","src"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACpCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;ACnJA;AACA;AACA;AACA;;;AAGA,4CAA4C;;;AAG5C;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,mBAAmB;AACvC;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,OAAO;AACP,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;ACpUA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,YAAY;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClQA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;AC1CA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAI;AACX;AACA,KAAK;;AAEL;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,2DAA2D;AAC3D;AACA,OAAO,IAAI;AACX;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;;;;;;;;;;;;AC1IA;;;;;;;;;;;;IAGMe,K;;;;;;;;;;;+BAKO3V,M,EAAQ0B,G,EAAK;AACtB,UAAI1B,OAAOsB,QAAP,CAAgB9B,MAAhB,KAA2B,CAA/B,EAAkC;AAChC,iHAAiBQ,MAAjB,EAAyB0B,GAAzB;AACD,OAFD,MAEO;AACL,aAAKE,MAAL;AACD;AACF;;;6BAEQ;AACP,aAAO,CAAP;AACD;;;4BAEO;AACN,aAAO,EAAP;AACD;;;4BAlBc;AACb,aAAOmE,SAAP;AACD;;;;EAHiB,oBAAU1F,K;;AAqB9BsV,MAAM5V,QAAN,GAAiB,OAAjB;AACA4V,MAAMtT,OAAN,GAAgB,IAAhB;;kBAGesT,K;;;;;;AC5Bf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;;;;;;;;;AChQA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAGA,SAASC,MAAT,CAAgBnU,IAAhB,EAAsB;AACpB,SAAQA,mCAAyBA,iCAAjC;AACD;;IAGKoU,M;;;AACJ,kBAAYhX,OAAZ,EAAqB+L,MAArB,EAA6B;AAAA;;AAAA,gHACrB/L,OADqB;;AAE3B,UAAK4F,OAAL,GAAemG,OAAOnG,OAAtB;AACA,QAAIqM,MAAMC,OAAN,CAAcn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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3JA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA,CAAC;AACD;;;;;;;;ACrEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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AAoB1F,MAApB,EAA4Bpd,MAA5B,EAA0D;AAAA,MAAtBqkB,YAAsB,uEAAP,KAAO;;AACxDrkB,SAAOwE,OAAP,CAAe,UAAS1E,KAAT,EAAgB;AAC7B,QAAI6d,SAAShW,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACA,QAAI9H,UAAUukB,YAAd,EAA4B;AAC1B1G,aAAOrY,YAAP,CAAoB,UAApB,EAAgC,UAAhC;AACD,KAFD,MAEO;AACLqY,aAAOrY,YAAP,CAAoB,OAApB,EAA6BxF,KAA7B;AACD;AACDsd,WAAO/G,WAAP,CAAmBsH,MAAnB;AACD,GARD;AASD;;QAGQiG,W,GAAAA,W;QAA0BpgB,O,GAAbye,S;;;;;;;ACvQtB;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACrIA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChLA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;AC/FA,IAAIqC,OAAO3c,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACA0c,KAAKpf,SAAL,CAAesB,MAAf,CAAsB,YAAtB,EAAoC,KAApC;AACA,IAAI8d,KAAKpf,SAAL,CAAekF,QAAf,CAAwB,YAAxB,CAAJ,EAA2C;AACzC,MAAIma,UAAUC,aAAaC,SAAb,CAAuBje,MAArC;AACAge,eAAaC,SAAb,CAAuBje,MAAvB,GAAgC,UAASke,KAAT,EAAgBxhB,KAAhB,EAAuB;AACrD,QAAIqH,UAAUhK,MAAV,GAAmB,CAAnB,IAAwB,CAAC,KAAK6J,QAAL,CAAcsa,KAAd,CAAD,KAA0B,CAACxhB,KAAvD,EAA8D;AAC5D,aAAOA,KAAP;AACD,KAFD,MAEO;AACL,aAAOqhB,QAAQvd,IAAR,CAAa,IAAb,EAAmB0d,KAAnB,CAAP;AACD;AACF,GAND;AAOD;;AAED,IAAI,CAACC,OAAOF,SAAP,CAAiB9f,UAAtB,EAAkC;AAChCggB,SAAOF,SAAP,CAAiB9f,UAAjB,GAA8B,UAASigB,YAAT,EAAuBjR,QAAvB,EAAgC;AAC5DA,eAAWA,YAAY,CAAvB;AACA,WAAO,KAAKkR,MAAL,CAAYlR,QAAZ,EAAsBiR,aAAarkB,MAAnC,MAA+CqkB,YAAtD;AACD,GAHD;AAID;;AAED,IAAI,CAACD,OAAOF,SAAP,CAAiB/jB,QAAtB,EAAgC;AAC9BikB,SAAOF,SAAP,CAAiB/jB,QAAjB,GAA4B,UAASkkB,YAAT,EAAuBjR,QAAvB,EAAiC;AAC3D,QAAImR,gBAAgB,KAAK9I,QAAL,EAApB;AACA,QAAI,OAAOrI,QAAP,KAAoB,QAApB,IAAgC,CAACoR,SAASpR,QAAT,CAAjC,IAAuD5R,KAAKijB,KAAL,CAAWrR,QAAX,MAAyBA,QAAhF,IAA4FA,WAAWmR,cAAcvkB,MAAzH,EAAiI;AAC/HoT,iBAAWmR,cAAcvkB,MAAzB;AACD;AACDoT,gBAAYiR,aAAarkB,MAAzB;AACA,QAAI0kB,YAAYH,cAAcrX,OAAd,CAAsBmX,YAAtB,EAAoCjR,QAApC,CAAhB;AACA,WAAOsR,cAAc,CAAC,CAAf,IAAoBA,cAActR,QAAzC;AACD,GARD;AASD;;AAED,IAAI,CAAC9B,MAAM4S,SAAN,CAAgB1gB,IAArB,EAA2B;AACzBO,SAAO4gB,cAAP,CAAsBrT,MAAM4S,SAA5B,EAAuC,MAAvC,EAA+C;AAC7C3kB,WAAO,eAASqlB,SAAT,EAAoB;AACzB,UAAI,SAAS,IAAb,EAAmB;AACjB,cAAM,IAAIC,SAAJ,CAAc,kDAAd,CAAN;AACD;AACD,UAAI,OAAOD,SAAP,KAAqB,UAAzB,EAAqC;AACnC,cAAM,IAAIC,SAAJ,CAAc,8BAAd,CAAN;AACD;AACD,UAAIpT,OAAO1N,OAAO,IAAP,CAAX;AACA,UAAI/D,SAASyR,KAAKzR,MAAL,KAAgB,CAA7B;AACA,UAAI8kB,UAAU9a,UAAU,CAAV,CAAd;AACA,UAAIzK,KAAJ;;AAEA,WAAK,IAAIiV,IAAI,CAAb,EAAgBA,IAAIxU,MAApB,EAA4BwU,GAA5B,EAAiC;AAC/BjV,gBAAQkS,KAAK+C,CAAL,CAAR;AACA,YAAIoQ,UAAUne,IAAV,CAAeqe,OAAf,EAAwBvlB,KAAxB,EAA+BiV,CAA/B,EAAkC/C,IAAlC,CAAJ,EAA6C;AAC3C,iBAAOlS,KAAP;AACD;AACF;AACD,aAAOgH,SAAP;AACD;AApB4C,GAA/C;AAsBD;;AAEDa,SAASoG,gBAAT,CAA0B,kBAA1B,EAA8C,YAAW;AACvD;AACApG,WAAS2d,WAAT,CAAqB,sBAArB,EAA6C,KAA7C,EAAoD,KAApD;AACA;AACA3d,WAAS2d,WAAT,CAAqB,eAArB,EAAsC,KAAtC,EAA6C,KAA7C;AACD,CALD,E;;;;;;ACzDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,cAAc,eAAe;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,IAAI;AACf,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA,kCAAkC,0BAA0B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjuBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0DAA0D,OAAO;AACjE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,eAAe,YAAY;AAC3B;;AAEA;AACA,2DAA2D;AAC3D,+DAA+D;AAC/D,mEAAmE;AACnE,uEAAuE;AACvE;AACA,0DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,2DAA2D,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;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","file":"unit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 114);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f3e82c5b9367de7d46ed","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./blot/abstract/container\");\nvar format_1 = require(\"./blot/abstract/format\");\nvar leaf_1 = require(\"./blot/abstract/leaf\");\nvar scroll_1 = require(\"./blot/scroll\");\nvar inline_1 = require(\"./blot/inline\");\nvar block_1 = require(\"./blot/block\");\nvar embed_1 = require(\"./blot/embed\");\nvar text_1 = require(\"./blot/text\");\nvar attributor_1 = require(\"./attributor/attributor\");\nvar class_1 = require(\"./attributor/class\");\nvar style_1 = require(\"./attributor/style\");\nvar store_1 = require(\"./attributor/store\");\nvar Registry = require(\"./registry\");\nvar Parchment = {\n    Scope: Registry.Scope,\n    create: Registry.create,\n    find: Registry.find,\n    query: Registry.query,\n    register: Registry.register,\n    Container: container_1.default,\n    Format: format_1.default,\n    Leaf: leaf_1.default,\n    Embed: embed_1.default,\n    Scroll: scroll_1.default,\n    Block: block_1.default,\n    Inline: inline_1.default,\n    Text: text_1.default,\n    Attributor: {\n        Attribute: attributor_1.default,\n        Class: class_1.default,\n        Style: style_1.default,\n        Store: store_1.default,\n    },\n};\nexports.default = Parchment;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/parchment.ts\n// module id = 0\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParchmentError = /** @class */ (function (_super) {\n    __extends(ParchmentError, _super);\n    function ParchmentError(message) {\n        var _this = this;\n        message = '[Parchment] ' + message;\n        _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = _this.constructor.name;\n        return _this;\n    }\n    return ParchmentError;\n}(Error));\nexports.ParchmentError = ParchmentError;\nvar attributes = {};\nvar classes = {};\nvar tags = {};\nvar types = {};\nexports.DATA_KEY = '__blot';\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"TYPE\"] = 3] = \"TYPE\";\n    Scope[Scope[\"LEVEL\"] = 12] = \"LEVEL\";\n    Scope[Scope[\"ATTRIBUTE\"] = 13] = \"ATTRIBUTE\";\n    Scope[Scope[\"BLOT\"] = 14] = \"BLOT\";\n    Scope[Scope[\"INLINE\"] = 7] = \"INLINE\";\n    Scope[Scope[\"BLOCK\"] = 11] = \"BLOCK\";\n    Scope[Scope[\"BLOCK_BLOT\"] = 10] = \"BLOCK_BLOT\";\n    Scope[Scope[\"INLINE_BLOT\"] = 6] = \"INLINE_BLOT\";\n    Scope[Scope[\"BLOCK_ATTRIBUTE\"] = 9] = \"BLOCK_ATTRIBUTE\";\n    Scope[Scope[\"INLINE_ATTRIBUTE\"] = 5] = \"INLINE_ATTRIBUTE\";\n    Scope[Scope[\"ANY\"] = 15] = \"ANY\";\n})(Scope = exports.Scope || (exports.Scope = {}));\nfunction create(input, value) {\n    var match = query(input);\n    if (match == null) {\n        throw new ParchmentError(\"Unable to create \" + input + \" blot\");\n    }\n    var BlotClass = match;\n    var node = \n    // @ts-ignore\n    input instanceof Node || input['nodeType'] === Node.TEXT_NODE ? input : BlotClass.create(value);\n    return new BlotClass(node, value);\n}\nexports.create = create;\nfunction find(node, bubble) {\n    if (bubble === void 0) { bubble = false; }\n    if (node == null)\n        return null;\n    // @ts-ignore\n    if (node[exports.DATA_KEY] != null)\n        return node[exports.DATA_KEY].blot;\n    if (bubble)\n        return find(node.parentNode, bubble);\n    return null;\n}\nexports.find = find;\nfunction query(query, scope) {\n    if (scope === void 0) { scope = Scope.ANY; }\n    var match;\n    if (typeof query === 'string') {\n        match = types[query] || attributes[query];\n        // @ts-ignore\n    }\n    else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n        match = types['text'];\n    }\n    else if (typeof query === 'number') {\n        if (query & Scope.LEVEL & Scope.BLOCK) {\n            match = types['block'];\n        }\n        else if (query & Scope.LEVEL & Scope.INLINE) {\n            match = types['inline'];\n        }\n    }\n    else if (query instanceof HTMLElement) {\n        var names = (query.getAttribute('class') || '').split(/\\s+/);\n        for (var i in names) {\n            match = classes[names[i]];\n            if (match)\n                break;\n        }\n        match = match || tags[query.tagName];\n    }\n    if (match == null)\n        return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n        return match;\n    return null;\n}\nexports.query = query;\nfunction register() {\n    var Definitions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        Definitions[_i] = arguments[_i];\n    }\n    if (Definitions.length > 1) {\n        return Definitions.map(function (d) {\n            return register(d);\n        });\n    }\n    var Definition = Definitions[0];\n    if (typeof Definition.blotName !== 'string' && typeof Definition.attrName !== 'string') {\n        throw new ParchmentError('Invalid definition');\n    }\n    else if (Definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n    }\n    types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n        attributes[Definition.keyName] = Definition;\n    }\n    else {\n        if (Definition.className != null) {\n            classes[Definition.className] = Definition;\n        }\n        if (Definition.tagName != null) {\n            if (Array.isArray(Definition.tagName)) {\n                Definition.tagName = Definition.tagName.map(function (tagName) {\n                    return tagName.toUpperCase();\n                });\n            }\n            else {\n                Definition.tagName = Definition.tagName.toUpperCase();\n            }\n            var tagNames = Array.isArray(Definition.tagName) ? Definition.tagName : [Definition.tagName];\n            tagNames.forEach(function (tag) {\n                if (tags[tag] == null || Definition.className == null) {\n                    tags[tag] = Definition;\n                }\n            });\n        }\n    }\n    return Definition;\n}\nexports.register = register;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/registry.ts\n// module id = 1\n// module chunks = 0 1 2","var diff = require('fast-diff');\nvar equal = require('deep-equal');\nvar extend = require('extend');\nvar op = require('./op');\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/quill-delta/lib/delta.js\n// module id = 2\n// module chunks = 0 1 2","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extend/index.js\n// module id = 3\n// module chunks = 0 1 2","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Break from './break';\nimport Inline from './inline';\nimport TextBlot from './text';\n\n\nconst NEWLINE_LENGTH = 1;\n\n\nclass BlockEmbed extends Parchment.Embed {\n  attach() {\n    super.attach();\n    this.attributes = new Parchment.Attributor.Store(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), extend(this.formats(), this.attributes.values()));\n  }\n\n  format(name, value) {\n    let attribute = Parchment.query(name, Parchment.Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n\n  insertAt(index, value, def) {\n    if (typeof value === 'string' && value.endsWith('\\n')) {\n      let block = Parchment.create(Block.blotName);\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\n      block.insertAt(0, value.slice(0, -1));\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n}\nBlockEmbed.scope = Parchment.Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\n\nclass Block extends Parchment.Block {\n  constructor(domNode) {\n    super(domNode);\n    this.cache = {};\n  }\n\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = this.descendants(Parchment.Leaf).reduce((delta, leaf) => {\n        if (leaf.length() === 0) {\n          return delta;\n        } else {\n          return delta.insert(leaf.value(), bubbleFormats(leaf));\n        }\n      }, new Delta()).insert('\\n', bubbleFormats(this));\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (Parchment.query(name, Parchment.Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n    this.cache = {};\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) return super.insertAt(index, value, def);\n    if (value.length === 0) return;\n    let lines = value.split('\\n');\n    let text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    let block = this;\n    lines.reduce(function(index, line) {\n      block = block.split(index, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot, ref) {\n    let head = this.children.head;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  merge(source) {\n    let ref = this.children.head instanceof Break ? null : this.children.head;\n    source.moveChildren(this, ref);\n    source.remove();\n  }\n\n  mergeInto(target) {\n    target.merge(this);\n  }\n\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index) {\n    return super.path(index, true);\n  }\n\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index, force = false) {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      let clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      } else {\n        this.parent.insertBefore(clone, this.next);\n        return clone;\n      }\n    } else {\n      let next = super.split(index, force);\n      this.cache = {};\n      return next;\n    }\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = 'break';\nBlock.allowedChildren = [Inline, Parchment.Embed, TextBlot];\n\n\nfunction bubbleFormats(blot, formats = {}) {\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = extend(formats, blot.formats());\n  }\n  if (blot.parent == null || blot.parent.blotName == 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\n\nexport { bubbleFormats, BlockEmbed, Block as default };\n\n\n\n// WEBPACK FOOTER //\n// ./blots/block.js","import './polyfill';\nimport Delta from 'quill-delta';\nimport Editor from './editor';\nimport Emitter from './emitter';\nimport Module from './module';\nimport Parchment from 'parchment';\nimport Selection, { Range } from './selection';\nimport extend from 'extend';\nimport logger from './logger';\nimport Theme from './theme';\n\nlet debug = logger('quill');\n\n\nclass Quill {\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node) {\n    return node.__quill || Parchment.find(node);\n  }\n\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(path, target, overwrite = false) {\n    if (typeof path !== 'string') {\n      let name = path.attrName || path.blotName;\n      if (typeof name === 'string') {\n        // register(Blot | Attributor, overwrite)\n        this.register('formats/' + name, path, target);\n      } else {\n        Object.keys(path).forEach((key) => {\n          this.register(key, path[key], target);\n        });\n      }\n    } else {\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if ((path.startsWith('blots/') || path.startsWith('formats/')) &&\n          target.blotName !== 'abstract') {\n        Parchment.register(target);\n      } else if (path.startsWith('modules') && typeof target.register === 'function') {\n        target.register();\n      }\n    }\n  }\n\n  constructor(container, options = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    let html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    this.container.__quill = this;\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new Emitter();\n    this.scroll = Parchment.create(this.root, {\n      emitter: this.emitter,\n      whitelist: this.options.formats\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options);\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      let range = this.selection.lastRange;\n      let index = range && range.length === 0 ? range.index : undefined;\n      modify.call(this, () => {\n        return this.editor.update(null, mutations, index);\n      }, source);\n    });\n    let contents = this.clipboard.convert(`<div class='ql-editor' style=\"white-space: normal;\">${html}<p><br></p></div>`);\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  addContainer(container, refNode = null) {\n    if (typeof container === 'string') {\n      let className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1*length);\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus() {\n    let scrollTop = this.scrollingContainer.scrollTop;\n    this.selection.focus();\n    this.scrollingContainer.scrollTop = scrollTop;\n    this.scrollIntoView();\n  }\n\n  format(name, value, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      let range = this.getSelection(true);\n      let change = new Delta();\n      if (range == null) {\n        return change;\n      } else if (Parchment.query(name, Parchment.Scope.BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, { [name]: value });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, { [name]: value });\n      }\n      this.setSelection(range, Emitter.sources.SILENT);\n      return change;\n    }, source);\n  }\n\n  formatLine(index, length, name, value, source) {\n    let formats;\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n\n  formatText(index, length, name, value, source) {\n    let formats;\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n\n  getBounds(index, length = 0) {\n    let bounds;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    let containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index = this.getSelection(true), length = 0) {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    } else {\n      return this.editor.getFormat(index.index, index.length);\n    }\n  }\n\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n\n  getLines(index = 0, length = Number.MAX_VALUE) {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    } else {\n      return this.scroll.lines(index, length);\n    }\n  }\n\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus = false) {\n    if (focus) this.focus();\n    this.update();  // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getText(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n\n  insertText(index, text, name, value, source) {\n    let formats;\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n\n  isEnabled() {\n    return !this.container.classList.contains('ql-disabled');\n  }\n\n  off() {\n    return this.emitter.off.apply(this.emitter, arguments);\n  }\n\n  on() {\n    return this.emitter.on.apply(this.emitter, arguments);\n  }\n\n  once() {\n    return this.emitter.once.apply(this.emitter, arguments);\n  }\n\n  pasteHTML(index, html, source) {\n    this.clipboard.dangerouslyPasteHTML(index, html, source);\n  }\n\n  removeFormat(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n\n  scrollIntoView() {\n    this.selection.scrollIntoView(this.scrollingContainer);\n  }\n\n  setContents(delta, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      let length = this.getLength();\n      let deleted = this.editor.deleteText(0, length);\n      let applied = this.editor.applyDelta(delta);\n      let lastOp = applied.ops[applied.ops.length - 1];\n      if (lastOp != null && typeof(lastOp.insert) === 'string' && lastOp.insert[lastOp.insert.length-1] === '\\n') {\n        this.editor.deleteText(this.getLength() - 1, 1);\n        applied.delete(1);\n      }\n      let ret = deleted.compose(applied);\n      return ret;\n    }, source);\n  }\n\n  setSelection(index, length, source) {\n    if (index == null) {\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(index, length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.selection.scrollIntoView(this.scrollingContainer);\n      }\n    }\n  }\n\n  setText(text, source = Emitter.sources.API) {\n    let delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    let change = this.scroll.update(source);   // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    return change;\n  }\n\n  updateContents(delta, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      return this.editor.applyDelta(delta, source);\n    }, source, true);\n  }\n}\nQuill.DEFAULTS = {\n  bounds: null,\n  formats: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  scrollingContainer: null,\n  strict: true,\n  theme: 'default'\n};\nQuill.events = Emitter.events;\nQuill.sources = Emitter.sources;\n// eslint-disable-next-line no-undef\nQuill.version = typeof(QUILL_VERSION) === 'undefined' ? 'dev' : QUILL_VERSION;\n\nQuill.imports = {\n  'delta'       : Delta,\n  'parchment'   : Parchment,\n  'core/module' : Module,\n  'core/theme'  : Theme\n};\n\n\nfunction expandConfig(container, userConfig) {\n  userConfig = extend(true, {\n    container: container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true\n    }\n  }, userConfig);\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = Theme;\n  } else {\n    userConfig.theme = Quill.import(`themes/${userConfig.theme}`);\n    if (userConfig.theme == null) {\n      throw new Error(`Invalid theme ${userConfig.theme}. Did you register it?`);\n    }\n  }\n  let themeConfig = extend(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(function(config) {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(function(module) {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  let moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  let moduleConfig = moduleNames.reduce(function(config, name) {\n    let moduleClass = Quill.import(`modules/${name}`);\n    if (moduleClass == null) {\n      debug.error(`Cannot load ${name} module. Are you sure you registered it?`);\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (userConfig.modules != null && userConfig.modules.toolbar &&\n      userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n  userConfig = extend(true, {}, Quill.DEFAULTS, { modules: moduleConfig }, themeConfig, userConfig);\n  ['bounds', 'container', 'scrollingContainer'].forEach(function(key) {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(function(config, name) {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n    return config;\n  }, {});\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (this.options.strict && !this.isEnabled() && source === Emitter.sources.USER) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  let oldDelta = this.editor.delta;\n  let change = modifier();\n  if (range != null) {\n    if (index === true) index = range.index;\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    let args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value, value = name, name = length, length = index.length, index = index.index;\n    } else {\n      length = index.length, index = index.index;\n    }\n  } else if (typeof length !== 'number') {\n    source = value, value = name, name = length, length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  let start, end;\n  if (index instanceof Delta) {\n    [start, end] = [range.index, range.index + range.length].map(function(pos) {\n      return index.transformPosition(pos, source !== Emitter.sources.USER);\n    });\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(function(pos) {\n      if (pos < index || (pos === index && source === Emitter.sources.USER)) return pos;\n      if (length >= 0) {\n        return pos + length;\n      } else {\n        return Math.max(index, pos + length);\n      }\n    });\n  }\n  return new Range(start, end - start);\n}\n\n\nexport { expandConfig, overload, Quill as default };\n\n\n\n// WEBPACK FOOTER //\n// ./core/quill.js","import Text from './text';\nimport Parchment from 'parchment';\n\n\nclass Inline extends Parchment.Inline {\n  static compare(self, other) {\n    let selfIndex = Inline.order.indexOf(self);\n    let otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    } else if (self === other) {\n      return 0;\n    } else if (self < other) {\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && Parchment.query(name, Parchment.Scope.BLOT)) {\n      let blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent instanceof Inline &&\n        Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      let parent = this.parent.isolate(this.offset(), this.length());\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nInline.allowedChildren = [Inline, Parchment.Embed, Text];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = [\n  'cursor', 'inline',   // Must be lower\n  'underline', 'strike', 'italic', 'bold', 'script',\n  'link', 'code'        // Must be higher\n];\n\n\nexport default Inline;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/inline.js","import Parchment from 'parchment';\n\nclass TextBlot extends Parchment.Text { }\n\nexport default TextBlot;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/text.js","import EventEmitter from 'eventemitter3';\nimport logger from './logger';\n\nlet debug = logger('quill:events');\n\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach(function(eventName) {\n  document.addEventListener(eventName, (...args) => {\n    [].slice.call(document.querySelectorAll('.ql-container')).forEach((node) => {\n      // TODO use WeakMap\n      if (node.__quill && node.__quill.emitter) {\n        node.__quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\n\nclass Emitter extends EventEmitter {\n  constructor() {\n    super();\n    this.listeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit() {\n    debug.log.apply(debug, arguments);\n    super.emit.apply(this, arguments);\n  }\n\n  handleDOM(event, ...args) {\n    (this.listeners[event.type] || []).forEach(function({ node, handler }) {\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName, node, handler) {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n    this.listeners[eventName].push({ node, handler })\n  }\n}\n\nEmitter.events = {\n  EDITOR_CHANGE        : 'editor-change',\n  SCROLL_BEFORE_UPDATE : 'scroll-before-update',\n  SCROLL_OPTIMIZE      : 'scroll-optimize',\n  SCROLL_UPDATE        : 'scroll-update',\n  SELECTION_CHANGE     : 'selection-change',\n  TEXT_CHANGE          : 'text-change'\n};\nEmitter.sources = {\n  API    : 'api',\n  SILENT : 'silent',\n  USER   : 'user'\n};\n\n\nexport default Emitter;\n\n\n\n// WEBPACK FOOTER //\n// ./core/emitter.js","class Module {\n  constructor(quill, options = {}) {\n    this.quill = quill;\n    this.options = options;\n  }\n}\nModule.DEFAULTS = {};\n\n\nexport default Module;\n\n\n\n// WEBPACK FOOTER //\n// ./core/module.js","let levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\n\nfunction debug(method, ...args) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    console[method](...args);  // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce(function(logger, method) {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\ndebug.level = namespace.level = function(newLevel) {\n  level = newLevel;\n};\n\n\nexport default namespace;\n\n\n\n// WEBPACK FOOTER //\n// ./core/logger.js","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-equal/index.js\n// module id = 11\n// module chunks = 0 1 2","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = require(\"../registry\");\nvar Attributor = /** @class */ (function () {\n    function Attributor(attrName, keyName, options) {\n        if (options === void 0) { options = {}; }\n        this.attrName = attrName;\n        this.keyName = keyName;\n        var attributeBit = Registry.Scope.TYPE & Registry.Scope.ATTRIBUTE;\n        if (options.scope != null) {\n            // Ignore type bits, force attribute bit\n            this.scope = (options.scope & Registry.Scope.LEVEL) | attributeBit;\n        }\n        else {\n            this.scope = Registry.Scope.ATTRIBUTE;\n        }\n        if (options.whitelist != null)\n            this.whitelist = options.whitelist;\n    }\n    Attributor.keys = function (node) {\n        return [].map.call(node.attributes, function (item) {\n            return item.name;\n        });\n    };\n    Attributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        node.setAttribute(this.keyName, value);\n        return true;\n    };\n    Attributor.prototype.canAdd = function (node, value) {\n        var match = Registry.query(node, Registry.Scope.BLOT & (this.scope | Registry.Scope.TYPE));\n        if (match == null)\n            return false;\n        if (this.whitelist == null)\n            return true;\n        if (typeof value === 'string') {\n            return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n        }\n        else {\n            return this.whitelist.indexOf(value) > -1;\n        }\n    };\n    Attributor.prototype.remove = function (node) {\n        node.removeAttribute(this.keyName);\n    };\n    Attributor.prototype.value = function (node) {\n        var value = node.getAttribute(this.keyName);\n        if (this.canAdd(node, value) && value) {\n            return value;\n        }\n        return '';\n    };\n    return Attributor;\n}());\nexports.default = Attributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/attributor.ts\n// module id = 12\n// module chunks = 0 1 2","import Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport Parchment from 'parchment';\nimport CodeBlock from '../formats/code';\nimport CursorBlot from '../blots/cursor';\nimport Block, { bubbleFormats } from '../blots/block';\nimport Break from '../blots/break';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\n\n\nconst ASCII = /^[ -~]*$/;\n\n\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta) {\n    let consumeNextNewline = false;\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    delta = normalizeDelta(delta);\n    delta.reduce((index, op) => {\n      let length = op.retain || op.delete || op.insert.length || 1;\n      let attributes = op.attributes || {};\n      if (op.insert != null) {\n        if (typeof op.insert === 'string') {\n          let text = op.insert;\n          if (text.endsWith('\\n') && consumeNextNewline) {\n            consumeNextNewline = false;\n            text = text.slice(0, -1);\n          }\n          if (index >= scrollLength && !text.endsWith('\\n')) {\n            consumeNextNewline = true;\n          }\n          this.scroll.insertAt(index, text);\n          let [line, offset] = this.scroll.line(index);\n          let formats = extend({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            let [leaf, ] = line.descendant(Parchment.Leaf, offset);\n            formats = extend(formats, bubbleFormats(leaf));\n          }\n          attributes = DeltaOp.attributes.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          let key = Object.keys(op.insert)[0];  // There should only be one key\n          if (key == null) return index;\n          this.scroll.insertAt(index, key, op.insert[key]);\n        }\n        scrollLength += length;\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      return index + length;\n    }, 0);\n    delta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + (op.retain || op.insert.length || 1);\n    }, 0);\n    this.scroll.batchEnd();\n    return this.update(delta);\n  }\n\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(index, length, formats = {}) {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      if (this.scroll.whitelist != null && !this.scroll.whitelist[format]) return;\n      let lines = this.scroll.lines(index, Math.max(length, 1));\n      let lengthRemaining = length;\n      lines.forEach((line) => {\n        let lineLength = line.length();\n        if (!(line instanceof CodeBlock)) {\n          line.format(format, formats[format]);\n        } else {\n          let codeIndex = index - line.offset(this.scroll);\n          let codeLength = line.newlineIndex(codeIndex + lengthRemaining) - codeIndex + 1;\n          line.formatAt(codeIndex, codeLength, format, formats[format]);\n        }\n        lengthRemaining -= lineLength;\n      });\n    });\n    this.scroll.optimize();\n    return this.update(new Delta().retain(index).retain(length, clone(formats)));\n  }\n\n  formatText(index, length, formats = {}) {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).retain(length, clone(formats)));\n  }\n\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index, length = 0) {\n    let lines = [], leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(function(path) {\n        let [blot, ] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof Parchment.Leaf) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(Parchment.Leaf, index, length);\n    }\n    let formatsArr = [lines, leaves].map(function(blots) {\n      if (blots.length === 0) return {};\n      let formats = bubbleFormats(blots.shift());\n      while (Object.keys(formats).length > 0) {\n        let blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return extend.apply(extend, formatsArr);\n  }\n\n  getText(index, length) {\n    return this.getContents(index, length).filter(function(op) {\n      return typeof op.insert === 'string';\n    }).map(function(op) {\n      return op.insert;\n    }).join('');\n  }\n\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(index, text, formats = {}) {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, clone(formats)));\n  }\n\n  isBlank() {\n    if (this.scroll.children.length == 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    let block = this.scroll.children.head;\n    if (block.statics.blotName !== Block.blotName) return false;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index, length) {\n    let text = this.getText(index, length);\n    let [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0, suffix = new Delta();\n    if (line != null) {\n      if (!(line instanceof CodeBlock)) {\n        suffixLength = line.length() - offset;\n      } else {\n        suffixLength = line.newlineIndex(offset) - offset + 1;\n      }\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n    }\n    let contents = this.getContents(index, length + suffixLength);\n    let diff = contents.diff(new Delta().insert(text).concat(suffix));\n    let delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(change, mutations = [], cursorIndex = undefined) {\n    let oldDelta = this.delta;\n    if (mutations.length === 1 &&\n        mutations[0].type === 'characterData' &&\n        mutations[0].target.data.match(ASCII) &&\n        Parchment.find(mutations[0].target)) {\n      // Optimization for character changes\n      let textBlot = Parchment.find(mutations[0].target);\n      let formats = bubbleFormats(textBlot);\n      let index = textBlot.offset(this.scroll);\n      let oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      let oldText = new Delta().insert(oldValue);\n      let newText = new Delta().insert(textBlot.value());\n      let diffDelta = new Delta().retain(index).concat(oldText.diff(newText, cursorIndex));\n      change = diffDelta.reduce(function(delta, op) {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        } else {\n          return delta.push(op);\n        }\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !equal(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, cursorIndex);\n      }\n    }\n    return change;\n  }\n}\n\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce(function(merged, name) {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce(function(delta, op) {\n    if (op.insert === 1) {\n      let attributes = clone(op.attributes);\n      delete attributes['image'];\n      return delta.insert({ image: op.attributes.image }, attributes);\n    }\n    if (op.attributes != null && (op.attributes.list === true || op.attributes.bullet === true)) {\n      op = clone(op);\n      if (op.attributes.list) {\n        op.attributes.list = 'ordered';\n      } else {\n        op.attributes.list = 'bullet';\n        delete op.attributes.bullet;\n      }\n    }\n    if (typeof op.insert === 'string') {\n      let text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return delta.insert(text, op.attributes);\n    }\n    return delta.push(op);\n  }, new Delta());\n}\n\n\nexport default Editor;\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor.js","import Parchment from 'parchment';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport Emitter from './emitter';\nimport logger from './logger';\n\nlet debug = logger('quill:selection');\n\n\nclass Range {\n  constructor(index, length = 0) {\n    this.index = index;\n    this.length = length;\n  }\n}\n\n\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = Parchment.create('cursor', this);\n    // savedRange is last non-null range\n    this.lastRange = this.savedRange = new Range(0, 0);\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type, delta) => {\n      if (type === Emitter.events.TEXT_CHANGE && delta.length() > 0) {\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      let native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return;  // cursor.restore() will handle\n      // TODO unclear if this has negative side effects\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, () => {\n        try {\n          this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n        } catch (ignored) {}\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.root.addEventListener('compositionstart', () => {\n      this.composing = true;\n    });\n    this.root.addEventListener('compositionend', () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus();\n    this.setRange(this.savedRange);\n  }\n\n  format(format, value) {\n    if (this.scroll.whitelist != null && !this.scroll.whitelist[format]) return;\n    this.scroll.update();\n    let nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || Parchment.query(format, Parchment.Scope.BLOCK)) return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      let blot = Parchment.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof Parchment.Leaf) {\n        let after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        blot.insertBefore(this.cursor, nativeRange.start.node);  // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index, length = 0) {\n    let scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node, [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    [node, offset] = leaf.position(offset, true);\n    let range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    } else {\n      let side = 'left';\n      let rect;\n      if (node instanceof Text) {\n        if (offset < node.data.length) {\n          range.setStart(node, offset);\n          range.setEnd(node, offset + 1);\n        } else {\n          range.setStart(node, offset - 1);\n          range.setEnd(node, offset);\n          side = 'right';\n        }\n        rect = range.getBoundingClientRect();\n      } else {\n        rect = leaf.domNode.getBoundingClientRect();\n        if (offset > 0) side = 'right';\n      }\n      return {\n        bottom: rect.top + rect.height,\n        height: rect.height,\n        left: rect[side],\n        right: rect[side],\n        top: rect.top,\n        width: 0\n      };\n    }\n  }\n\n  getNativeRange() {\n    let selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    let nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    let range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange() {\n    let normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    let range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus() {\n    return document.activeElement === this.root;\n  }\n\n  normalizedToRange(range) {\n    let positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    let indexes = positions.map((position) => {\n      let [node, offset] = position;\n      let blot = Parchment.find(node, true);\n      let index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      } else if (blot instanceof Parchment.Container) {\n        return index + blot.length();\n      } else {\n        return index + blot.index(node, offset);\n      }\n    });\n    let end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    let start = Math.min(end, ...indexes);\n    return new Range(start, end-start);\n  }\n\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) ||\n        (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))) {\n      return null;\n    }\n    let range = {\n      start: { node: nativeRange.startContainer, offset: nativeRange.startOffset },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(function(position) {\n      let node = position.node, offset = position.offset;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          node = node.lastChild;\n          offset = node instanceof Text ? node.data.length : node.childNodes.length + 1;\n        } else {\n          break;\n        }\n      }\n      position.node = node, position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range) {\n    let indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n    let args = [];\n    let scrollLength = this.scroll.length();\n    indexes.forEach((index, i) => {\n      index = Math.min(scrollLength - 1, index);\n      let node, [leaf, offset] = this.scroll.leaf(index);\n      [node, offset] = leaf.position(offset, i !== 0);\n      args.push(node, offset);\n    });\n    if (args.length < 2) {\n      args = args.concat(args);\n    }\n    return args;\n  }\n\n  scrollIntoView(scrollingContainer) {\n    let range = this.lastRange;\n    if (range == null) return;\n    let bounds = this.getBounds(range.index, range.length);\n    if (bounds == null) return;\n    let limit = this.scroll.length()-1;\n    let [first, ] = this.scroll.line(Math.min(range.index, limit));\n    let last = first;\n    if (range.length > 0) {\n      [last, ] = this.scroll.line(Math.min(range.index + range.length, limit));\n    }\n    if (first == null || last == null) return;\n    let scrollBounds = scrollingContainer.getBoundingClientRect();\n    if (bounds.top < scrollBounds.top) {\n      scrollingContainer.scrollTop -= (scrollBounds.top - bounds.top);\n    } else if (bounds.bottom > scrollBounds.bottom) {\n      scrollingContainer.scrollTop += (bounds.bottom - scrollBounds.bottom);\n    }\n  }\n\n  setNativeRange(startNode, startOffset, endNode = startNode, endOffset = startOffset, force = false) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n      return;\n    }\n    let selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus();\n      let native = (this.getNativeRange() || {}).native;\n      if (native == null || force ||\n          startNode !== native.startContainer ||\n          startOffset !== native.startOffset ||\n          endNode !== native.endContainer ||\n          endOffset !== native.endOffset) {\n\n        if (startNode.tagName == \"BR\") {\n          startOffset = [].indexOf.call(startNode.parentNode.childNodes, startNode);\n          startNode = startNode.parentNode;\n        }\n        if (endNode.tagName == \"BR\") {\n          endOffset = [].indexOf.call(endNode.parentNode.childNodes, endNode);\n          endNode = endNode.parentNode;\n        }\n        let range = document.createRange();\n        range.setStart(startNode, startOffset);\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n      document.body.focus();  // root.blur() not enough on IE11+Travis+SauceLabs (but not local VMs)\n    }\n  }\n\n  setRange(range, force = false, source = Emitter.sources.API) {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      let args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    let oldRange = this.lastRange;\n    let [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!equal(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        this.cursor.restore();\n      }\n      let args = [Emitter.events.SELECTION_CHANGE, clone(this.lastRange), clone(oldRange), source];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode;\n  } catch (e) {\n    return false;\n  }\n  // IE11 has bug with Text nodes\n  // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect\n  if (descendant instanceof Text) {\n    descendant = descendant.parentNode;\n  }\n  return parent.contains(descendant);\n}\n\n\nexport { Range, Selection as default };\n\n\n\n// WEBPACK FOOTER //\n// ./core/selection.js","import Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Block from '../blots/block';\nimport Inline from '../blots/inline';\nimport TextBlot from '../blots/text';\n\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\n\nclass CodeBlock extends Block {\n  static create(value) {\n    let domNode = super.create(value);\n    domNode.setAttribute('spellcheck', false);\n    return domNode;\n  }\n\n  static formats() {\n    return true;\n  }\n\n  delta() {\n    let text = this.domNode.textContent;\n    if (text.endsWith('\\n')) {      // Should always be true\n      text = text.slice(0, -1);\n    }\n    return text.split('\\n').reduce((delta, frag) => {\n      return delta.insert(frag).insert('\\n', this.formats());\n    }, new Delta());\n  }\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) return;\n    let [text, ] = this.descendant(TextBlot, this.length() - 1);\n    if (text != null) {\n      text.deleteAt(text.length() - 1, 1);\n    }\n    super.format(name, value);\n  }\n\n  formatAt(index, length, name, value) {\n    if (length === 0) return;\n    if (Parchment.query(name, Parchment.Scope.BLOCK) == null ||\n        (name === this.statics.blotName && value === this.statics.formats(this.domNode))) {\n      return;\n    }\n    let nextNewline = this.newlineIndex(index);\n    if (nextNewline < 0 || nextNewline >= index + length) return;\n    let prevNewline = this.newlineIndex(index, true) + 1;\n    let isolateLength = nextNewline - prevNewline + 1;\n    let blot = this.isolate(prevNewline, isolateLength);\n    let next = blot.next;\n    blot.format(name, value);\n    if (next instanceof CodeBlock) {\n      next.formatAt(0, index - prevNewline + length - isolateLength, name, value);\n    }\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) return;\n    let [text, offset] = this.descendant(TextBlot, index);\n    text.insertAt(offset, value);\n  }\n\n  length() {\n    let length = this.domNode.textContent.length;\n    if (!this.domNode.textContent.endsWith('\\n')) {\n      return length + 1;\n    }\n    return length;\n  }\n\n  merge(source) {\n    let newlineIndex = this.newlineIndex(0);\n    if (newlineIndex > -1) {\n      this.split(newlineIndex + 1);\n    }\n    super.merge(source);\n  }\n\n  mergeInto(target) {\n    let newlineIndex = this.newlineIndex(this.length(), true);\n    if (newlineIndex > -1) {\n      let after = this.split(newlineIndex + 1);\n      if (after === target) {\n        this.optimize();\n      } else {\n        after.mergeInto(target);\n      }\n    } else {\n      super.mergeInto(target);\n    }\n  }\n\n  newlineIndex(searchIndex, reverse = false) {\n    if (!reverse) {\n      let offset = this.domNode.textContent.slice(searchIndex).indexOf('\\n');\n      return offset > -1 ? searchIndex + offset : -1;\n    } else {\n      return this.domNode.textContent.slice(0, searchIndex).lastIndexOf('\\n');\n    }\n  }\n\n  optimize(context) {\n    if (!this.domNode.textContent.endsWith('\\n')) {\n      this.appendChild(Parchment.create('text', '\\n'));\n    }\n    super.optimize(context);\n    let next = this.next;\n    if (next != null && next.prev === this &&\n        next.statics.blotName === this.statics.blotName &&\n        this.statics.formats(this.domNode) === next.statics.formats(next.domNode)) {\n      next.optimize(context);\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  replace(target) {\n    super.replace(target);\n    [].slice.call(this.domNode.querySelectorAll('*')).forEach(function(node) {\n      let blot = Parchment.find(node);\n      if (blot == null) {\n        node.parentNode.removeChild(node);\n      } else if (blot instanceof Parchment.Embed) {\n        blot.remove();\n      } else {\n        blot.unwrap();\n      }\n    });\n  }\n}\nCodeBlock.blotName = 'code-block';\nCodeBlock.tagName = 'PRE';\nCodeBlock.TAB = '  ';\n\n\nexport { Code, CodeBlock as default };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/code.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar linked_list_1 = require(\"../../collection/linked-list\");\nvar shadow_1 = require(\"./shadow\");\nvar Registry = require(\"../../registry\");\nvar ContainerBlot = /** @class */ (function (_super) {\n    __extends(ContainerBlot, _super);\n    function ContainerBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.build();\n        return _this;\n    }\n    ContainerBlot.prototype.appendChild = function (other) {\n        this.insertBefore(other);\n    };\n    ContainerBlot.prototype.attach = function () {\n        _super.prototype.attach.call(this);\n        this.children.forEach(function (child) {\n            child.attach();\n        });\n    };\n    ContainerBlot.prototype.build = function () {\n        var _this = this;\n        this.children = new linked_list_1.default();\n        // Need to be reversed for if DOM nodes already in order\n        [].slice\n            .call(this.domNode.childNodes)\n            .reverse()\n            .forEach(function (node) {\n            try {\n                var child = makeBlot(node);\n                _this.insertBefore(child, _this.children.head || undefined);\n            }\n            catch (err) {\n                if (err instanceof Registry.ParchmentError)\n                    return;\n                else\n                    throw err;\n            }\n        });\n    };\n    ContainerBlot.prototype.deleteAt = function (index, length) {\n        if (index === 0 && length === this.length()) {\n            return this.remove();\n        }\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.deleteAt(offset, length);\n        });\n    };\n    ContainerBlot.prototype.descendant = function (criteria, index) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if ((criteria.blotName == null && criteria(child)) ||\n            (criteria.blotName != null && child instanceof criteria)) {\n            return [child, offset];\n        }\n        else if (child instanceof ContainerBlot) {\n            return child.descendant(criteria, offset);\n        }\n        else {\n            return [null, -1];\n        }\n    };\n    ContainerBlot.prototype.descendants = function (criteria, index, length) {\n        if (index === void 0) { index = 0; }\n        if (length === void 0) { length = Number.MAX_VALUE; }\n        var descendants = [];\n        var lengthLeft = length;\n        this.children.forEachAt(index, length, function (child, index, length) {\n            if ((criteria.blotName == null && criteria(child)) ||\n                (criteria.blotName != null && child instanceof criteria)) {\n                descendants.push(child);\n            }\n            if (child instanceof ContainerBlot) {\n                descendants = descendants.concat(child.descendants(criteria, index, lengthLeft));\n            }\n            lengthLeft -= length;\n        });\n        return descendants;\n    };\n    ContainerBlot.prototype.detach = function () {\n        this.children.forEach(function (child) {\n            child.detach();\n        });\n        _super.prototype.detach.call(this);\n    };\n    ContainerBlot.prototype.formatAt = function (index, length, name, value) {\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.formatAt(offset, length, name, value);\n        });\n    };\n    ContainerBlot.prototype.insertAt = function (index, value, def) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if (child) {\n            child.insertAt(offset, value, def);\n        }\n        else {\n            var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n            this.appendChild(blot);\n        }\n    };\n    ContainerBlot.prototype.insertBefore = function (childBlot, refBlot) {\n        if (this.statics.allowedChildren != null &&\n            !this.statics.allowedChildren.some(function (child) {\n                return childBlot instanceof child;\n            })) {\n            throw new Registry.ParchmentError(\"Cannot insert \" + childBlot.statics.blotName + \" into \" + this.statics.blotName);\n        }\n        childBlot.insertInto(this, refBlot);\n    };\n    ContainerBlot.prototype.length = function () {\n        return this.children.reduce(function (memo, child) {\n            return memo + child.length();\n        }, 0);\n    };\n    ContainerBlot.prototype.moveChildren = function (targetParent, refNode) {\n        this.children.forEach(function (child) {\n            targetParent.insertBefore(child, refNode);\n        });\n    };\n    ContainerBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        if (this.children.length === 0) {\n            if (this.statics.defaultChild != null) {\n                var child = Registry.create(this.statics.defaultChild);\n                this.appendChild(child);\n                child.optimize(context);\n            }\n            else {\n                this.remove();\n            }\n        }\n    };\n    ContainerBlot.prototype.path = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var _a = this.children.find(index, inclusive), child = _a[0], offset = _a[1];\n        var position = [[this, index]];\n        if (child instanceof ContainerBlot) {\n            return position.concat(child.path(offset, inclusive));\n        }\n        else if (child != null) {\n            position.push([child, offset]);\n        }\n        return position;\n    };\n    ContainerBlot.prototype.removeChild = function (child) {\n        this.children.remove(child);\n    };\n    ContainerBlot.prototype.replace = function (target) {\n        if (target instanceof ContainerBlot) {\n            target.moveChildren(this);\n        }\n        _super.prototype.replace.call(this, target);\n    };\n    ContainerBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = this.clone();\n        this.parent.insertBefore(after, this.next);\n        this.children.forEachAt(index, this.length(), function (child, offset, length) {\n            child = child.split(offset, force);\n            after.appendChild(child);\n        });\n        return after;\n    };\n    ContainerBlot.prototype.unwrap = function () {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n    };\n    ContainerBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        var addedNodes = [];\n        var removedNodes = [];\n        mutations.forEach(function (mutation) {\n            if (mutation.target === _this.domNode && mutation.type === 'childList') {\n                addedNodes.push.apply(addedNodes, mutation.addedNodes);\n                removedNodes.push.apply(removedNodes, mutation.removedNodes);\n            }\n        });\n        removedNodes.forEach(function (node) {\n            // Check node has actually been removed\n            // One exception is Chrome does not immediately remove IFRAMEs\n            // from DOM but MutationRecord is correct in its reported removal\n            if (node.parentNode != null &&\n                // @ts-ignore\n                node.tagName !== 'IFRAME' &&\n                document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n                return;\n            }\n            var blot = Registry.find(node);\n            if (blot == null)\n                return;\n            if (blot.domNode.parentNode == null || blot.domNode.parentNode === _this.domNode) {\n                blot.detach();\n            }\n        });\n        addedNodes\n            .filter(function (node) {\n            return node.parentNode == _this.domNode;\n        })\n            .sort(function (a, b) {\n            if (a === b)\n                return 0;\n            if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n                return 1;\n            }\n            return -1;\n        })\n            .forEach(function (node) {\n            var refBlot = null;\n            if (node.nextSibling != null) {\n                refBlot = Registry.find(node.nextSibling);\n            }\n            var blot = makeBlot(node);\n            if (blot.next != refBlot || blot.next == null) {\n                if (blot.parent != null) {\n                    blot.parent.removeChild(_this);\n                }\n                _this.insertBefore(blot, refBlot || undefined);\n            }\n        });\n    };\n    return ContainerBlot;\n}(shadow_1.default));\nfunction makeBlot(node) {\n    var blot = Registry.find(node);\n    if (blot == null) {\n        try {\n            blot = Registry.create(node);\n        }\n        catch (e) {\n            blot = Registry.create(Registry.Scope.INLINE);\n            [].slice.call(node.childNodes).forEach(function (child) {\n                // @ts-ignore\n                blot.domNode.appendChild(child);\n            });\n            if (node.parentNode) {\n                node.parentNode.replaceChild(blot.domNode, node);\n            }\n            blot.attach();\n        }\n    }\n    return blot;\n}\nexports.default = ContainerBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/container.ts\n// module id = 16\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"../../attributor/attributor\");\nvar store_1 = require(\"../../attributor/store\");\nvar container_1 = require(\"./container\");\nvar Registry = require(\"../../registry\");\nvar FormatBlot = /** @class */ (function (_super) {\n    __extends(FormatBlot, _super);\n    function FormatBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.attributes = new store_1.default(_this.domNode);\n        return _this;\n    }\n    FormatBlot.formats = function (domNode) {\n        if (typeof this.tagName === 'string') {\n            return true;\n        }\n        else if (Array.isArray(this.tagName)) {\n            return domNode.tagName.toLowerCase();\n        }\n        return undefined;\n    };\n    FormatBlot.prototype.format = function (name, value) {\n        var format = Registry.query(name);\n        if (format instanceof attributor_1.default) {\n            this.attributes.attribute(format, value);\n        }\n        else if (value) {\n            if (format != null && (name !== this.statics.blotName || this.formats()[name] !== value)) {\n                this.replaceWith(name, value);\n            }\n        }\n    };\n    FormatBlot.prototype.formats = function () {\n        var formats = this.attributes.values();\n        var format = this.statics.formats(this.domNode);\n        if (format != null) {\n            formats[this.statics.blotName] = format;\n        }\n        return formats;\n    };\n    FormatBlot.prototype.replaceWith = function (name, value) {\n        var replacement = _super.prototype.replaceWith.call(this, name, value);\n        this.attributes.copy(replacement);\n        return replacement;\n    };\n    FormatBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        _super.prototype.update.call(this, mutations, context);\n        if (mutations.some(function (mutation) {\n            return mutation.target === _this.domNode && mutation.type === 'attributes';\n        })) {\n            this.attributes.build();\n        }\n    };\n    FormatBlot.prototype.wrap = function (name, value) {\n        var wrapper = _super.prototype.wrap.call(this, name, value);\n        if (wrapper instanceof FormatBlot && wrapper.statics.scope === this.statics.scope) {\n            this.attributes.move(wrapper);\n        }\n        return wrapper;\n    };\n    return FormatBlot;\n}(container_1.default));\nexports.default = FormatBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/format.ts\n// module id = 17\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shadow_1 = require(\"./shadow\");\nvar Registry = require(\"../../registry\");\nvar LeafBlot = /** @class */ (function (_super) {\n    __extends(LeafBlot, _super);\n    function LeafBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LeafBlot.value = function (domNode) {\n        return true;\n    };\n    LeafBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node ||\n            this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return Math.min(offset, 1);\n        }\n        return -1;\n    };\n    LeafBlot.prototype.position = function (index, inclusive) {\n        var offset = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);\n        if (index > 0)\n            offset += 1;\n        return [this.parent.domNode, offset];\n    };\n    LeafBlot.prototype.value = function () {\n        return _a = {}, _a[this.statics.blotName] = this.statics.value(this.domNode) || true, _a;\n        var _a;\n    };\n    LeafBlot.scope = Registry.Scope.INLINE_BLOT;\n    return LeafBlot;\n}(shadow_1.default));\nexports.default = LeafBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/leaf.ts\n// module id = 18\n// module chunks = 0 1 2","var equal = require('deep-equal');\nvar extend = require('extend');\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\n\nmodule.exports = lib;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/quill-delta/lib/op.js\n// module id = 19\n// module chunks = 0 1 2","import Parchment from 'parchment';\n\n\nclass Break extends Parchment.Embed {\n  static value() {\n    return undefined;\n  }\n\n  insertInto(parent, ref) {\n    if (parent.children.length === 0) {\n      super.insertInto(parent, ref);\n    } else {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\n\nexport default Break;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/break.js","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/clone/clone.js\n// module id = 21\n// module chunks = 0 1 2","import Parchment from 'parchment';\nimport Emitter from '../core/emitter';\nimport Block, { BlockEmbed } from './block';\nimport Container from './container';\n\n\nfunction isLine(blot) {\n  return (blot instanceof Block || blot instanceof BlockEmbed);\n}\n\n\nclass Scroll extends Parchment.Scroll {\n  constructor(domNode, config) {\n    super(domNode);\n    this.emitter = config.emitter;\n    if (Array.isArray(config.whitelist)) {\n      this.whitelist = config.whitelist.reduce(function(whitelist, format) {\n        whitelist[format] = true;\n        return whitelist;\n      }, {});\n    }\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    this.domNode.addEventListener('DOMNodeInserted', function() {});\n    this.optimize();\n    this.enable();\n  }\n\n  batchStart() {\n    this.batch = true;\n  }\n\n  batchEnd() {\n    this.batch = false;\n    this.optimize();\n  }\n\n  deleteAt(index, length) {\n    let [first, offset] = this.line(index);\n    let [last, ] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      first.mergeInto(last);\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled);\n  }\n\n  formatAt(index, length, format, value) {\n    if (this.whitelist != null && !this.whitelist[format]) return;\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index, value, def) {\n    if (def != null && this.whitelist != null && !this.whitelist[value]) return;\n    if (index >= this.length()) {\n      if (def == null || Parchment.query(value, Parchment.Scope.BLOCK) == null) {\n        let blot = Parchment.create(this.statics.defaultChild);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          value = value.slice(0, -1);\n        }\n        blot.insertAt(0, value, def);\n      } else {\n        let embed = Parchment.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Parchment.Scope.INLINE_BLOT) {\n      let wrapper = Parchment.create(this.statics.defaultChild);\n      wrapper.appendChild(blot);\n      blot = wrapper;\n    }\n    super.insertBefore(blot, ref);\n  }\n\n  leaf(index) {\n    return this.path(index).pop() || [null, -1];\n  }\n\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE) {\n    let getLines = (blot, index, length) => {\n      let lines = [], lengthLeft = length;\n      blot.children.forEachAt(index, length, function(child, index, length) {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof Parchment.Container) {\n          lines = lines.concat(getLines(child, index, lengthLeft));\n        }\n        lengthLeft -= length;\n      });\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(mutations = [], context = {}) {\n    if (this.batch === true) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index) {\n    return super.path(index).slice(1);  // Exclude self\n  }\n\n  update(mutations) {\n    if (this.batch === true) return;\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([]));   // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n}\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = 'block';\nScroll.allowedChildren = [Block, BlockEmbed, Container];\n\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/scroll.js","import clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\nimport Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nlet debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\n\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    binding = normalize(binding);\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(function(key) {\n      return (!!binding[key] !== evt[key] && binding[key] !== null);\n    })) {\n      return false;\n    }\n    return binding.key === (evt.which || evt.keyCode);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    Object.keys(this.options.bindings).forEach((name) => {\n      if (name === 'list autofill' &&\n          quill.scroll.whitelist != null &&\n          !quill.scroll.whitelist['list']) {\n        return;\n      }\n      if (this.options.bindings[name]) {\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: Keyboard.keys.ENTER, shiftKey: null }, handleEnter);\n    this.addBinding({ key: Keyboard.keys.ENTER, metaKey: null, ctrlKey: null, altKey: null }, function() {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true }, handleBackspace);\n      this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true }, handleDelete);\n    } else {\n      this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true, prefix: /^.?$/ }, handleBackspace);\n      this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true, suffix: /^.?$/ }, handleDelete);\n    }\n    this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: false }, handleDeleteRange);\n    this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: false }, handleDeleteRange);\n    this.addBinding({ key: Keyboard.keys.BACKSPACE, altKey: null, ctrlKey: null, metaKey: null, shiftKey: null },\n                    { collapsed: true, offset: 0 },\n                    handleBackspace);\n    this.listen();\n  }\n\n  addBinding(key, context = {}, handler = {}) {\n    let binding = normalize(key);\n    if (binding == null || binding.key == null) {\n      return debug.warn('Attempted to add invalid keyboard binding', binding);\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler: handler };\n    }\n    binding = extend(binding, context, handler);\n    this.bindings[binding.key] = this.bindings[binding.key] || [];\n    this.bindings[binding.key].push(binding);\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented) return;\n      let which = evt.which || evt.keyCode;\n      let bindings = (this.bindings[which] || []).filter(function(binding) {\n        return Keyboard.match(evt, binding);\n      });\n      if (bindings.length === 0) return;\n      let range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      let [line, offset] = this.quill.getLine(range.index);\n      let [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      let [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      let prefixText = leafStart instanceof Parchment.Text ? leafStart.value().slice(0, offsetStart) : '';\n      let suffixText = leafEnd instanceof Parchment.Text ? leafEnd.value().slice(offsetEnd) : '';\n      let curContext = {\n        collapsed: range.length === 0,\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        offset: offset,\n        prefix: prefixText,\n        suffix: suffixText\n      };\n      let prevented = bindings.some((binding) => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) return false;\n        if (binding.empty != null && binding.empty !== curContext.empty) return false;\n        if (binding.offset != null && binding.offset !== curContext.offset) return false;\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(function(name) {\n            return curContext.format[name] == null;\n          })) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(function(name) {\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            return equal(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) return false;\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) return false;\n        return binding.handler.call(this, range, curContext) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n}\n\nKeyboard.keys = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  DELETE: 46\n};\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    'bold'      : makeFormatHandler('bold'),\n    'italic'    : makeFormatHandler('italic'),\n    'underline' : makeFormatHandler('underline'),\n    'indent': {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: Keyboard.keys.TAB,\n      format: ['blockquote', 'indent', 'list'],\n      handler: function(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n      }\n    },\n    'outdent': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler: function(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n      }\n    },\n    'outdent backspace': {\n      key: Keyboard.keys.BACKSPACE,\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler: function(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler: function(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      }\n    },\n    'tab': {\n      key: Keyboard.keys.TAB,\n      handler: function(range) {\n        this.quill.history.cutoff();\n        let delta = new Delta().retain(range.index)\n                               .delete(range.length)\n                               .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n      }\n    },\n    'list empty enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler: function(range, context) {\n        this.quill.format('list', false, Quill.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, Quill.sources.USER);\n        }\n      }\n    },\n    'checklist enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: { list: 'checked' },\n      handler: function(range) {\n        let [line, offset] = this.quill.getLine(range.index);\n        let formats = extend({}, line.formats(), { list: 'checked' });\n        let delta = new Delta().retain(range.index)\n                               .insert('\\n', formats)\n                               .retain(line.length() - offset - 1)\n                               .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'header enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler: function(range, context) {\n        let [line, offset] = this.quill.getLine(range.index);\n        let delta = new Delta().retain(range.index)\n                               .insert('\\n', context.format)\n                               .retain(line.length() - offset - 1)\n                               .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: { list: false },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler: function(range, context) {\n        let length = context.prefix.length;\n        let [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]': case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-': case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        let delta = new Delta().retain(range.index - offset)\n                               .delete(length + 1)\n                               .retain(line.length() - 2 - offset)\n                               .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n      }\n    },\n    'code exit': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /\\n\\n$/,\n      suffix: /^\\s+$/,\n      handler: function(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index + line.length() - offset - 2)\n          .retain(1, { 'code-block': null })\n          .delete(1);\n        this.quill.updateContents(delta, Quill.sources.USER);\n      }\n    },\n    'embed left': makeEmbedArrowHandler(Keyboard.keys.LEFT, false),\n    'embed left shift': makeEmbedArrowHandler(Keyboard.keys.LEFT, true),\n    'embed right': makeEmbedArrowHandler(Keyboard.keys.RIGHT, false),\n    'embed right shift': makeEmbedArrowHandler(Keyboard.keys.RIGHT, true)\n  }\n};\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === Keyboard.keys.LEFT ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler: function(range) {\n      let index = range.index;\n      if (key === Keyboard.keys.RIGHT) {\n        index += (range.length + 1);\n      }\n      const [leaf, ] = this.quill.getLeaf(index);\n      if (!(leaf instanceof Parchment.Embed)) return true;\n      if (key === Keyboard.keys.LEFT) {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else {\n        if (shiftKey) {\n          this.quill.setSelection(range.index, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index + range.length + 1, Quill.sources.USER);\n        }\n      }\n      return false;\n    }\n  };\n}\n\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n  let [line, ] = this.quill.getLine(range.index);\n  let formats = {};\n  if (context.offset === 0) {\n    let [prev, ] = this.quill.getLine(range.index - 1);\n    if (prev != null && prev.length() > 1) {\n      let curFormats = line.formats();\n      let prevFormats = this.quill.getFormat(range.index-1, 1);\n      formats = DeltaOp.attributes.diff(curFormats, prevFormats) || {};\n    }\n  }\n  // Check for astral symbols\n  let length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index-length, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index-length, length, formats, Quill.sources.USER);\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  let length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  let formats = {}, nextLength = 0;\n  let [line, ] = this.quill.getLine(range.index);\n  if (context.offset >= line.length() - 1) {\n    let [next, ] = this.quill.getLine(range.index + 1);\n    if (next) {\n      let curFormats = line.formats();\n      let nextFormats = this.quill.getFormat(range.index, 1);\n      formats = DeltaOp.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index + nextLength - 1, length, formats, Quill.sources.USER);\n  }\n}\n\nfunction handleDeleteRange(range) {\n  let lines = this.quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    let firstFormats = lines[0].formats();\n    let lastFormats = lines[lines.length - 1].formats();\n    formats = DeltaOp.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  this.quill.setSelection(range.index, Quill.sources.SILENT);\n  this.quill.focus();\n}\n\nfunction handleEnter(range, context) {\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length);  // So we do not trigger text-change\n  }\n  let lineFormats = Object.keys(context.format).reduce(function(lineFormats, format) {\n    if (Parchment.query(format, Parchment.Scope.BLOCK) && !Array.isArray(context.format[format])) {\n      lineFormats[format] = context.format[format];\n    }\n    return lineFormats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, Quill.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach((name) => {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    this.quill.format(name, context.format[name], Quill.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: Keyboard.keys.TAB,\n    shiftKey: !indent,\n    format: {'code-block': true },\n    handler: function(range) {\n      let CodeBlock = Parchment.query('code-block');\n      let index = range.index, length = range.length;\n      let [block, offset] = this.quill.scroll.descendant(CodeBlock, index);\n      if (block == null) return;\n      let scrollIndex = this.quill.getIndex(block);\n      let start = block.newlineIndex(offset, true) + 1;\n      let end = block.newlineIndex(scrollIndex + offset + length);\n      let lines = block.domNode.textContent.slice(start, end).split('\\n');\n      offset = 0;\n      lines.forEach((line, i) => {\n        if (indent) {\n          block.insertAt(start + offset, CodeBlock.TAB);\n          offset += CodeBlock.TAB.length;\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.startsWith(CodeBlock.TAB)) {\n          block.deleteAt(start + offset, CodeBlock.TAB.length);\n          offset -= CodeBlock.TAB.length;\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n        offset += line.length + 1;\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    }\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0].toUpperCase(),\n    shortKey: true,\n    handler: function(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    }\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    return normalize({ key: binding });\n  }\n  if (typeof binding === 'object') {\n    binding = clone(binding, false);\n  }\n  if (typeof binding.key === 'string') {\n    if (Keyboard.keys[binding.key.toUpperCase()] != null) {\n      binding.key = Keyboard.keys[binding.key.toUpperCase()];\n    } else if (binding.key.length === 1) {\n      binding.key = binding.key.toUpperCase().charCodeAt(0);\n    } else {\n      return null;\n    }\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n\nexport { Keyboard as default, SHORTKEY };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/keyboard.js","import Parchment from 'parchment';\nimport TextBlot from './text';\n\n\nclass Cursor extends Parchment.Embed {\n  static value() {\n    return undefined;\n  }\n\n  constructor(domNode, selection) {\n    super(domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this._length = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name, value) {\n    if (this._length !== 0) {\n      return super.format(name, value);\n    }\n    let target = this, index = 0;\n    while (target != null && target.statics.scope !== Parchment.Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this._length = Cursor.CONTENTS.length;\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this._length = 0;\n    }\n  }\n\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this._length;\n  }\n\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    this.parent = null;\n  }\n\n  restore() {\n    if (this.selection.composing || this.parent == null) return;\n    let textNode = this.textNode;\n    let range = this.selection.getNativeRange();\n    let restoreText, start, end;\n    if (range != null && range.start.node === textNode && range.end.node === textNode) {\n      [restoreText, start, end] = [textNode, range.start.offset, range.end.offset];\n    }\n    // Link format will insert text outside of anchor tag\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n    if (this.textNode.data !== Cursor.CONTENTS) {\n      let text = this.textNode.data.split(Cursor.CONTENTS).join('');\n      if (this.next instanceof TextBlot) {\n        restoreText = this.next.domNode;\n        this.next.insertAt(0, text);\n        this.textNode.data = Cursor.CONTENTS;\n      } else {\n        this.textNode.data = text;\n        this.parent.insertBefore(Parchment.create(this.textNode), this);\n        this.textNode = document.createTextNode(Cursor.CONTENTS);\n        this.domNode.appendChild(this.textNode);\n      }\n    }\n    this.remove();\n    if (start != null) {\n      [start, end] = [start, end].map(function(offset) {\n        return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n      });\n      return {\n        startNode: restoreText,\n        startOffset: start,\n        endNode: restoreText,\n        endOffset: end\n      };\n    }\n  }\n\n  update(mutations, context) {\n    if (mutations.some((mutation) => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      let range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = \"\\uFEFF\";   // Zero width no break space\n\n\nexport default Cursor;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/cursor.js","import Parchment from 'parchment';\nimport Block, { BlockEmbed } from './block';\n\n\nclass Container extends Parchment.Container { }\nContainer.allowedChildren = [Block, BlockEmbed, Container];\n\n\nexport default Container;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/container.js","import Parchment from 'parchment';\n\nclass ColorAttributor extends Parchment.Attributor.Style {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    return '#' + value.split(',').map(function(component) {\n      return ('00' + parseInt(component).toString(16)).slice(-2);\n    }).join('');\n  }\n}\n\nlet ColorClass = new Parchment.Attributor.Class('color', 'ql-color', {\n  scope: Parchment.Scope.INLINE\n});\nlet ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Parchment.Scope.INLINE\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/color.js","import Inline from '../blots/inline';\n\n\nclass Link extends Inline {\n  static create(value) {\n    let node = super.create(value);\n    value = this.sanitize(value);\n    node.setAttribute('href', value);\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) return super.format(name, value);\n    value = this.constructor.sanitize(value);\n    this.domNode.setAttribute('href', value);\n  }\n}\nLink.blotName = 'link';\nLink.tagName = 'A';\nLink.SANITIZED_URL = 'about:blank';\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\n\n\nfunction sanitize(url, protocols) {\n  let anchor = document.createElement('a');\n  anchor.href = url;\n  let protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\n\nexport { Link as default, sanitize };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/link.js","import Keyboard from '../modules/keyboard';\nimport DropdownIcon from '../assets/icons/dropdown.svg';\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, !(element.getAttribute(attribute) === 'true'));\n}\n\nclass Picker {\n  constructor(select) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', (event) => {\n      switch(event.keyCode) {\n        // Allows the \"Enter\" key to open the picker\n        case Keyboard.keys.ENTER:\n          this.togglePicker();\n          break;\n\n        // Allows the \"Escape\" key to close the picker\n        case Keyboard.keys.ESCAPE:\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option) {\n    let item = document.createElement('span');\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n\n    item.classList.add('ql-picker-item');\n    if (option.hasAttribute('value')) {\n      item.setAttribute('data-value', option.getAttribute('value'));\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', (event) => {\n      switch(event.keyCode) {\n        // Allows the \"Enter\" key to select an item\n        case Keyboard.keys.ENTER:\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n\n        // Allows the \"Escape\" key to close the picker\n        case Keyboard.keys.ESCAPE:\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n\n    return item;\n  }\n\n  buildLabel() {\n    let label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    let options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    this.options = options;\n\n    [].slice.call(this.select.options).forEach((option) => {\n      let item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    [].slice.call(this.select.attributes).forEach((item) => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item, trigger = false) {\n    let selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    this.select.selectedIndex = [].indexOf.call(item.parentNode.children, item);\n    if (item.hasAttribute('data-value')) {\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      if (typeof Event === 'function') {\n        this.select.dispatchEvent(new Event('change'));\n      } else if (typeof Event === 'object') {     // IE11\n        let event = document.createEvent('Event');\n        event.initEvent('change', true, true);\n        this.select.dispatchEvent(event);\n      }\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      let item = this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n      option = this.select.options[this.select.selectedIndex];\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    let isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\n\n\nexport default Picker;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/picker.js","import Parchment from 'parchment';\nimport Quill from './core/quill';\n\nimport Block, { BlockEmbed } from './blots/block';\nimport Break from './blots/break';\nimport Container from './blots/container';\nimport Cursor from './blots/cursor';\nimport Embed from './blots/embed';\nimport Inline from './blots/inline';\nimport Scroll from './blots/scroll';\nimport TextBlot from './blots/text';\n\nimport Clipboard from './modules/clipboard';\nimport History from './modules/history';\nimport Keyboard from './modules/keyboard';\n\nQuill.register({\n  'blots/block'        : Block,\n  'blots/block/embed'  : BlockEmbed,\n  'blots/break'        : Break,\n  'blots/container'    : Container,\n  'blots/cursor'       : Cursor,\n  'blots/embed'        : Embed,\n  'blots/inline'       : Inline,\n  'blots/scroll'       : Scroll,\n  'blots/text'         : TextBlot,\n\n  'modules/clipboard'  : Clipboard,\n  'modules/history'    : History,\n  'modules/keyboard'   : Keyboard\n});\n\nParchment.register(Block, Break, Cursor, Inline, Scroll, TextBlot);\n\n\nexport default Quill;\n\n\n\n// WEBPACK FOOTER //\n// ./core.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = require(\"../../registry\");\nvar ShadowBlot = /** @class */ (function () {\n    function ShadowBlot(domNode) {\n        this.domNode = domNode;\n        // @ts-ignore\n        this.domNode[Registry.DATA_KEY] = { blot: this };\n    }\n    Object.defineProperty(ShadowBlot.prototype, \"statics\", {\n        // Hack for accessing inherited static methods\n        get: function () {\n            return this.constructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShadowBlot.create = function (value) {\n        if (this.tagName == null) {\n            throw new Registry.ParchmentError('Blot definition missing tagName');\n        }\n        var node;\n        if (Array.isArray(this.tagName)) {\n            if (typeof value === 'string') {\n                value = value.toUpperCase();\n                if (parseInt(value).toString() === value) {\n                    value = parseInt(value);\n                }\n            }\n            if (typeof value === 'number') {\n                node = document.createElement(this.tagName[value - 1]);\n            }\n            else if (this.tagName.indexOf(value) > -1) {\n                node = document.createElement(value);\n            }\n            else {\n                node = document.createElement(this.tagName[0]);\n            }\n        }\n        else {\n            node = document.createElement(this.tagName);\n        }\n        if (this.className) {\n            node.classList.add(this.className);\n        }\n        return node;\n    };\n    ShadowBlot.prototype.attach = function () {\n        if (this.parent != null) {\n            this.scroll = this.parent.scroll;\n        }\n    };\n    ShadowBlot.prototype.clone = function () {\n        var domNode = this.domNode.cloneNode(false);\n        return Registry.create(domNode);\n    };\n    ShadowBlot.prototype.detach = function () {\n        if (this.parent != null)\n            this.parent.removeChild(this);\n        // @ts-ignore\n        delete this.domNode[Registry.DATA_KEY];\n    };\n    ShadowBlot.prototype.deleteAt = function (index, length) {\n        var blot = this.isolate(index, length);\n        blot.remove();\n    };\n    ShadowBlot.prototype.formatAt = function (index, length, name, value) {\n        var blot = this.isolate(index, length);\n        if (Registry.query(name, Registry.Scope.BLOT) != null && value) {\n            blot.wrap(name, value);\n        }\n        else if (Registry.query(name, Registry.Scope.ATTRIBUTE) != null) {\n            var parent = Registry.create(this.statics.scope);\n            blot.wrap(parent);\n            parent.format(name, value);\n        }\n    };\n    ShadowBlot.prototype.insertAt = function (index, value, def) {\n        var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n        var ref = this.split(index);\n        this.parent.insertBefore(blot, ref);\n    };\n    ShadowBlot.prototype.insertInto = function (parentBlot, refBlot) {\n        if (refBlot === void 0) { refBlot = null; }\n        if (this.parent != null) {\n            this.parent.children.remove(this);\n        }\n        var refDomNode = null;\n        parentBlot.children.insertBefore(this, refBlot);\n        if (refBlot != null) {\n            refDomNode = refBlot.domNode;\n        }\n        if (this.domNode.parentNode != parentBlot.domNode ||\n            this.domNode.nextSibling != refDomNode) {\n            parentBlot.domNode.insertBefore(this.domNode, refDomNode);\n        }\n        this.parent = parentBlot;\n        this.attach();\n    };\n    ShadowBlot.prototype.isolate = function (index, length) {\n        var target = this.split(index);\n        target.split(length);\n        return target;\n    };\n    ShadowBlot.prototype.length = function () {\n        return 1;\n    };\n    ShadowBlot.prototype.offset = function (root) {\n        if (root === void 0) { root = this.parent; }\n        if (this.parent == null || this == root)\n            return 0;\n        return this.parent.children.offset(this) + this.parent.offset(root);\n    };\n    ShadowBlot.prototype.optimize = function (context) {\n        // TODO clean up once we use WeakMap\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY] != null) {\n            // @ts-ignore\n            delete this.domNode[Registry.DATA_KEY].mutations;\n        }\n    };\n    ShadowBlot.prototype.remove = function () {\n        if (this.domNode.parentNode != null) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        this.detach();\n    };\n    ShadowBlot.prototype.replace = function (target) {\n        if (target.parent == null)\n            return;\n        target.parent.insertBefore(this, target.next);\n        target.remove();\n    };\n    ShadowBlot.prototype.replaceWith = function (name, value) {\n        var replacement = typeof name === 'string' ? Registry.create(name, value) : name;\n        replacement.replace(this);\n        return replacement;\n    };\n    ShadowBlot.prototype.split = function (index, force) {\n        return index === 0 ? this : this.next;\n    };\n    ShadowBlot.prototype.update = function (mutations, context) {\n        // Nothing to do by default\n    };\n    ShadowBlot.prototype.wrap = function (name, value) {\n        var wrapper = typeof name === 'string' ? Registry.create(name, value) : name;\n        if (this.parent != null) {\n            this.parent.insertBefore(wrapper, this.next);\n        }\n        wrapper.appendChild(this);\n        return wrapper;\n    };\n    ShadowBlot.blotName = 'abstract';\n    return ShadowBlot;\n}());\nexports.default = ShadowBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/shadow.ts\n// module id = 30\n// module chunks = 0 1 2","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nvar class_1 = require(\"./class\");\nvar style_1 = require(\"./style\");\nvar Registry = require(\"../registry\");\nvar AttributorStore = /** @class */ (function () {\n    function AttributorStore(domNode) {\n        this.attributes = {};\n        this.domNode = domNode;\n        this.build();\n    }\n    AttributorStore.prototype.attribute = function (attribute, value) {\n        // verb\n        if (value) {\n            if (attribute.add(this.domNode, value)) {\n                if (attribute.value(this.domNode) != null) {\n                    this.attributes[attribute.attrName] = attribute;\n                }\n                else {\n                    delete this.attributes[attribute.attrName];\n                }\n            }\n        }\n        else {\n            attribute.remove(this.domNode);\n            delete this.attributes[attribute.attrName];\n        }\n    };\n    AttributorStore.prototype.build = function () {\n        var _this = this;\n        this.attributes = {};\n        var attributes = attributor_1.default.keys(this.domNode);\n        var classes = class_1.default.keys(this.domNode);\n        var styles = style_1.default.keys(this.domNode);\n        attributes\n            .concat(classes)\n            .concat(styles)\n            .forEach(function (name) {\n            var attr = Registry.query(name, Registry.Scope.ATTRIBUTE);\n            if (attr instanceof attributor_1.default) {\n                _this.attributes[attr.attrName] = attr;\n            }\n        });\n    };\n    AttributorStore.prototype.copy = function (target) {\n        var _this = this;\n        Object.keys(this.attributes).forEach(function (key) {\n            var value = _this.attributes[key].value(_this.domNode);\n            target.format(key, value);\n        });\n    };\n    AttributorStore.prototype.move = function (target) {\n        var _this = this;\n        this.copy(target);\n        Object.keys(this.attributes).forEach(function (key) {\n            _this.attributes[key].remove(_this.domNode);\n        });\n        this.attributes = {};\n    };\n    AttributorStore.prototype.values = function () {\n        var _this = this;\n        return Object.keys(this.attributes).reduce(function (attributes, name) {\n            attributes[name] = _this.attributes[name].value(_this.domNode);\n            return attributes;\n        }, {});\n    };\n    return AttributorStore;\n}());\nexports.default = AttributorStore;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/store.ts\n// module id = 31\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nfunction match(node, prefix) {\n    var className = node.getAttribute('class') || '';\n    return className.split(/\\s+/).filter(function (name) {\n        return name.indexOf(prefix + \"-\") === 0;\n    });\n}\nvar ClassAttributor = /** @class */ (function (_super) {\n    __extends(ClassAttributor, _super);\n    function ClassAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ClassAttributor.keys = function (node) {\n        return (node.getAttribute('class') || '').split(/\\s+/).map(function (name) {\n            return name\n                .split('-')\n                .slice(0, -1)\n                .join('-');\n        });\n    };\n    ClassAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        this.remove(node);\n        node.classList.add(this.keyName + \"-\" + value);\n        return true;\n    };\n    ClassAttributor.prototype.remove = function (node) {\n        var matches = match(node, this.keyName);\n        matches.forEach(function (name) {\n            node.classList.remove(name);\n        });\n        if (node.classList.length === 0) {\n            node.removeAttribute('class');\n        }\n    };\n    ClassAttributor.prototype.value = function (node) {\n        var result = match(node, this.keyName)[0] || '';\n        var value = result.slice(this.keyName.length + 1); // +1 for hyphen\n        return this.canAdd(node, value) ? value : '';\n    };\n    return ClassAttributor;\n}(attributor_1.default));\nexports.default = ClassAttributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/class.ts\n// module id = 32\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nfunction camelize(name) {\n    var parts = name.split('-');\n    var rest = parts\n        .slice(1)\n        .map(function (part) {\n        return part[0].toUpperCase() + part.slice(1);\n    })\n        .join('');\n    return parts[0] + rest;\n}\nvar StyleAttributor = /** @class */ (function (_super) {\n    __extends(StyleAttributor, _super);\n    function StyleAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StyleAttributor.keys = function (node) {\n        return (node.getAttribute('style') || '').split(';').map(function (value) {\n            var arr = value.split(':');\n            return arr[0].trim();\n        });\n    };\n    StyleAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = value;\n        return true;\n    };\n    StyleAttributor.prototype.remove = function (node) {\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = '';\n        if (!node.getAttribute('style')) {\n            node.removeAttribute('style');\n        }\n    };\n    StyleAttributor.prototype.value = function (node) {\n        // @ts-ignore\n        var value = node.style[camelize(this.keyName)];\n        return this.canAdd(node, value) ? value : '';\n    };\n    return StyleAttributor;\n}(attributor_1.default));\nexports.default = StyleAttributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/style.ts\n// module id = 33\n// module chunks = 0 1 2","class Theme {\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name) {\n    let moduleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new moduleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n}\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  'default': Theme\n};\n\n\nexport default Theme;\n\n\n\n// WEBPACK FOOTER //\n// ./core/theme.js","import Parchment from 'parchment';\nimport TextBlot from './text';\n\nconst GUARD_TEXT = \"\\uFEFF\";\n\n\nclass Embed extends Parchment.Embed {\n  constructor(node) {\n    super(node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', false);\n    [].slice.call(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node) {\n    let range, textNode;\n    let text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        let prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(Parchment.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        }\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(Parchment.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations, context) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'characterData' &&\n          (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        let range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\n\nexport default Embed;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/embed.js","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\n\nlet AlignAttribute = new Parchment.Attributor.Attribute('align', 'align', config);\nlet AlignClass = new Parchment.Attributor.Class('align', 'ql-align', config);\nlet AlignStyle = new Parchment.Attributor.Style('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/align.js","import Parchment from 'parchment';\nimport { ColorAttributor } from './color';\n\nlet BackgroundClass = new Parchment.Attributor.Class('background', 'ql-bg', {\n  scope: Parchment.Scope.INLINE\n});\nlet BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Parchment.Scope.INLINE\n});\n\nexport { BackgroundClass, BackgroundStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/background.js","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['rtl']\n};\n\nlet DirectionAttribute = new Parchment.Attributor.Attribute('direction', 'dir', config);\nlet DirectionClass = new Parchment.Attributor.Class('direction', 'ql-direction', config);\nlet DirectionStyle = new Parchment.Attributor.Style('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/direction.js","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\n\nlet FontClass = new Parchment.Attributor.Class('font', 'ql-font', config);\n\nclass FontStyleAttributor extends Parchment.Attributor.Style {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nlet FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/font.js","import Parchment from 'parchment';\n\nlet SizeClass = new Parchment.Attributor.Class('size', 'ql-size', {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nlet SizeStyle = new Parchment.Attributor.Style('size', 'font-size', {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\nexport { SizeClass, SizeStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/size.js","module.exports = {\n  'align': {\n    ''        : require('../assets/icons/align-left.svg'),\n    'center'  : require('../assets/icons/align-center.svg'),\n    'right'   : require('../assets/icons/align-right.svg'),\n    'justify' : require('../assets/icons/align-justify.svg')\n  },\n  'background': require('../assets/icons/background.svg'),\n  'blockquote': require('../assets/icons/blockquote.svg'),\n  'bold'      : require('../assets/icons/bold.svg'),\n  'clean'     : require('../assets/icons/clean.svg'),\n  'code'      : require('../assets/icons/code.svg'),\n  'code-block': require('../assets/icons/code.svg'),\n  'color'     : require('../assets/icons/color.svg'),\n  'direction' : {\n    ''        : require('../assets/icons/direction-ltr.svg'),\n    'rtl'     : require('../assets/icons/direction-rtl.svg')\n  },\n  'float': {\n    'center'  : require('../assets/icons/float-center.svg'),\n    'full'    : require('../assets/icons/float-full.svg'),\n    'left'    : require('../assets/icons/float-left.svg'),\n    'right'   : require('../assets/icons/float-right.svg')\n  },\n  'formula'   : require('../assets/icons/formula.svg'),\n  'header': {\n    '1'       : require('../assets/icons/header.svg'),\n    '2'       : require('../assets/icons/header-2.svg')\n  },\n  'italic'    : require('../assets/icons/italic.svg'),\n  'image'     : require('../assets/icons/image.svg'),\n  'indent': {\n    '+1'      : require('../assets/icons/indent.svg'),\n    '-1'      : require('../assets/icons/outdent.svg')\n  },\n  'link'      : require('../assets/icons/link.svg'),\n  'list': {\n    'ordered' : require('../assets/icons/list-ordered.svg'),\n    'bullet'  : require('../assets/icons/list-bullet.svg'),\n    'check'   : require('../assets/icons/list-check.svg')\n  },\n  'script': {\n    'sub'     : require('../assets/icons/subscript.svg'),\n    'super'   : require('../assets/icons/superscript.svg'),\n  },\n  'strike'    : require('../assets/icons/strike.svg'),\n  'underline' : require('../assets/icons/underline.svg'),\n  'video'     : require('../assets/icons/video.svg')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./ui/icons.js","import Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\n\n\nclass History extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.lastRecorded = 0;\n    this.ignoreChange = false;\n    this.clear();\n    this.quill.on(Quill.events.EDITOR_CHANGE, (eventName, delta, oldDelta, source) => {\n      if (eventName !== Quill.events.TEXT_CHANGE || this.ignoreChange) return;\n      if (!this.options.userOnly || source === Quill.sources.USER) {\n        this.record(delta, oldDelta);\n      } else {\n        this.transform(delta);\n      }\n    });\n    this.quill.keyboard.addBinding({ key: 'Z', shortKey: true }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({ key: 'Z', shortKey: true, shiftKey: true }, this.redo.bind(this));\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({ key: 'Y', shortKey: true }, this.redo.bind(this));\n    }\n  }\n\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    let delta = this.stack[source].pop();\n    this.stack[dest].push(delta);\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(delta[source], Quill.sources.USER);\n    this.ignoreChange = false;\n    let index = getLastChangeIndex(delta[source]);\n    this.quill.setSelection(index);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = this.quill.getContents().diff(oldDelta);\n    let timestamp = Date.now();\n    if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      let delta = this.stack.undo.pop();\n      undoDelta = undoDelta.compose(delta.undo);\n      changeDelta = delta.redo.compose(changeDelta);\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    this.stack.undo.push({\n      redo: changeDelta,\n      undo: undoDelta\n    });\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta) {\n    this.stack.undo.forEach(function(change) {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n    this.stack.redo.forEach(function(change) {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n}\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction endsWithNewlineChange(delta) {\n  let lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(function(attr) {\n      return Parchment.query(attr, Parchment.Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(delta) {\n  let deleteLength = delta.reduce(function(length, op) {\n    length += (op.delete || 0);\n    return length;\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\n\nexport { History as default, getLastChangeIndex };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/history.js","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Emitter from '../core/emitter';\nimport Keyboard from '../modules/keyboard';\nimport Theme from '../core/theme';\nimport ColorPicker from '../ui/color-picker';\nimport IconPicker from '../ui/icon-picker';\nimport Picker from '../ui/picker';\nimport Tooltip from '../ui/tooltip';\n\n\nconst ALIGNS = [ false, 'center', 'right', 'justify' ];\n\nconst COLORS = [\n  \"#000000\", \"#e60000\", \"#ff9900\", \"#ffff00\", \"#008a00\", \"#0066cc\", \"#9933ff\",\n  \"#ffffff\", \"#facccc\", \"#ffebcc\", \"#ffffcc\", \"#cce8cc\", \"#cce0f5\", \"#ebd6ff\",\n  \"#bbbbbb\", \"#f06666\", \"#ffc266\", \"#ffff66\", \"#66b966\", \"#66a3e0\", \"#c285ff\",\n  \"#888888\", \"#a10000\", \"#b26b00\", \"#b2b200\", \"#006100\", \"#0047b2\", \"#6b24b2\",\n  \"#444444\", \"#5c0000\", \"#663d00\", \"#666600\", \"#003700\", \"#002966\", \"#3d1466\"\n];\n\nconst FONTS = [ false, 'serif', 'monospace' ];\n\nconst HEADERS = [ '1', '2', '3', false ];\n\nconst SIZES = [ 'small', false, 'large', 'huge' ];\n\n\nclass BaseTheme extends Theme {\n  constructor(quill, options) {\n    super(quill, options);\n    let listener = (e) => {\n      if (!document.body.contains(quill.root)) {\n        return document.body.removeEventListener('click', listener);\n      }\n      if (this.tooltip != null && !this.tooltip.root.contains(e.target) &&\n          document.activeElement !== this.tooltip.textbox && !this.quill.hasFocus()) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach(function(picker) {\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name) {\n    let module = super.addModule(name);\n    if (name === 'toolbar') {\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n\n  buildButtons(buttons, icons) {\n    buttons.forEach((button) => {\n      let className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach((name) => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          button.innerHTML = icons[name][''] + icons[name]['rtl'];\n        } else if (typeof icons[name] === 'string') {\n          button.innerHTML = icons[name];\n        } else {\n          let value = button.value || '';\n          if (value != null && icons[name][value]) {\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(selects, icons) {\n    this.pickers = selects.map((select) => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        return new IconPicker(select, icons.align);\n      } else if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n        let format = select.classList.contains('ql-background') ? 'background' : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n        }\n        return new ColorPicker(select, icons[format]);\n      } else {\n        if (select.querySelector('option') == null) {\n          if (select.classList.contains('ql-font')) {\n            fillSelect(select, FONTS);\n          } else if (select.classList.contains('ql-header')) {\n            fillSelect(select, HEADERS);\n          } else if (select.classList.contains('ql-size')) {\n            fillSelect(select, SIZES);\n          }\n        }\n        return new Picker(select);\n      }\n    });\n    let update = () => {\n      this.pickers.forEach(function(picker) {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = extend(true, {}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula: function() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image: function() {\n          let fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', 'image/png, image/gif, image/jpeg, image/bmp, image/x-icon');\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              if (fileInput.files != null && fileInput.files[0] != null) {\n                let reader = new FileReader();\n                reader.onload = (e) => {\n                  let range = this.quill.getSelection(true);\n                  this.quill.updateContents(new Delta()\n                    .retain(range.index)\n                    .delete(range.length)\n                    .insert({ image: e.target.result })\n                  , Emitter.sources.USER);\n                  this.quill.setSelection(range.index + 1, Emitter.sources.SILENT);\n                  fileInput.value = \"\";\n                }\n                reader.readAsDataURL(fileInput.files[0]);\n              }\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video: function() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\n\n\nclass BaseTooltip extends Tooltip {\n  constructor(quill, boundsContainer) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    this.textbox.addEventListener('keydown', (event) => {\n      if (Keyboard.match(event, 'enter')) {\n        this.save();\n        event.preventDefault();\n      } else if (Keyboard.match(event, 'escape')) {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n  }\n\n  edit(mode = 'link', preview = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    this.position(this.quill.getBounds(this.quill.selection.savedRange));\n    this.textbox.select();\n    this.textbox.setAttribute('placeholder', this.textbox.getAttribute(`data-${mode}`) || '');\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    let scrollTop = this.quill.scrollingContainer.scrollTop;\n    this.quill.focus();\n    this.quill.scrollingContainer.scrollTop = scrollTop;\n  }\n\n  save() {\n    let value = this.textbox.value;\n    switch(this.root.getAttribute('data-mode')) {\n      case 'link': {\n        let scrollTop = this.quill.root.scrollTop;\n        if (this.linkRange) {\n          this.quill.formatText(this.linkRange, 'link', value, Emitter.sources.USER);\n          delete this.linkRange;\n        } else {\n          this.restoreFocus();\n          this.quill.format('link', value, Emitter.sources.USER);\n        }\n        this.quill.root.scrollTop = scrollTop;\n        break;\n      }\n      case 'video': {\n        value = extractVideoUrl(value);\n      } // eslint-disable-next-line no-fallthrough\n      case 'formula': {\n        if (!value) break;\n        let range = this.quill.getSelection(true);\n        if (range != null) {\n          let index = range.index + range.length;\n          this.quill.insertEmbed(index, this.root.getAttribute('data-mode'), value, Emitter.sources.USER);\n          if (this.root.getAttribute('data-mode') === 'formula') {\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n          }\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\n        }\n        break;\n      }\n      default:\n    }\n    this.textbox.value = '';\n    this.hide();\n  }\n}\n\n\nfunction extractVideoUrl(url) {\n  let match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) ||\n              url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return (match[1] || 'https') + '://www.youtube.com/embed/' + match[2] + '?showinfo=0';\n  }\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {  // eslint-disable-line no-cond-assign\n    return (match[1] || 'https') + '://player.vimeo.com/video/' + match[2] + '/';\n  }\n  return url;\n}\n\nfunction fillSelect(select, values, defaultValue = false) {\n  values.forEach(function(value) {\n    let option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', value);\n    }\n    select.appendChild(option);\n  });\n}\n\n\nexport { BaseTooltip, BaseTheme as default };\n\n\n\n// WEBPACK FOOTER //\n// ./themes/base.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList = /** @class */ (function () {\n    function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n    LinkedList.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        this.insertBefore(nodes[0], null);\n        if (nodes.length > 1) {\n            this.append.apply(this, nodes.slice(1));\n        }\n    };\n    LinkedList.prototype.contains = function (node) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            if (cur === node)\n                return true;\n        }\n        return false;\n    };\n    LinkedList.prototype.insertBefore = function (node, refNode) {\n        if (!node)\n            return;\n        node.next = refNode;\n        if (refNode != null) {\n            node.prev = refNode.prev;\n            if (refNode.prev != null) {\n                refNode.prev.next = node;\n            }\n            refNode.prev = node;\n            if (refNode === this.head) {\n                this.head = node;\n            }\n        }\n        else if (this.tail != null) {\n            this.tail.next = node;\n            node.prev = this.tail;\n            this.tail = node;\n        }\n        else {\n            node.prev = null;\n            this.head = this.tail = node;\n        }\n        this.length += 1;\n    };\n    LinkedList.prototype.offset = function (target) {\n        var index = 0, cur = this.head;\n        while (cur != null) {\n            if (cur === target)\n                return index;\n            index += cur.length();\n            cur = cur.next;\n        }\n        return -1;\n    };\n    LinkedList.prototype.remove = function (node) {\n        if (!this.contains(node))\n            return;\n        if (node.prev != null)\n            node.prev.next = node.next;\n        if (node.next != null)\n            node.next.prev = node.prev;\n        if (node === this.head)\n            this.head = node.next;\n        if (node === this.tail)\n            this.tail = node.prev;\n        this.length -= 1;\n    };\n    LinkedList.prototype.iterator = function (curNode) {\n        if (curNode === void 0) { curNode = this.head; }\n        // TODO use yield when we can\n        return function () {\n            var ret = curNode;\n            if (curNode != null)\n                curNode = curNode.next;\n            return ret;\n        };\n    };\n    LinkedList.prototype.find = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            var length = cur.length();\n            if (index < length ||\n                (inclusive && index === length && (cur.next == null || cur.next.length() !== 0))) {\n                return [cur, index];\n            }\n            index -= length;\n        }\n        return [null, 0];\n    };\n    LinkedList.prototype.forEach = function (callback) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            callback(cur);\n        }\n    };\n    LinkedList.prototype.forEachAt = function (index, length, callback) {\n        if (length <= 0)\n            return;\n        var _a = this.find(index), startNode = _a[0], offset = _a[1];\n        var cur, curIndex = index - offset, next = this.iterator(startNode);\n        while ((cur = next()) && curIndex < index + length) {\n            var curLength = cur.length();\n            if (index > curIndex) {\n                callback(cur, index - curIndex, Math.min(length, curIndex + curLength - index));\n            }\n            else {\n                callback(cur, 0, Math.min(curLength, index + length - curIndex));\n            }\n            curIndex += curLength;\n        }\n    };\n    LinkedList.prototype.map = function (callback) {\n        return this.reduce(function (memo, cur) {\n            memo.push(callback(cur));\n            return memo;\n        }, []);\n    };\n    LinkedList.prototype.reduce = function (callback, memo) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            memo = callback(memo, cur);\n        }\n        return memo;\n    };\n    return LinkedList;\n}());\nexports.default = LinkedList;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/collection/linked-list.ts\n// module id = 44\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./abstract/container\");\nvar Registry = require(\"../registry\");\nvar OBSERVER_CONFIG = {\n    attributes: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true,\n};\nvar MAX_OPTIMIZE_ITERATIONS = 100;\nvar ScrollBlot = /** @class */ (function (_super) {\n    __extends(ScrollBlot, _super);\n    function ScrollBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.scroll = _this;\n        _this.observer = new MutationObserver(function (mutations) {\n            _this.update(mutations);\n        });\n        _this.observer.observe(_this.domNode, OBSERVER_CONFIG);\n        _this.attach();\n        return _this;\n    }\n    ScrollBlot.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.observer.disconnect();\n    };\n    ScrollBlot.prototype.deleteAt = function (index, length) {\n        this.update();\n        if (index === 0 && length === this.length()) {\n            this.children.forEach(function (child) {\n                child.remove();\n            });\n        }\n        else {\n            _super.prototype.deleteAt.call(this, index, length);\n        }\n    };\n    ScrollBlot.prototype.formatAt = function (index, length, name, value) {\n        this.update();\n        _super.prototype.formatAt.call(this, index, length, name, value);\n    };\n    ScrollBlot.prototype.insertAt = function (index, value, def) {\n        this.update();\n        _super.prototype.insertAt.call(this, index, value, def);\n    };\n    ScrollBlot.prototype.optimize = function (mutations, context) {\n        var _this = this;\n        if (mutations === void 0) { mutations = []; }\n        if (context === void 0) { context = {}; }\n        _super.prototype.optimize.call(this, context);\n        // We must modify mutations directly, cannot make copy and then modify\n        var records = [].slice.call(this.observer.takeRecords());\n        // Array.push currently seems to be implemented by a non-tail recursive function\n        // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n        while (records.length > 0)\n            mutations.push(records.pop());\n        // TODO use WeakMap\n        var mark = function (blot, markParent) {\n            if (markParent === void 0) { markParent = true; }\n            if (blot == null || blot === _this)\n                return;\n            if (blot.domNode.parentNode == null)\n                return;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [];\n            }\n            if (markParent)\n                mark(blot.parent);\n        };\n        var optimize = function (blot) {\n            // Post-order traversal\n            if (\n            // @ts-ignore\n            blot.domNode[Registry.DATA_KEY] == null ||\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations == null) {\n                return;\n            }\n            if (blot instanceof container_1.default) {\n                blot.children.forEach(optimize);\n            }\n            blot.optimize(context);\n        };\n        var remaining = mutations;\n        for (var i = 0; remaining.length > 0; i += 1) {\n            if (i >= MAX_OPTIMIZE_ITERATIONS) {\n                throw new Error('[Parchment] Maximum optimize iterations reached');\n            }\n            remaining.forEach(function (mutation) {\n                var blot = Registry.find(mutation.target, true);\n                if (blot == null)\n                    return;\n                if (blot.domNode === mutation.target) {\n                    if (mutation.type === 'childList') {\n                        mark(Registry.find(mutation.previousSibling, false));\n                        [].forEach.call(mutation.addedNodes, function (node) {\n                            var child = Registry.find(node, false);\n                            mark(child, false);\n                            if (child instanceof container_1.default) {\n                                child.children.forEach(function (grandChild) {\n                                    mark(grandChild, false);\n                                });\n                            }\n                        });\n                    }\n                    else if (mutation.type === 'attributes') {\n                        mark(blot.prev);\n                    }\n                }\n                mark(blot);\n            });\n            this.children.forEach(optimize);\n            remaining = [].slice.call(this.observer.takeRecords());\n            records = remaining.slice();\n            while (records.length > 0)\n                mutations.push(records.pop());\n        }\n    };\n    ScrollBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        mutations = mutations || this.observer.takeRecords();\n        // TODO use WeakMap\n        mutations\n            .map(function (mutation) {\n            var blot = Registry.find(mutation.target, true);\n            if (blot == null)\n                return null;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [mutation];\n                return blot;\n            }\n            else {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations.push(mutation);\n                return null;\n            }\n        })\n            .forEach(function (blot) {\n            if (blot == null ||\n                blot === _this ||\n                //@ts-ignore\n                blot.domNode[Registry.DATA_KEY] == null)\n                return;\n            // @ts-ignore\n            blot.update(blot.domNode[Registry.DATA_KEY].mutations || [], context);\n        });\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY].mutations != null) {\n            // @ts-ignore\n            _super.prototype.update.call(this, this.domNode[Registry.DATA_KEY].mutations, context);\n        }\n        this.optimize(mutations, context);\n    };\n    ScrollBlot.blotName = 'scroll';\n    ScrollBlot.defaultChild = 'block';\n    ScrollBlot.scope = Registry.Scope.BLOCK_BLOT;\n    ScrollBlot.tagName = 'DIV';\n    return ScrollBlot;\n}(container_1.default));\nexports.default = ScrollBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/scroll.ts\n// module id = 45\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"./abstract/format\");\nvar Registry = require(\"../registry\");\n// Shallow object comparison\nfunction isEqual(obj1, obj2) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length)\n        return false;\n    // @ts-ignore\n    for (var prop in obj1) {\n        // @ts-ignore\n        if (obj1[prop] !== obj2[prop])\n            return false;\n    }\n    return true;\n}\nvar InlineBlot = /** @class */ (function (_super) {\n    __extends(InlineBlot, _super);\n    function InlineBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InlineBlot.formats = function (domNode) {\n        if (domNode.tagName === InlineBlot.tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    InlineBlot.prototype.format = function (name, value) {\n        var _this = this;\n        if (name === this.statics.blotName && !value) {\n            this.children.forEach(function (child) {\n                if (!(child instanceof format_1.default)) {\n                    child = child.wrap(InlineBlot.blotName, true);\n                }\n                _this.attributes.copy(child);\n            });\n            this.unwrap();\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    InlineBlot.prototype.formatAt = function (index, length, name, value) {\n        if (this.formats()[name] != null || Registry.query(name, Registry.Scope.ATTRIBUTE)) {\n            var blot = this.isolate(index, length);\n            blot.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    InlineBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        var formats = this.formats();\n        if (Object.keys(formats).length === 0) {\n            return this.unwrap(); // unformatted span\n        }\n        var next = this.next;\n        if (next instanceof InlineBlot && next.prev === this && isEqual(formats, next.formats())) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    };\n    InlineBlot.blotName = 'inline';\n    InlineBlot.scope = Registry.Scope.INLINE_BLOT;\n    InlineBlot.tagName = 'SPAN';\n    return InlineBlot;\n}(format_1.default));\nexports.default = InlineBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/inline.ts\n// module id = 46\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"./abstract/format\");\nvar Registry = require(\"../registry\");\nvar BlockBlot = /** @class */ (function (_super) {\n    __extends(BlockBlot, _super);\n    function BlockBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BlockBlot.formats = function (domNode) {\n        var tagName = Registry.query(BlockBlot.blotName).tagName;\n        if (domNode.tagName === tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    BlockBlot.prototype.format = function (name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) == null) {\n            return;\n        }\n        else if (name === this.statics.blotName && !value) {\n            this.replaceWith(BlockBlot.blotName);\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    BlockBlot.prototype.formatAt = function (index, length, name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) != null) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    BlockBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null || Registry.query(value, Registry.Scope.INLINE) != null) {\n            // Insert text or inline\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n        else {\n            var after = this.split(index);\n            var blot = Registry.create(value, def);\n            after.parent.insertBefore(blot, after);\n        }\n    };\n    BlockBlot.prototype.update = function (mutations, context) {\n        if (navigator.userAgent.match(/Trident/)) {\n            this.build();\n        }\n        else {\n            _super.prototype.update.call(this, mutations, context);\n        }\n    };\n    BlockBlot.blotName = 'block';\n    BlockBlot.scope = Registry.Scope.BLOCK_BLOT;\n    BlockBlot.tagName = 'P';\n    return BlockBlot;\n}(format_1.default));\nexports.default = BlockBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/block.ts\n// module id = 47\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = require(\"./abstract/leaf\");\nvar EmbedBlot = /** @class */ (function (_super) {\n    __extends(EmbedBlot, _super);\n    function EmbedBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmbedBlot.formats = function (domNode) {\n        return undefined;\n    };\n    EmbedBlot.prototype.format = function (name, value) {\n        // super.formatAt wraps, which is what we want in general,\n        // but this allows subclasses to overwrite for formats\n        // that just apply to particular embeds\n        _super.prototype.formatAt.call(this, 0, this.length(), name, value);\n    };\n    EmbedBlot.prototype.formatAt = function (index, length, name, value) {\n        if (index === 0 && length === this.length()) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    EmbedBlot.prototype.formats = function () {\n        return this.statics.formats(this.domNode);\n    };\n    return EmbedBlot;\n}(leaf_1.default));\nexports.default = EmbedBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/embed.ts\n// module id = 48\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = require(\"./abstract/leaf\");\nvar Registry = require(\"../registry\");\nvar TextBlot = /** @class */ (function (_super) {\n    __extends(TextBlot, _super);\n    function TextBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.text = _this.statics.value(_this.domNode);\n        return _this;\n    }\n    TextBlot.create = function (value) {\n        return document.createTextNode(value);\n    };\n    TextBlot.value = function (domNode) {\n        var text = domNode.data;\n        // @ts-ignore\n        if (text['normalize'])\n            text = text['normalize']();\n        return text;\n    };\n    TextBlot.prototype.deleteAt = function (index, length) {\n        this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n    };\n    TextBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node) {\n            return offset;\n        }\n        return -1;\n    };\n    TextBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null) {\n            this.text = this.text.slice(0, index) + value + this.text.slice(index);\n            this.domNode.data = this.text;\n        }\n        else {\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n    };\n    TextBlot.prototype.length = function () {\n        return this.text.length;\n    };\n    TextBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        this.text = this.statics.value(this.domNode);\n        if (this.text.length === 0) {\n            this.remove();\n        }\n        else if (this.next instanceof TextBlot && this.next.prev === this) {\n            this.insertAt(this.length(), this.next.value());\n            this.next.remove();\n        }\n    };\n    TextBlot.prototype.position = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        return [this.domNode, index];\n    };\n    TextBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = Registry.create(this.domNode.splitText(index));\n        this.parent.insertBefore(after, this.next);\n        this.text = this.statics.value(this.domNode);\n        return after;\n    };\n    TextBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (mutations.some(function (mutation) {\n            return mutation.type === 'characterData' && mutation.target === _this.domNode;\n        })) {\n            this.text = this.statics.value(this.domNode);\n        }\n    };\n    TextBlot.prototype.value = function () {\n        return this.text;\n    };\n    TextBlot.blotName = 'text';\n    TextBlot.scope = Registry.Scope.INLINE_BLOT;\n    return TextBlot;\n}(leaf_1.default));\nexports.default = TextBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/text.ts\n// module id = 49\n// module chunks = 0 1 2","let elem = document.createElement('div');\nelem.classList.toggle('test-class', false);\nif (elem.classList.contains('test-class')) {\n  let _toggle = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function(token, force) {\n    if (arguments.length > 1 && !this.contains(token) === !force) {\n      return force;\n    } else {\n      return _toggle.call(this, token);\n    }\n  };\n}\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function(searchString, position){\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function(searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, \"find\", {\n    value: function(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var list = Object(this);\n      var length = list.length >>> 0;\n      var thisArg = arguments[1];\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  // Disable resizing in Firefox\n  document.execCommand(\"enableObjectResizing\", false, false);\n  // Disable automatic linkifying in IE11\n  document.execCommand(\"autoUrlDetect\", false, false);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./core/polyfill.js","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '🐶', '\\uD83D\\uDC2F' === '🐯'\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fast-diff/diff.js\n// module id = 51\n// module chunks = 0 1 2","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-equal/lib/keys.js\n// module id = 52\n// module chunks = 0 1 2","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-equal/lib/is_arguments.js\n// module id = 53\n// module chunks = 0 1 2","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/eventemitter3/index.js\n// module id = 54\n// module chunks = 0 1 2","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nimport { AlignAttribute, AlignStyle } from '../formats/align';\nimport { BackgroundStyle } from '../formats/background';\nimport CodeBlock from '../formats/code';\nimport { ColorStyle } from '../formats/color';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction';\nimport { FontStyle } from '../formats/font';\nimport { SizeStyle } from '../formats/size';\n\nlet debug = logger('quill:clipboard');\n\n\nconst DOM_KEY = '__ql-matcher';\n\nconst CLIPBOARD_CONFIG = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchSpacing],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['b', matchAlias.bind(matchAlias, 'bold')],\n  ['i', matchAlias.bind(matchAlias, 'italic')],\n  ['style', matchIgnore]\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [\n  AlignAttribute,\n  DirectionAttribute\n].reduce(function(memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle\n].reduce(function(memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\n\nclass Clipboard extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('paste', this.onPaste.bind(this));\n    this.container = this.quill.addContainer('ql-clipboard');\n    this.container.setAttribute('contenteditable', true);\n    this.container.setAttribute('tabindex', -1);\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(([selector, matcher]) => {\n      if (!options.matchVisual && matcher === matchSpacing) return;\n      this.addMatcher(selector, matcher);\n    });\n  }\n\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(html) {\n    if (typeof html === 'string') {\n      this.container.innerHTML = html.replace(/\\>\\r?\\n +\\</g, '><'); // Remove spaces between tags\n      return this.convert();\n    }\n    const formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n    if (formats[CodeBlock.blotName]) {\n      const text = this.container.innerText;\n      this.container.innerHTML = '';\n      return new Delta().insert(text, { [CodeBlock.blotName]: formats[CodeBlock.blotName] });\n    }\n    let [elementMatchers, textMatchers] = this.prepareMatching();\n    let delta = traverse(this.container, elementMatchers, textMatchers);\n    // Remove trailing newline\n    if (deltaEndsWith(delta, '\\n') && delta.ops[delta.ops.length - 1].attributes == null) {\n      delta = delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    debug.log('convert', this.container.innerHTML, delta);\n    this.container.innerHTML = '';\n    return delta;\n  }\n\n  dangerouslyPasteHTML(index, html, source = Quill.sources.API) {\n    if (typeof index === 'string') {\n      this.quill.setContents(this.convert(index), html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      let paste = this.convert(html);\n      this.quill.updateContents(new Delta().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onPaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    let range = this.quill.getSelection();\n    let delta = new Delta().retain(range.index);\n    let scrollTop = this.quill.scrollingContainer.scrollTop;\n    this.container.focus();\n    this.quill.selection.update(Quill.sources.SILENT);\n    setTimeout(() => {\n      delta = delta.concat(this.convert()).delete(range.length);\n      this.quill.updateContents(delta, Quill.sources.USER);\n      // range.length contributes to delta.length()\n      this.quill.setSelection(delta.length() - range.length, Quill.sources.SILENT);\n      this.quill.scrollingContainer.scrollTop = scrollTop;\n      this.quill.focus();\n    }, 1);\n  }\n\n  prepareMatching() {\n    let elementMatchers = [], textMatchers = [];\n    this.matchers.forEach((pair) => {\n      let [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          [].forEach.call(this.container.querySelectorAll(selector), (node) => {\n            // TODO use weakmap\n            node[DOM_KEY] = node[DOM_KEY] || [];\n            node[DOM_KEY].push(matcher);\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nClipboard.DEFAULTS = {\n  matchers: [],\n  matchVisual: true\n};\n\n\nfunction applyFormat(delta, format, value) {\n  if (typeof format === 'object') {\n    return Object.keys(format).reduce(function(delta, key) {\n      return applyFormat(delta, key, format[key]);\n    }, delta);\n  } else {\n    return delta.reduce(function(delta, op) {\n      if (op.attributes && op.attributes[format]) {\n        return delta.push(op);\n      } else {\n        return delta.insert(op.insert, extend({}, {[format]: value}, op.attributes));\n      }\n    }, new Delta());\n  }\n}\n\nfunction computeStyle(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) return {};\n  const DOM_KEY = '__ql-computed-style';\n  return node[DOM_KEY] || (node[DOM_KEY] = window.getComputedStyle(node));\n}\n\nfunction deltaEndsWith(delta, text) {\n  let endText = \"\";\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i) {\n    let op  = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1*text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false;   // Exclude embed blocks\n  let style = computeStyle(node);\n  return ['block', 'list-item'].indexOf(style.display) > -1;\n}\n\nfunction traverse(node, elementMatchers, textMatchers) {  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce(function(delta, matcher) {\n      return matcher(node, delta);\n    }, new Delta());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return [].reduce.call(node.childNodes || [], (delta, childNode) => {\n      let childrenDelta = traverse(childNode, elementMatchers, textMatchers);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce(function(childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n        childrenDelta = (childNode[DOM_KEY] || []).reduce(function(childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  } else {\n    return new Delta();\n  }\n}\n\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta) {\n  let attributes = Parchment.Attributor.Attribute.keys(node);\n  let classes = Parchment.Attributor.Class.keys(node);\n  let styles = Parchment.Attributor.Style.keys(node);\n  let formats = {};\n  attributes.concat(classes).concat(styles).forEach((name) => {\n    let attr = Parchment.query(name, Parchment.Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name]\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta) {\n  let match = Parchment.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof Parchment.Embed) {\n    let embed = {};\n    let value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      delta = new Delta().insert(embed, match.formats(node));\n    }\n  } else if (typeof match.formats === 'function') {\n    delta = applyFormat(delta, match.blotName, match.formats(node));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node, delta) {\n  let match = Parchment.query(node);\n  if (match == null || match.blotName !== 'list-item' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  let indent = -1, parent = node.parentNode;\n  while (!parent.classList.contains('ql-clipboard')) {\n    if ((Parchment.query(parent) || {}).blotName === 'list') {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(new Delta().retain(delta.length() - 1).retain(1, { indent: indent}));\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node) || (delta.length() > 0 && node.nextSibling && isLine(node.nextSibling))) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchSpacing(node, delta) {\n  if (isLine(node) && node.nextElementSibling != null && !deltaEndsWith(delta, '\\n\\n')) {\n    let nodeHeight = node.offsetHeight + parseFloat(computeStyle(node).marginTop) + parseFloat(computeStyle(node).marginBottom);\n    if (node.nextElementSibling.offsetTop > node.offsetTop + nodeHeight*1.5) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  let formats = {};\n  let style = node.style || {};\n  if (style.fontStyle && computeStyle(node).fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.fontWeight && (computeStyle(node).fontWeight.startsWith('bold') ||\n                           parseInt(computeStyle(node).fontWeight) >= 700)) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {  // Could be 0.5in\n    delta = new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchText(node, delta) {\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode.classList.contains('ql-clipboard')) {\n    return delta;\n  }\n  if (!computeStyle(node.parentNode).whiteSpace.startsWith('pre')) {\n    // eslint-disable-next-line func-style\n    let replacer = function(collapse, match) {\n      match = match.replace(/[^\\u00a0]/g, '');    // \\u00a0 is nbsp;\n      return match.length < 1 && collapse ? ' ' : match;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true));  // collapse whitespace\n    if ((node.previousSibling == null && isLine(node.parentNode)) ||\n        (node.previousSibling != null && isLine(node.previousSibling))) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if ((node.nextSibling == null && isLine(node.parentNode)) ||\n        (node.nextSibling != null && isLine(node.nextSibling))) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\n\nexport { Clipboard as default, matchAttributor, matchBlot, matchNewline, matchSpacing, matchText };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/clipboard.js","import Inline from '../blots/inline';\n\nclass Bold extends Inline {\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n\nexport default Bold;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/bold.js","import Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nlet debug = logger('quill:toolbar');\n\n\nclass Toolbar extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      let container = document.createElement('div');\n      addControls(container, this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      return debug.error('Container required for toolbar', this.options);\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    Object.keys(this.options.handlers).forEach((format) => {\n      this.addHandler(format, this.options.handlers[format]);\n    });\n    [].forEach.call(this.container.querySelectorAll('button, select'), (input) => {\n      this.attach(input);\n    });\n    this.quill.on(Quill.events.EDITOR_CHANGE, (type, range) => {\n      if (type === Quill.events.SELECTION_CHANGE) {\n        this.update(range);\n      }\n    });\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      let [range, ] = this.quill.selection.getRange();  // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input) {\n    let format = [].find.call(input.classList, (className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (this.handlers[format] == null) {\n      if (this.quill.scroll.whitelist != null && this.quill.scroll.whitelist[format] == null) {\n        debug.warn('ignoring attaching to disabled format', format, input);\n        return;\n      }\n      if (Parchment.query(format) == null) {\n        debug.warn('ignoring attaching to nonexistent format', format, input);\n        return;\n      }\n    }\n    let eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        if (input.selectedIndex < 0) return;\n        let selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      let [range, ] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (Parchment.query(format).prototype instanceof Parchment.Embed) {\n        value = prompt(`Enter ${format}`);\n        if (!value) return;\n        this.quill.updateContents(new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert({ [format]: value })\n        , Quill.sources.USER);\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    // TODO use weakmap\n    this.controls.push([format, input]);\n  }\n\n  update(range) {\n    let formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(function(pair) {\n      let [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\\\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          input.value = '';   // TODO make configurable?\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else {\n        if (range == null) {\n          input.classList.remove('ql-active');\n        } else if (input.hasAttribute('value')) {\n          // both being null should match (default values)\n          // '1' should match with 1 (headers)\n          let isActive = formats[format] === input.getAttribute('value') ||\n                         (formats[format] != null && formats[format].toString() === input.getAttribute('value')) ||\n                         (formats[format] == null && !input.getAttribute('value'));\n          input.classList.toggle('ql-active', isActive);\n        } else {\n          input.classList.toggle('ql-active', formats[format] != null);\n        }\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\n\nfunction addButton(container, format, value) {\n  let input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add('ql-' + format);\n  if (value != null) {\n    input.value = value;\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n  groups.forEach(function(controls) {\n    let group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(function(control) {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        let format = Object.keys(control)[0];\n        let value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  let input = document.createElement('select');\n  input.classList.add('ql-' + format);\n  values.forEach(function(value) {\n    let option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean: function() {\n      let range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length == 0) {\n        let formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (Parchment.query(name, Parchment.Scope.INLINE) != null) {\n            this.quill.format(name, false);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, Quill.sources.USER);\n      }\n    },\n    direction: function(value) {\n      let align = this.quill.getFormat()['align'];\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent: function(value) {\n      let range = this.quill.getSelection();\n      let formats = this.quill.getFormat(range);\n      let indent = parseInt(formats.indent || 0);\n      if (value === '+1' || value === '-1') {\n        let modifier = (value === '+1') ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link: function(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:');\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list: function(value) {\n      let range = this.quill.getSelection();\n      let formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats['list'] === 'checked' || formats['list'] === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    }\n  }\n}\n\n\nexport { Toolbar as default, addControls };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/toolbar.js","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"></polyline> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/code.svg\n// module id = 58\n// module chunks = 0 1","import Picker from './picker';\n\n\nclass ColorPicker extends Picker {\n  constructor(select, label) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    [].slice.call(this.container.querySelectorAll('.ql-picker-item'), 0, 7).forEach(function(item) {\n      item.classList.add('ql-primary');\n    });\n  }\n\n  buildItem(option) {\n    let item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    let colorLabel = this.label.querySelector('.ql-color-label');\n    let value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\n\n\nexport default ColorPicker;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/color-picker.js","import Picker from './picker';\n\n\nclass IconPicker extends Picker {\n  constructor(select, icons) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    [].forEach.call(this.container.querySelectorAll('.ql-picker-item'), (item) => {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    item = item || this.defaultItem;\n    this.label.innerHTML = item.innerHTML;\n  }\n}\n\n\nexport default IconPicker;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/icon-picker.js","class Tooltip {\n  constructor(quill, boundsContainer) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (this.quill.root === this.quill.scrollingContainer) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = (-1*this.quill.root.scrollTop) + 'px';\n      });\n    }\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n\n  position(reference) {\n    let left = reference.left + reference.width/2 - this.root.offsetWidth/2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    let top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = left + 'px';\n    this.root.style.top = top + 'px';\n    this.root.classList.remove('ql-flip');\n    let containerBounds = this.boundsContainer.getBoundingClientRect();\n    let rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = (left + shift) + 'px';\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = (left + shift) + 'px';\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      let height = rootBounds.bottom - rootBounds.top;\n      let verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = (top - verticalShift) + 'px';\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\n\n\nexport default Tooltip;\n\n\n\n// WEBPACK FOOTER //\n// ./ui/tooltip.js","import extend from 'extend';\nimport Emitter from '../core/emitter';\nimport BaseTheme, { BaseTooltip } from './base';\nimport LinkBlot from '../formats/link';\nimport { Range } from '../core/selection';\nimport icons from '../ui/icons';\n\n\nconst TOOLBAR_CONFIG = [\n  [{ header: ['1', '2', '3', false] }],\n  ['bold', 'italic', 'underline', 'link'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['clean']\n];\n\nclass SnowTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar) {\n    toolbar.container.classList.add('ql-snow');\n    this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), icons);\n    this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), icons);\n    this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n    if (toolbar.container.querySelector('.ql-link')) {\n      this.quill.keyboard.addBinding({ key: 'K', shortKey: true }, function(range, context) {\n        toolbar.handlers['link'].call(toolbar, !context.format.link);\n      });\n    }\n  }\n}\nSnowTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function(value) {\n          if (value) {\n            let range = this.quill.getSelection();\n            if (range == null || range.length == 0) return;\n            let preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = 'mailto:' + preview;\n            }\n            let tooltip = this.quill.theme.tooltip;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        }\n      }\n    }\n  }\n});\n\n\nclass SnowTooltip extends BaseTooltip {\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.preview = this.root.querySelector('a.ql-preview');\n  }\n\n  listen() {\n    super.listen();\n    this.root.querySelector('a.ql-action').addEventListener('click', (event) => {\n      if (this.root.classList.contains('ql-editing')) {\n        this.save();\n      } else {\n        this.edit('link', this.preview.textContent);\n      }\n      event.preventDefault();\n    });\n    this.root.querySelector('a.ql-remove').addEventListener('click', (event) => {\n      if (this.linkRange != null) {\n        let range = this.linkRange;\n        this.restoreFocus();\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n        delete this.linkRange;\n      }\n      event.preventDefault();\n      this.hide();\n    });\n    this.quill.on(Emitter.events.SELECTION_CHANGE, (range, oldRange, source) => {\n      if (range == null) return;\n      if (range.length === 0 && source === Emitter.sources.USER) {\n        let [link, offset] = this.quill.scroll.descendant(LinkBlot, range.index);\n        if (link != null) {\n          this.linkRange = new Range(range.index - offset, link.length());\n          let preview = LinkBlot.formats(link.domNode);\n          this.preview.textContent = preview;\n          this.preview.setAttribute('href', preview);\n          this.show();\n          this.position(this.quill.getBounds(this.linkRange));\n          return;\n        }\n      } else {\n        delete this.linkRange;\n      }\n      this.hide();\n    });\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\nSnowTooltip.TEMPLATE = [\n  '<a class=\"ql-preview\" target=\"_blank\" href=\"about:blank\"></a>',\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n  '<a class=\"ql-action\"></a>',\n  '<a class=\"ql-remove\"></a>'\n].join('');\n\n\nexport default SnowTheme;\n\n\n\n// WEBPACK FOOTER //\n// ./themes/snow.js","import Quill from './core';\n\nimport { AlignClass, AlignStyle } from './formats/align';\nimport { DirectionAttribute, DirectionClass, DirectionStyle } from './formats/direction';\nimport { IndentClass as Indent } from './formats/indent';\n\nimport Blockquote from './formats/blockquote';\nimport Header from './formats/header';\nimport List, { ListItem } from './formats/list';\n\nimport { BackgroundClass, BackgroundStyle } from './formats/background';\nimport { ColorClass, ColorStyle } from './formats/color';\nimport { FontClass, FontStyle } from './formats/font';\nimport { SizeClass, SizeStyle } from './formats/size';\n\nimport Bold from './formats/bold';\nimport Italic from './formats/italic';\nimport Link from './formats/link';\nimport Script from './formats/script';\nimport Strike from './formats/strike';\nimport Underline from './formats/underline';\n\nimport Image from './formats/image';\nimport Video from './formats/video';\n\nimport CodeBlock, { Code as InlineCode } from './formats/code';\n\nimport Formula from './modules/formula';\nimport Syntax from './modules/syntax';\nimport Toolbar from './modules/toolbar';\n\nimport Icons from './ui/icons';\nimport Picker from './ui/picker';\nimport ColorPicker from './ui/color-picker';\nimport IconPicker from './ui/icon-picker';\nimport Tooltip from './ui/tooltip';\n\nimport BubbleTheme from './themes/bubble';\nimport SnowTheme from './themes/snow';\n\n\nQuill.register({\n  'attributors/attribute/direction': DirectionAttribute,\n\n  'attributors/class/align': AlignClass,\n  'attributors/class/background': BackgroundClass,\n  'attributors/class/color': ColorClass,\n  'attributors/class/direction': DirectionClass,\n  'attributors/class/font': FontClass,\n  'attributors/class/size': SizeClass,\n\n  'attributors/style/align': AlignStyle,\n  'attributors/style/background': BackgroundStyle,\n  'attributors/style/color': ColorStyle,\n  'attributors/style/direction': DirectionStyle,\n  'attributors/style/font': FontStyle,\n  'attributors/style/size': SizeStyle\n}, true);\n\n\nQuill.register({\n  'formats/align': AlignClass,\n  'formats/direction': DirectionClass,\n  'formats/indent': Indent,\n\n  'formats/background': BackgroundStyle,\n  'formats/color': ColorStyle,\n  'formats/font': FontClass,\n  'formats/size': SizeClass,\n\n  'formats/blockquote': Blockquote,\n  'formats/code-block': CodeBlock,\n  'formats/header': Header,\n  'formats/list': List,\n\n  'formats/bold': Bold,\n  'formats/code': InlineCode,\n  'formats/italic': Italic,\n  'formats/link': Link,\n  'formats/script': Script,\n  'formats/strike': Strike,\n  'formats/underline': Underline,\n\n  'formats/image': Image,\n  'formats/video': Video,\n\n  'formats/list/item': ListItem,\n\n  'modules/formula': Formula,\n  'modules/syntax': Syntax,\n  'modules/toolbar': Toolbar,\n\n  'themes/bubble': BubbleTheme,\n  'themes/snow': SnowTheme,\n\n  'ui/icons': Icons,\n  'ui/picker': Picker,\n  'ui/icon-picker': IconPicker,\n  'ui/color-picker': ColorPicker,\n  'ui/tooltip': Tooltip\n}, true);\n\n\nexport default Quill;\n\n\n\n// WEBPACK FOOTER //\n// ./quill.js","import Parchment from 'parchment';\n\nclass IdentAttributor extends Parchment.Attributor.Class {\n  add(node, value) {\n    if (value === '+1' || value === '-1') {\n      let indent = this.value(node) || 0;\n      value = (value === '+1' ? (indent + 1) : (indent - 1));\n    }\n    if (value === 0) {\n      this.remove(node);\n      return true;\n    } else {\n      return super.add(node, value);\n    }\n  }\n\n  canAdd(node, value) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value));\n  }\n\n  value(node) {\n    return parseInt(super.value(node)) || undefined;  // Don't return NaN\n  }\n}\n\nlet IndentClass = new IdentAttributor('indent', 'ql-indent', {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\n\nexport { IndentClass };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/indent.js","import Block from '../blots/block';\n\n\nclass Blockquote extends Block {}\nBlockquote.blotName = 'blockquote';\nBlockquote.tagName = 'blockquote';\n\n\nexport default Blockquote;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/blockquote.js","import Block from '../blots/block';\n\n\nclass Header extends Block {\n  static formats(domNode) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\nHeader.blotName = 'header';\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n\nexport default Header;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/header.js","import Parchment from 'parchment';\nimport Block from '../blots/block';\nimport Container from '../blots/container';\n\n\nclass ListItem extends Block {\n  static formats(domNode) {\n    return domNode.tagName === this.tagName ? undefined : super.formats(domNode);\n  }\n\n  format(name, value) {\n    if (name === List.blotName && !value) {\n      this.replaceWith(Parchment.create(this.statics.scope));\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  remove() {\n    if (this.prev == null && this.next == null) {\n      this.parent.remove();\n    } else {\n      super.remove();\n    }\n  }\n\n  replaceWith(name, value) {\n    this.parent.isolate(this.offset(this.parent), this.length());\n    if (name === this.parent.statics.blotName) {\n      this.parent.replaceWith(name, value);\n      return this;\n    } else {\n      this.parent.unwrap();\n      return super.replaceWith(name, value);\n    }\n  }\n}\nListItem.blotName = 'list-item';\nListItem.tagName = 'LI';\n\n\nclass List extends Container {\n  static create(value) {\n    let tagName = value === 'ordered' ? 'OL' : 'UL';\n    let node = super.create(tagName);\n    if (value === 'checked' || value === 'unchecked') {\n      node.setAttribute('data-checked', value === 'checked');\n    }\n    return node;\n  }\n\n  static formats(domNode) {\n    if (domNode.tagName === 'OL') return 'ordered';\n    if (domNode.tagName === 'UL') {\n      if (domNode.hasAttribute('data-checked')) {\n        return domNode.getAttribute('data-checked') === 'true' ? 'checked' : 'unchecked';\n      } else {\n        return 'bullet';\n      }\n    }\n    return undefined;\n  }\n\n  constructor(domNode) {\n    super(domNode);\n    const listEventHandler = (e) => {\n      if (e.target.parentNode !== domNode) return;\n      let format = this.statics.formats(domNode);\n      let blot = Parchment.find(e.target);\n      if (format === 'checked') {\n        blot.format('list', 'unchecked');\n      } else if(format === 'unchecked') {\n        blot.format('list', 'checked');\n      }\n    }\n\n    domNode.addEventListener('touchstart', listEventHandler);\n    domNode.addEventListener('mousedown', listEventHandler);\n  }\n\n  format(name, value) {\n    if (this.children.length > 0) {\n      this.children.tail.format(name, value);\n    }\n  }\n\n  formats() {\n    // We don't inherit from FormatBlot\n    return { [this.statics.blotName]: this.statics.formats(this.domNode) };\n  }\n\n  insertBefore(blot, ref) {\n    if (blot instanceof ListItem) {\n      super.insertBefore(blot, ref);\n    } else {\n      let index = ref == null ? this.length() : ref.offset(this);\n      let after = this.split(index);\n      after.parent.insertBefore(blot, after);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    let next = this.next;\n    if (next != null && next.prev === this &&\n        next.statics.blotName === this.statics.blotName &&\n        next.domNode.tagName === this.domNode.tagName &&\n        next.domNode.getAttribute('data-checked') === this.domNode.getAttribute('data-checked')) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  replace(target) {\n    if (target.statics.blotName !== this.statics.blotName) {\n      let item = Parchment.create(this.statics.defaultChild);\n      target.moveChildren(item);\n      this.appendChild(item);\n    }\n    super.replace(target);\n  }\n}\nList.blotName = 'list';\nList.scope = Parchment.Scope.BLOCK_BLOT;\nList.tagName = ['OL', 'UL'];\nList.defaultChild = 'list-item';\nList.allowedChildren = [ListItem];\n\n\nexport { ListItem, List as default };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/list.js","import Bold from './bold';\n\nclass Italic extends Bold { }\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n\nexport default Italic;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/italic.js","import Inline from '../blots/inline';\n\nclass Script extends Inline {\n  static create(value) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    } else if (value === 'sub') {\n      return document.createElement('sub');\n    } else {\n      return super.create(value);\n    }\n  }\n\n  static formats(domNode) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\nScript.blotName = 'script';\nScript.tagName = ['SUB', 'SUP'];\n\nexport default Script;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/script.js","import Inline from '../blots/inline';\n\nclass Strike extends Inline { }\nStrike.blotName = 'strike';\nStrike.tagName = 'S';\n\nexport default Strike;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/strike.js","import Inline from '../blots/inline';\n\nclass Underline extends Inline { }\nUnderline.blotName = 'underline';\nUnderline.tagName = 'U';\n\nexport default Underline;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/underline.js","import Parchment from 'parchment';\nimport { sanitize } from '../formats/link';\n\nconst ATTRIBUTES = [\n  'alt',\n  'height',\n  'width'\n];\n\n\nclass Image extends Parchment.Embed {\n  static create(value) {\n    let node = super.create(value);\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode) {\n    return ATTRIBUTES.reduce(function(formats, attribute) {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n\n  static match(url) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static sanitize(url) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nImage.blotName = 'image';\nImage.tagName = 'IMG';\n\n\nexport default Image;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/image.js","import { BlockEmbed } from '../blots/block';\nimport Link from '../formats/link';\n\nconst ATTRIBUTES = [\n  'height',\n  'width'\n];\n\n\nclass Video extends BlockEmbed {\n  static create(value) {\n    let node = super.create(value);\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', true);\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode) {\n    return ATTRIBUTES.reduce(function(formats, attribute) {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n\n  static sanitize(url) {\n    return Link.sanitize(url);\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nVideo.blotName = 'video';\nVideo.className = 'ql-video';\nVideo.tagName = 'IFRAME';\n\n\nexport default Video;\n\n\n\n// WEBPACK FOOTER //\n// ./formats/video.js","import Embed from '../blots/embed';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\n\n\nclass FormulaBlot extends Embed {\n  static create(value) {\n    let node = super.create(value);\n    if (typeof value === 'string') {\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00'\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('data-value');\n  }\n}\nFormulaBlot.blotName = 'formula';\nFormulaBlot.className = 'ql-formula';\nFormulaBlot.tagName = 'SPAN';\n\n\nclass Formula extends Module {\n  static register() {\n    Quill.register(FormulaBlot, true);\n  }\n\n  constructor() {\n    super();\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n  }\n}\n\n\nexport { FormulaBlot, Formula as default };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/formula.js","import Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\nimport CodeBlock from '../formats/code';\n\n\nclass SyntaxCodeBlock extends CodeBlock {\n  replaceWith(block) {\n    this.domNode.textContent = this.domNode.textContent;\n    this.attach();\n    super.replaceWith(block);\n  }\n\n  highlight(highlight) {\n    let text = this.domNode.textContent;\n    if (this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        this.domNode.innerHTML = highlight(text);\n        this.domNode.normalize();\n        this.attach();\n      }\n      this.cachedText = text;\n    }\n  }\n}\nSyntaxCodeBlock.className = 'ql-syntax';\n\n\nlet CodeToken = new Parchment.Attributor.Class('token', 'hljs', {\n  scope: Parchment.Scope.INLINE\n});\n\n\nclass Syntax extends Module {\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    if (typeof this.options.highlight !== 'function') {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    let timer = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n    this.highlight();\n  }\n\n  highlight() {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    let range = this.quill.getSelection();\n    this.quill.scroll.descendants(SyntaxCodeBlock).forEach((code) => {\n      code.highlight(this.options.highlight);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n}\nSyntax.DEFAULTS = {\n  highlight: (function() {\n    if (window.hljs == null) return null;\n    return function(text) {\n      let result = window.hljs.highlightAuto(text);\n      return result.value;\n    };\n  })(),\n  interval: 1000\n};\n\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default};\n\n\n\n// WEBPACK FOOTER //\n// ./modules/syntax.js","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/align-left.svg\n// module id = 76\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/align-center.svg\n// module id = 77\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/align-right.svg\n// module id = 78\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/align-justify.svg\n// module id = 79\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <g class=\\\"ql-fill ql-color-label\\\"> <polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\\"5.5 13 9 5 12.5 13\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/background.svg\n// module id = 80\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=4 y=5></rect> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=11 y=5></rect> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/blockquote.svg\n// module id = 81\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/bold.svg\n// module id = 82\n// module chunks = 0 1","module.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/clean.svg\n// module id = 83\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\\"5.5 11 9 3 12.5 11\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/color.svg\n// module id = 84\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/direction-ltr.svg\n// module id = 85\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/direction-rtl.svg\n// module id = 86\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/float-center.svg\n// module id = 87\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/float-full.svg\n// module id = 88\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/float-left.svg\n// module id = 89\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform=\\\"translate(24 18) rotate(-180)\\\"/> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/float-right.svg\n// module id = 90\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/formula.svg\n// module id = 91\n// module chunks = 0 1","module.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/header.svg\n// module id = 92\n// module chunks = 0 1","module.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/header-2.svg\n// module id = 93\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/italic.svg\n// module id = 94\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"></polyline> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/image.svg\n// module id = 95\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"></polyline> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/indent.svg\n// module id = 96\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"5 7 5 11 3 9 5 7\\\"></polyline> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/outdent.svg\n// module id = 97\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\\"ql-even ql-stroke\\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\\"ql-even ql-stroke\\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/link.svg\n// module id = 98\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\\"ql-stroke ql-thin\\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\\"ql-stroke ql-thin\\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\\"ql-stroke ql-thin\\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/list-ordered.svg\n// module id = 99\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/list-bullet.svg\n// module id = 100\n// module chunks = 0 1","module.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\\"3 4 4 5 6 3\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\\"3 14 4 15 6 13\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"3 9 4 10 6 8\\\"></polyline> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/list-check.svg\n// module id = 101\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/subscript.svg\n// module id = 102\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/superscript.svg\n// module id = 103\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-stroke ql-thin\\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/strike.svg\n// module id = 104\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/underline.svg\n// module id = 105\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/video.svg\n// module id = 106\n// module chunks = 0 1","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=ql-stroke points=\\\"7 11 9 13 11 11 7 11\\\"></polygon> <polygon class=ql-stroke points=\\\"7 7 9 5 11 7 7 7\\\"></polygon> </svg>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./assets/icons/dropdown.svg\n// module id = 107\n// module chunks = 0 1","import extend from 'extend';\nimport Emitter from '../core/emitter';\nimport BaseTheme, { BaseTooltip } from './base';\nimport { Range } from '../core/selection';\nimport icons from '../ui/icons';\n\n\nconst TOOLBAR_CONFIG = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote']\n];\n\nclass BubbleTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar) {\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    this.tooltip.root.appendChild(toolbar.container);\n    this.buildButtons([].slice.call(toolbar.container.querySelectorAll('button')), icons);\n    this.buildPickers([].slice.call(toolbar.container.querySelectorAll('select')), icons);\n  }\n}\nBubbleTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link: function(value) {\n          if (!value) {\n            this.quill.format('link', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\n\n\nclass BubbleTooltip extends BaseTooltip {\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.quill.on(Emitter.events.EDITOR_CHANGE, (type, range, oldRange, source) => {\n      if (type !== Emitter.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === Emitter.sources.USER) {\n        this.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        this.root.style.left = '0px';\n        this.root.style.width = '';\n        this.root.style.width = this.root.offsetWidth + 'px';\n        let lines = this.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          this.position(this.quill.getBounds(range));\n        } else {\n          let lastLine = lines[lines.length - 1];\n          let index = this.quill.getIndex(lastLine);\n          let length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          let bounds = this.quill.getBounds(new Range(index, length));\n          this.position(bounds);\n        }\n      } else if (document.activeElement !== this.textbox && this.quill.hasFocus()) {\n        this.hide();\n      }\n    });\n  }\n\n  listen() {\n    super.listen();\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        let range = this.quill.getSelection();\n        if (range != null) {\n          this.position(this.quill.getBounds(range));\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference) {\n    let shift = super.position(reference);\n    let arrow = this.root.querySelector('.ql-tooltip-arrow');\n    arrow.style.marginLeft = '';\n    if (shift === 0) return shift;\n    arrow.style.marginLeft = (-1*shift - arrow.offsetWidth/2) + 'px';\n  }\n}\nBubbleTooltip.TEMPLATE = [\n  '<span class=\"ql-tooltip-arrow\"></span>',\n  '<div class=\"ql-tooltip-editor\">',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-close\"></a>',\n  '</div>'\n].join('');\n\n\nexport { BubbleTooltip, BubbleTheme as default };\n\n\n\n// WEBPACK FOOTER //\n// ./themes/bubble.js","import Quill from '../quill.js';\nimport CodeBlock from '../formats/code';\n\nQuill.register(CodeBlock, true); // Syntax version will otherwise be registered\n\nimport './helpers/unit.js';\n\nimport './unit/blots/scroll.js';\nimport './unit/blots/block.js';\nimport './unit/blots/block-embed.js';\nimport './unit/blots/inline.js';\n\nimport './unit/core/editor';\nimport './unit/core/selection';\nimport './unit/core/quill';\n\nimport './unit/formats/color';\nimport './unit/formats/link';\nimport './unit/formats/script';\nimport './unit/formats/align';\nimport './unit/formats/code';\nimport './unit/formats/header';\nimport './unit/formats/indent';\nimport './unit/formats/list';\nimport './unit/formats/bold';\n\nimport './unit/modules/clipboard';\nimport './unit/modules/history';\nimport './unit/modules/keyboard';\nimport './unit/modules/toolbar';\n\nimport './unit/ui/picker';\nimport './unit/theme/base/tooltip';\n\n\nexport default Quill;\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit.js","import Editor from '../../core/editor';\nimport Emitter from '../../core/emitter';\nimport Selection from '../../core/selection';\nimport Scroll from '../../blots/scroll';\nimport Quill from '../../core/quill';\nimport equal from 'deep-equal';\n\n\nlet div = document.createElement('div');\ndiv.id = 'test-container';\ndocument.body.appendChild(div);\n\n\nwindow.onerror = function(msg) {\n  return (msg === 'Script error.');\n};\n\n\nbeforeEach(function() {\n  jasmine.addMatchers({\n    toEqualHTML: function() {\n      return { compare: compareHTML }\n    },\n    toBeApproximately: function() {\n      return { compare: compareApproximately }\n    }\n  });\n\n  div.innerHTML = '<div></div>';\n  this.container = div.firstChild;\n  this.initialize = initialize.bind(this);\n});\n\n\nfunction compareApproximately(actual, expected, tolerance) {\n  let pass = Math.abs(actual - expected) <= tolerance;\n  return {\n    pass: pass,\n    message: `${actual} is ${(pass ? '' : 'not')} approximately ${expected}`\n  };\n}\n\nfunction compareHTML(actual, expected, ignoreClassId) {\n  let [div1, div2] = [actual, expected].map(function(html) {\n    if (html instanceof HTMLElement) {\n      html = html.innerHTML;\n    }\n    let div = document.createElement('div');\n    div.innerHTML = html.replace(/\\n\\s*/g, '');\n    return div;\n  });\n  let ignoredAttributes = ['width', 'height'];\n  if (ignoreClassId) {\n    ignoredAttributes = ignoredAttributes.concat(['class', 'id']);\n  }\n  let message = compareNodes(div1, div2, ignoredAttributes)\n  if (message != null) {\n    console.error(div1.innerHTML);  // eslint-disable-line no-console\n    console.error(div2.innerHTML);  // eslint-disable-line no-console\n    return { pass: false, message: message };\n  } else {\n    return { pass: true, message: 'HTMLs equal' };\n  }\n}\n\nfunction compareNodes(node1, node2, ignoredAttributes = []) {\n  if (node1.nodeType !== node2.nodeType) {\n    return `Expected nodeType '${node1.nodeType}' to equal '${node2.nodeType}'`;\n  }\n  if (node1.nodeType === node1.ELEMENT_NODE) {\n    if (node1.tagName !== node2.tagName) {\n      return `Expected tagName '${node1.tagName}' to equal '${node2.tagName}'`;\n    }\n    let [attr1, attr2] = [node1, node2].map(function(node) {\n      return [].reduce.call(node.attributes || {}, function(attr, elem) {\n        if (ignoredAttributes.indexOf(elem.name) < 0) {\n          attr[elem.name] = elem.name === 'style' ? elem.value.trim() : elem.value;\n        }\n        return attr;\n      }, {});\n    });\n    if (!equal(attr1, attr2)) {\n      return `Expected attributes ${jasmine.pp(attr1)} to equal ${jasmine.pp(attr2)}`;\n    }\n    if (node1.childNodes.length !== node2.childNodes.length) {\n      return `Expected node childNodes length '${node1.childNodes.length}' to equal '${node2.childNodes.length}'`;\n    }\n    if (node1.childNodes.length === 0) return null;\n    let message = '';\n    if ([].some.call(node1.childNodes, function(child1, i) {\n      message = compareNodes(child1, node2.childNodes[i], ignoredAttributes);\n      return message;\n    })) {\n      return message;\n    }\n  } else if (node1.data !== node2.data) {\n    return `Expected node text '${node1.data}' to equal '${node2.data}'`;\n  }\n  return null;\n}\n\nfunction initialize(klass, html, container = this.container) {\n  if (typeof html === 'object') {\n    container.innerHTML = html.html;\n  } else {\n    container.innerHTML = html.replace(/\\n\\s*/g, '');\n  }\n  if (klass === HTMLElement) return container;\n  if (klass === Quill) return new Quill(container);\n  let emitter = new Emitter();\n  let scroll = new Scroll(container, { emitter: emitter });\n  if (klass === Scroll) return scroll;\n  if (klass === Editor) return new Editor(scroll);\n  if (klass === Selection) return new Selection(scroll, emitter);\n  if (klass[0] === Editor && klass[1] === Selection) {\n    return [new Editor(scroll), new Selection(scroll, emitter)];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./test/helpers/unit.js","import Parchment from 'parchment';\nimport Emitter from '../../../core/emitter';\nimport Selection, { Range } from '../../../core/selection';\nimport Cursor from '../../../blots/cursor';\nimport Scroll from '../../../blots/scroll';\n\n\ndescribe('Scroll', function() {\n  it('initialize empty document', function() {\n    let scroll = this.initialize(Scroll, '');\n    expect(scroll.domNode).toEqualHTML('<p><br></p>');\n  });\n\n  it('api change', function() {\n    let scroll = this.initialize(Scroll, '<p>Hello World!</p>');\n    spyOn(scroll.emitter, 'emit').and.callThrough();\n    scroll.insertAt(5, '!');\n    expect(scroll.emitter.emit).toHaveBeenCalledWith(Emitter.events.SCROLL_OPTIMIZE, jasmine.any(Array), jasmine.any(Object));\n  });\n\n  it('user change', function(done) {\n    let scroll = this.initialize(Scroll, '<p>Hello World!</p>');\n    spyOn(scroll.emitter, 'emit').and.callThrough();\n    scroll.domNode.firstChild.appendChild(document.createTextNode('!'));\n    setTimeout(function() {\n      expect(scroll.emitter.emit).toHaveBeenCalledWith(Emitter.events.SCROLL_OPTIMIZE, jasmine.any(Array), jasmine.any(Object));\n      expect(scroll.emitter.emit).toHaveBeenCalledWith(Emitter.events.SCROLL_UPDATE, Emitter.sources.USER, jasmine.any(Array));\n      done();\n    }, 1);\n  });\n\n  it('whitelist', function() {\n    let scroll = Parchment.create('scroll', { emitter: new Emitter(), whitelist: ['bold'] });\n    scroll.insertAt(0, 'Hello World!');\n    scroll.formatAt(0, 5, 'bold', true);\n    scroll.formatAt(6, 5, 'italic', true);\n    expect(scroll.domNode.firstChild).toEqualHTML('<strong>Hello</strong> World!');\n  });\n\n  describe('leaf()', function() {\n    it('text', function() {\n      let scroll = this.initialize(Scroll, '<p>Tests</p>');\n      let [leaf, offset] = scroll.leaf(2);\n      expect(leaf.value()).toEqual('Tests');\n      expect(offset).toEqual(2);\n    });\n\n    it('precise', function() {\n      let scroll = this.initialize(Scroll, '<p><u>0</u><s>1</s><u>2</u><s>3</s><u>4</u></p>');\n      let [leaf, offset] = scroll.leaf(3);\n      expect(leaf.value()).toEqual('2');\n      expect(offset).toEqual(1);\n    });\n\n    it('newline', function() {\n      let scroll = this.initialize(Scroll, '<p>0123</p><p>5678</p>');\n      let [leaf, offset] = scroll.leaf(4);\n      expect(leaf.value()).toEqual('0123');\n      expect(offset).toEqual(4);\n    });\n\n    it('cursor', function() {\n      let selection = this.initialize(Selection, '<p><u>0</u>1<u>2</u></p>');\n      selection.setRange(new Range(2));\n      selection.format('strike', true);\n      let [leaf, offset] = selection.scroll.leaf(2);\n      expect(leaf instanceof Cursor).toBe(true);\n      expect(offset).toEqual(0);\n    });\n\n    it('beyond document', function() {\n      let scroll = this.initialize(Scroll, '<p>Test</p>');\n      let [leaf, offset] = scroll.leaf(10);\n      expect(leaf).toEqual(null);\n      expect(offset).toEqual(-1);\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/blots/scroll.js","import Parchment from 'parchment';\nimport Scroll from '../../../blots/scroll';\n\n\ndescribe('Block', function() {\n  it('childless', function() {\n    let block = Parchment.create('block');\n    block.optimize();\n    expect(block.domNode).toEqualHTML('<br>');\n  });\n\n  it('insert into empty', function() {\n    let block = Parchment.create('block');\n    block.insertAt(0, 'Test');\n    expect(block.domNode).toEqualHTML('Test');\n  });\n\n  it('insert newlines', function() {\n    let scroll = this.initialize(Scroll, '<p><br></p>');\n    scroll.insertAt(0, '\\n\\n\\n');\n    expect(scroll.domNode).toEqualHTML('<p><br></p><p><br></p><p><br></p><p><br></p>');\n  });\n\n  it('insert multiline', function() {\n    let scroll = this.initialize(Scroll, '<p>Hello World!</p>');\n    scroll.insertAt(6, 'pardon\\nthis\\n\\ninterruption\\n');\n    expect(scroll.domNode).toEqualHTML(`\n      <p>Hello pardon</p>\n      <p>this</p>\n      <p><br></p>\n      <p>interruption</p>\n      <p>World!</p>\n    `);\n  });\n\n  it('insert into formatted', function() {\n    let scroll = this.initialize(Scroll, '<h1>Welcome</h1>');\n    scroll.insertAt(3, 'l\\n');\n    expect(scroll.domNode.firstChild.outerHTML).toEqualHTML('<h1>Well</h1>');\n    expect(scroll.domNode.childNodes[1].outerHTML).toEqualHTML('<h1>come</h1>');\n  });\n\n  it('delete line contents', function() {\n    let scroll = this.initialize(Scroll, '<p>Hello</p><p>World!</p>');\n    scroll.deleteAt(0, 5);\n    expect(scroll.domNode).toEqualHTML('<p><br></p><p>World!</p>');\n  });\n\n  it('join lines', function() {\n    let scroll = this.initialize(Scroll, '<h1>Hello</h1><h2>World!</h2>');\n    scroll.deleteAt(5, 1);\n    expect(scroll.domNode).toEqualHTML('<h2>HelloWorld!</h2>');\n  });\n\n  it('join line with empty', function() {\n    let scroll = this.initialize(Scroll, '<p>Hello<strong>World</strong></p><p><br></p>');\n    scroll.deleteAt(10, 1);\n    expect(scroll.domNode).toEqualHTML('<p>Hello<strong>World</strong></p>');\n  });\n\n  it('join empty lines', function() {\n    let scroll = this.initialize(Scroll, '<h1><br></h1><p><br></p>');\n    scroll.deleteAt(1, 1);\n    expect(scroll.domNode).toEqualHTML('<h1><br></h1>');\n  });\n\n  it('format empty', function() {\n    let scroll = this.initialize(Scroll, '<p><br></p>');\n    scroll.formatAt(0, 1, 'header', 1);\n    expect(scroll.domNode).toEqualHTML('<h1><br></h1>');\n  });\n\n  it('format newline', function() {\n    let scroll = this.initialize(Scroll, '<h1>Hello</h1>');\n    scroll.formatAt(5, 1, 'header', 2);\n    expect(scroll.domNode).toEqualHTML('<h2>Hello</h2>');\n  });\n\n  it('remove unnecessary break', function() {\n    let scroll = this.initialize(Scroll, '<p>Test</p>');\n    scroll.children.head.domNode.appendChild(document.createElement('br'));\n    scroll.update();\n    expect(scroll.domNode).toEqualHTML('<p>Test</p>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/blots/block.js","import Scroll from '../../../blots/scroll';\n\n\ndescribe('Block Embed', function() {\n  it('insert', function() {\n    let scroll = this.initialize(Scroll, '<p>0123</p>');\n    scroll.insertAt(2, 'video', '#');\n    expect(scroll.domNode).toEqualHTML(`\n      <p>01</p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <p>23</p>\n    `);\n  });\n\n  it('split newline', function() {\n    let scroll = this.initialize(Scroll, '<p>0123</p>');\n    scroll.insertAt(4, 'video', '#');\n    expect(scroll.domNode).toEqualHTML(`\n      <p>0123</p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <p><br></p>\n    `);\n  });\n\n  it('insert end of document', function() {\n    let scroll = this.initialize(Scroll, '<p>0123</p>');\n    scroll.insertAt(5, 'video', '#');\n    expect(scroll.domNode).toEqualHTML(`\n      <p>0123</p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n\n  it('insert text before', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(0, 'Test');\n    expect(scroll.domNode).toEqualHTML(`\n      <p>Test</p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n\n  it('insert text after', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(1, 'Test');\n    expect(scroll.domNode).toEqualHTML(`\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <p>Test</p>\n    `);\n  });\n\n  it('insert inline embed before', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(0, 'image', '/assets/favicon.png');\n    expect(scroll.domNode).toEqualHTML(`\n      <p><img src=\"/assets/favicon.png\"></p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n\n  it('insert inline embed after', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(1, 'image', '/assets/favicon.png');\n    expect(scroll.domNode).toEqualHTML(`\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <p><img src=\"/assets/favicon.png\"></p>\n    `);\n  });\n\n  it('insert block embed before', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(0, 'video', '#1');\n    expect(scroll.domNode).toEqualHTML(`\n      <iframe src=\"#1\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n\n  it('insert block embed after', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(1, 'video', '#1');\n    expect(scroll.domNode).toEqualHTML(`\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <iframe src=\"#1\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n\n  it('insert newline before', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(0, '\\n');\n    scroll.optimize();\n    expect(scroll.domNode).toEqualHTML(`\n      <p><br></p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n\n  it('insert newline after', function() {\n    let scroll = this.initialize(Scroll, '<iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.insertAt(1, '\\n');\n    scroll.optimize();\n    expect(scroll.domNode).toEqualHTML(`\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n      <p><br></p>\n    `);\n  });\n\n  it('delete preceding newline', function() {\n    let scroll = this.initialize(Scroll, '<p>0123</p><iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>');\n    scroll.deleteAt(4, 1);\n    expect(scroll.domNode).toEqualHTML(`\n      <p>0123</p>\n      <iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe>\n    `);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/blots/block-embed.js","import Scroll from '../../../blots/scroll';\n\n\ndescribe('Inline', function() {\n  it('format order', function() {\n    let scroll = this.initialize(Scroll, '<p>Hello World!</p>');\n    scroll.formatAt(0, 1, 'bold', true);\n    scroll.formatAt(0, 1, 'italic', true);\n    scroll.formatAt(2, 1, 'italic', true);\n    scroll.formatAt(2, 1, 'bold', true);\n    expect(scroll.domNode).toEqualHTML(\n      '<p><strong><em>H</em></strong>e<strong><em>l</em></strong>lo World!</p>'\n    );\n  });\n\n  it('reorder', function() {\n    let scroll = this.initialize(Scroll, '<p>0<strong>12</strong>3</p>');\n    let p = scroll.domNode.firstChild;\n    let em = document.createElement('em');\n    [].slice.call(p.childNodes).forEach(function(node) {\n      em.appendChild(node);\n    });\n    p.appendChild(em);\n    expect(scroll.domNode).toEqualHTML('<p><em>0<strong>12</strong>3</em></p>');\n    scroll.update();\n    expect(scroll.domNode).toEqualHTML(\n      '<p><em>0</em><strong><em>12</em></strong><em>3</em></p>'\n    );\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/blots/inline.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\nimport Selection, { Range } from '../../../core/selection';\n\n\ndescribe('Editor', function() {\n  describe('insert', function() {\n    it('text', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertText(2, '!!');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01!!23', { bold: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML('<p><strong>01!!23</strong></p>');\n    });\n\n    it('embed', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertEmbed(2, 'image', '/assets/favicon.png');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01', { bold: true })\n        .insert({ image: '/assets/favicon.png'}, { bold: true })\n        .insert('23', { bold: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML('<p><strong>01<img src=\"/assets/favicon.png\">23</strong></p>');\n    });\n\n    it('on empty line', function() {\n      let editor = this.initialize(Editor, '<p>0</p><p><br></p><p>3</p>');\n      editor.insertText(2, '!');\n      expect(editor.getDelta()).toEqual(new Delta().insert('0\\n!\\n3\\n'));\n      expect(this.container).toEqualHTML('<p>0</p><p>!</p><p>3</p>');\n    });\n\n    it('end of document', function() {\n      let editor = this.initialize(Editor, '<p>Hello</p>');\n      editor.insertText(6, 'World!');\n      expect(editor.getDelta()).toEqual(new Delta().insert('Hello\\nWorld!\\n'));\n      expect(this.container).toEqualHTML('<p>Hello</p><p>World!</p>');\n    });\n\n    it('end of document with newline', function() {\n      let editor = this.initialize(Editor, '<p>Hello</p>');\n      editor.insertText(6, 'World!\\n');\n      expect(editor.getDelta()).toEqual(new Delta().insert('Hello\\nWorld!\\n'));\n      expect(this.container).toEqualHTML('<p>Hello</p><p>World!</p>');\n    });\n\n    it('embed at end of document with newline', function() {\n      let editor = this.initialize(Editor, '<p>Hello</p>');\n      editor.insertEmbed(6, 'image', '/assets/favicon.png');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('Hello\\n')\n        .insert({ image: '/assets/favicon.png' })\n        .insert('\\n'));\n      expect(this.container).toEqualHTML('<p>Hello</p><p><img src=\"/assets/favicon.png\"></p>');\n    });\n\n    it('newline splitting', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertText(2, '\\n');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01', { bold: true })\n        .insert('\\n')\n        .insert('23', { bold: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML(`\n        <p><strong>01</strong></p>\n        <p><strong>23</strong></p>`\n      );\n    });\n\n    it('prepend newline', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertText(0, '\\n');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('\\n')\n        .insert('0123', { bold: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML(`\n        <p><br></p>\n        <p><strong>0123</strong></p>`\n      );\n    });\n\n    it('append newline', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertText(4, '\\n');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('0123', { bold: true })\n        .insert('\\n\\n')\n      );\n      expect(this.container).toEqualHTML(`\n        <p><strong>0123</strong></p>\n        <p><br></p>`\n      );\n    });\n\n    it('multiline text', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertText(2, '\\n!!\\n!!\\n');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01', { bold: true })\n        .insert('\\n')\n        .insert('!!', { bold: true })\n        .insert('\\n')\n        .insert('!!', { bold: true })\n        .insert('\\n')\n        .insert('23', { bold: true })\n        .insert('\\n'));\n      expect(this.container).toEqualHTML(`\n        <p><strong>01</strong></p>\n        <p><strong>!!</strong></p>\n        <p><strong>!!</strong></p>\n        <p><strong>23</strong></p>`\n      );\n    });\n\n    it('multiple newlines', function() {\n      let editor = this.initialize(Editor, '<p><strong>0123</strong></p>');\n      editor.insertText(2, '\\n\\n');\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01', { bold: true })\n        .insert('\\n\\n')\n        .insert('23', { bold: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML(`\n        <p><strong>01</strong></p>\n        <p><br></p>\n        <p><strong>23</strong></p>`\n      );\n    });\n\n    it('text removing formatting', function() {\n      let editor = this.initialize(Editor, '<p><s>01</s></p>');\n      editor.insertText(2, '23', { bold: false, strike: false });\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01', { strike: true })\n        .insert('23\\n')\n      );\n    });\n  });\n\n  describe('delete', function() {\n    it('inner node', function() {\n      let editor = this.initialize(Editor, '<p><strong><em>0123</em></strong></p>');\n      editor.deleteText(1, 2);\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('03', { bold: true, italic: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML('<p><strong><em>03</em></strong></p>');\n    });\n\n    it('parts of multiple lines', function() {\n      let editor = this.initialize(Editor, '<p><em>0123</em></p><p><em>5678</em></p>');\n      editor.deleteText(2, 5);\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('0178', { italic: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML('<p><em>0178</em></p>');\n    });\n\n    it('entire line keeping newline', function() {\n      let editor = this.initialize(Editor, '<p><strong><em>0123</em></strong></p>');\n      editor.deleteText(0, 4);\n      expect(editor.getDelta()).toEqual(new Delta().insert('\\n'));\n      expect(this.container).toEqualHTML('<p><br></p>');\n    });\n\n    it('newline', function() {\n      let editor = this.initialize(Editor, '<p><em>0123</em></p><p><em>5678</em></p>');\n      editor.deleteText(4, 1);\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('01235678', { italic: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML('<p><em>01235678</em></p>');\n    });\n\n    it('entire document', function() {\n      let editor = this.initialize(Editor, '<p><strong><em>0123</em></strong></p>');\n      editor.deleteText(0, 5);\n      expect(editor.getDelta()).toEqual(new Delta().insert('\\n'));\n      expect(this.container).toEqualHTML('<p><br></p>');\n    });\n\n    it('multiple complete lines', function() {\n      let editor = this.initialize(Editor, '<p><em>012</em></p><p><em>456</em></p><p><em>890</em></p>');\n      editor.deleteText(0, 8);\n      expect(editor.getDelta()).toEqual(new Delta()\n        .insert('890', { italic: true })\n        .insert('\\n')\n      );\n      expect(this.container).toEqualHTML('<p><em>890</em></p>');\n    });\n  });\n\n  describe('format', function() {\n    it('line', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.formatLine(1, 1, { header: 1 });\n      expect(editor.scroll.domNode).toEqualHTML('<h1>0123</h1>');\n    });\n  });\n\n  describe('removeFormat', function() {\n    it('unwrap', function() {\n      let editor = this.initialize(Editor, '<p>0<em>12</em>3</p>');\n      editor.removeFormat(1, 2);\n      expect(this.container).toEqualHTML('<p>0123</p>');\n    });\n\n    it('split inline', function() {\n      let editor = this.initialize(Editor, '<p>0<strong><em>12</em></strong>3</p>');\n      editor.removeFormat(1, 1);\n      expect(this.container).toEqualHTML('<p>01<strong><em>2</em></strong>3</p>');\n    });\n\n    it('partial line', function() {\n      let editor = this.initialize(Editor, '<ul><li>01</li></ul><ol><li>34</li></ol>');\n      editor.removeFormat(1, 3);\n      expect(this.container).toEqualHTML('<p>01</p><p>34</p>');\n    });\n\n    it('remove embed', function() {\n      let editor = this.initialize(Editor, '<p>0<img src=\"/assets/favicon.png\">2</p>')\n      editor.removeFormat(1, 1);\n      expect(this.container).toEqualHTML('<p>02</p>');\n    });\n\n    it('combined', function() {\n      let editor = this.initialize(Editor, `\n        <ul>\n          <li>01<img src=\"/assets/favicon.png\">3</li>\n        </ul>\n        <ol>\n          <li>5<strong>6<em>78</em>9</strong>0</li>\n        </ol>\n      `);\n      editor.removeFormat(1, 7);\n      expect(this.container).toEqualHTML(`\n        <p>013</p>\n        <p>567<strong><em>8</em>9</strong>0</p>\n      `);\n    });\n\n    it('end of document', function() {\n      let editor = this.initialize(Editor, `\n        <ul>\n          <li>0123</li>\n          <li>5678</li>\n        </ol>\n      `);\n      editor.removeFormat(0, 12);\n      expect(this.container).toEqualHTML(`\n        <p>0123</p>\n        <p>5678</p>\n      `);\n    });\n  });\n\n  describe('applyDelta', function() {\n    it('insert', function() {\n      let editor = this.initialize(Editor, '<p></p>');\n      editor.applyDelta(new Delta().insert('01'));\n      expect(this.container).toEqualHTML('<p>01</p>');\n    });\n\n    it('attributed insert', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(2).insert('|', { bold: true }));\n      expect(this.container).toEqualHTML('<p>01<strong>|</strong>23</p>');\n    });\n\n    it('format', function() {\n      let editor = this.initialize(Editor, '<p>01</p>');\n      editor.applyDelta(new Delta().retain(2, { bold: true }));\n      expect(this.container).toEqualHTML('<p><strong>01</strong></p>');\n    });\n\n    it('discontinuous formats', function() {\n      let editor = this.initialize(Editor, '');\n      let delta = new Delta()\n        .insert('ab', { bold: true })\n        .insert('23\\n45')\n        .insert('cd', { bold: true });\n      editor.applyDelta(delta);\n      expect(this.container).toEqualHTML('<p><strong>ab</strong>23</p><p>45<strong>cd</strong></p>');\n    });\n\n    it('unformatted insert', function() {\n      let editor = this.initialize(Editor, '<p><em>01</em></p>');\n      editor.applyDelta(new Delta().retain(1).insert('|'));\n      expect(this.container).toEqualHTML('<p><em>0</em>|<em>1</em></p>');\n    });\n\n    it('insert at format boundary', function() {\n      let editor = this.initialize(Editor, '<p><em>0</em><u>1</u></p>');\n      editor.applyDelta(new Delta().retain(1).insert('|', { strike: true }));\n      expect(this.container).toEqualHTML('<p><em>0</em><s>|</s><u>1</u></p>');\n    });\n\n    it('unformatted newline', function() {\n      let editor = this.initialize(Editor, '<h1>01</h1>');\n      editor.applyDelta(new Delta().retain(2).insert('\\n'));\n      expect(this.container).toEqualHTML('<p>01</p><h1><br></h1>');\n    });\n\n    it('formatted embed', function() {\n      let editor = this.initialize(Editor, '');\n      editor.applyDelta(new Delta().insert({ image: '/assets/favicon.png'}, { italic: true }));\n      expect(this.container).toEqualHTML('<p><em><img src=\"/assets/favicon.png\"></em>');\n    });\n\n    it('old embed', function() {\n      let editor = this.initialize(Editor, '');\n      editor.applyDelta(new Delta().insert(1, { image: '/assets/favicon.png', italic: true }));\n      expect(this.container).toEqualHTML('<p><em><img src=\"/assets/favicon.png\"></em>');\n    });\n\n    it('old list', function() {\n      let editor = this.initialize(Editor, '');\n      editor.applyDelta(new Delta().insert('\\n', { bullet: true }).insert('\\n', { list: true }));\n      expect(this.container).toEqualHTML('<ul><li><br></li></ul><ol><li><br></li></ol><p><br></p>');\n    });\n\n    it('improper block embed insert', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(2).insert({ video: '#' }));\n      expect(this.container).toEqualHTML('<p>01</p><iframe src=\"#\" class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\"></iframe><p>23</p>');\n    });\n\n    it('append formatted block embed', function() {\n      let editor = this.initialize(Editor, '<p>0123</p><p><br></p>');\n      editor.applyDelta(new Delta()\n        .retain(5)\n        .insert({ video: '#' }, { align: 'right' })\n      );\n      expect(this.container).toEqualHTML('<p>0123</p><iframe src=\"#\" class=\"ql-video ql-align-right\" frameborder=\"0\" allowfullscreen=\"true\"></iframe><p><br></p>');\n    });\n\n    it('append', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(5).insert('5678'));\n      expect(this.container).toEqualHTML('<p>0123</p><p>5678</p>');\n    });\n\n    it('append newline', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(5).insert('\\n', { header: 2 }));\n      expect(this.container).toEqualHTML('<p>0123</p><h2><br></h2>');\n    })\n\n    it('append text with newline', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(5).insert('5678').insert('\\n', { header: 2 }));\n      expect(this.container).toEqualHTML('<p>0123</p><h2>5678</h2>');\n    });\n\n    it('append non-isolated newline', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(5).insert('5678\\n', { header: 2 }));\n      expect(this.container).toEqualHTML('<p>0123</p><h2>5678</h2>');\n    });\n\n    it('eventual append', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(2).insert('ab\\n', { header: 1 }).retain(3).insert('cd\\n', { header: 2 }));\n      expect(this.container).toEqualHTML('<h1>01ab</h1><p>23</p><h2>cd</h2>');\n    });\n\n    it('append text, embed and newline', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(5).insert('5678').insert({ image: '/assets/favicon.png' }).insert('\\n', { header: 2 }));\n      expect(this.container).toEqualHTML('<p>0123</p><h2>5678<img src=\"/assets/favicon.png\"></h2>');\n    });\n\n    it('append multiple lines', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      editor.applyDelta(new Delta().retain(5)\n        .insert('56').insert('\\n', { header: 1 })\n        .insert('89').insert('\\n', { header: 2 })\n      );\n      expect(this.container).toEqualHTML('<p>0123</p><h1>56</h1><h2>89</h2>');\n    });\n\n    it('code', function() {\n      let editor = this.initialize(Editor, { html: '<p>0</p><pre>1\\n23\\n</pre><p><br></p>' });\n      editor.applyDelta(new Delta().delete(4).retain(1).delete(2));\n      expect(editor.scroll.domNode.innerHTML).toEqual('<p>2</p>');\n    });\n  });\n\n  describe('getFormat()', function() {\n    it('unformatted', function() {\n      let editor = this.initialize(Editor, '<p>0123</p>');\n      expect(editor.getFormat(1)).toEqual({});\n    })\n\n    it('formatted', function() {\n      let editor = this.initialize(Editor, '<h1><em>0123</em></h1>');\n      expect(editor.getFormat(1)).toEqual({ header: 1, italic: true });\n    })\n\n    it('cursor', function() {\n      let editor = this.initialize(Editor, '<h1><strong><em>0123</em></strong></h1><h2><u>5678</u></h2>');\n      expect(editor.getFormat(2)).toEqual({ bold: true, italic: true, header: 1 });\n    });\n\n    it('cursor with preformat', function() {\n      let [editor, selection] = this.initialize([Editor, Selection], '<h1><strong><em>0123</em></strong></h1>');\n      selection.setRange(new Range(2));\n      selection.format('underline', true);\n      selection.format('color', 'red');\n      expect(editor.getFormat(2)).toEqual({ bold: true, italic: true, header: 1, color: 'red', underline: true });\n    });\n\n    it('across leaves', function() {\n      let editor = this.initialize(Editor, `\n        <h1>\n          <strong class=\"ql-size-small\"><em>01</em></strong>\n          <em class=\"ql-size-large\"><u>23</u></em>\n          <em class=\"ql-size-huge\"><u>45</u></em>\n        </h1>\n      `);\n      expect(editor.getFormat(1, 4)).toEqual({ italic: true, header: 1, size: ['small', 'large', 'huge'] });\n    });\n\n    it('across lines', function() {\n      let editor = this.initialize(Editor, `\n        <h1 class=\"ql-align-right\"><em>01</em></h1>\n        <h1 class=\"ql-align-center\"><em>34</em></h1>\n      `);\n      expect(editor.getFormat(1, 3)).toEqual({ italic: true, header: 1, align: ['right', 'center'] });\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/core/editor.js","import Selection, { Range } from '../../../core/selection';\nimport Cursor from '../../../blots/cursor';\n\n\ndescribe('Selection', function() {\n  beforeEach(function() {\n    this.setup = (html, index) => {\n      this.selection = this.initialize(Selection, html);\n      this.selection.setRange(new Range(index));\n    };\n  });\n\n  describe('focus()', function() {\n    beforeEach(function() {\n      this.initialize(HTMLElement, '<textarea>Test</textarea><div></div>');\n      this.selection = this.initialize(Selection, '<p>0123</p>', this.container.lastChild);\n      this.textarea = this.container.querySelector('textarea');\n      this.textarea.focus();\n      this.textarea.select();\n    });\n\n    it('initial focus', function() {\n      expect(this.selection.hasFocus()).toBe(false);\n      this.selection.focus();\n      expect(this.selection.hasFocus()).toBe(true);\n    });\n\n    it('restore last range', function() {\n      let range = new Range(1, 2);\n      this.selection.setRange(range);\n      this.textarea.focus();\n      this.textarea.select();\n      expect(this.selection.hasFocus()).toBe(false);\n      this.selection.focus();\n      expect(this.selection.hasFocus()).toBe(true);\n      expect(this.selection.getRange()[0]).toEqual(range);\n    });\n  });\n\n  describe('getRange()', function() {\n    it('empty document', function() {\n      let selection = this.initialize(Selection, '');\n      selection.setNativeRange(this.container.querySelector('br'), 0);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(0);\n      expect(range.length).toEqual(0);\n    });\n\n    it('empty line', function() {\n      let selection = this.initialize(Selection, '<p>0</p><p><br></p><p>3</p>');\n      selection.setNativeRange(this.container.querySelector('br'), 0);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(2);\n      expect(range.length).toEqual(0);\n    });\n\n    it('end of line', function() {\n      let selection = this.initialize(Selection, '<p>0</p>');\n      selection.setNativeRange(this.container.firstChild.firstChild, 1);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(1);\n      expect(range.length).toEqual(0);\n    });\n\n    it('text node', function() {\n      let selection = this.initialize(Selection, '<p>0123</p>');\n      selection.setNativeRange(this.container.firstChild.firstChild, 1);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(1);\n      expect(range.length).toEqual(0);\n    });\n\n    it('line boundaries', function() {\n      let selection = this.initialize(Selection, '<p><br></p><p>12</p>');\n      selection.setNativeRange(this.container.firstChild, 0, this.container.lastChild.lastChild, 2);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(0);\n      expect(range.length).toEqual(3);\n    });\n\n    it('nested text node', function() {\n      let selection = this.initialize(Selection, `\n        <p><strong><em>01</em></strong></p>\n        <ul>\n          <li><em><u>34</u></em></li>\n        </ul>`\n      );\n      selection.setNativeRange(\n        this.container.querySelector('em').firstChild, 1,\n        this.container.querySelector('u').firstChild, 1\n      );\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(1);\n      expect(range.length).toEqual(3);\n    });\n\n    it('between embed', function() {\n      let selection = this.initialize(Selection, `\n        <p>\n          <img src=\"/assets/favicon.png\">\n          <img src=\"/assets/favicon.png\">\n        </p>\n        <ul>\n          <li>\n            <img src=\"/assets/favicon.png\">\n            <img src=\"/assets/favicon.png\">\n          </li>\n        </ul>`\n      );\n      selection.setNativeRange(this.container.firstChild, 1, this.container.lastChild.lastChild, 1);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(1);\n      expect(range.length).toEqual(3);\n    });\n\n    it('between inlines', function() {\n      let selection = this.initialize(Selection, '<p><em>01</em><s>23</s><u>45</u></p>');\n      selection.setNativeRange(this.container.firstChild, 1, this.container.firstChild, 2);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(2);\n      expect(range.length).toEqual(2);\n    });\n\n    it('between blocks', function() {\n      let selection = this.initialize(Selection, `\n        <p>01</p>\n        <p><br></p>\n        <ul>\n          <li>45</li>\n          <li>78</li>\n        </ul>`\n      );\n      selection.setNativeRange(this.container, 1, this.container.lastChild, 1);\n      let [range, ] = selection.getRange();\n      expect(range.index).toEqual(3);\n      expect(range.length).toEqual(4);\n    });\n\n    it('wrong input', function() {\n      let container = this.initialize(HTMLElement, `\n        <textarea>Test</textarea>\n        <div></div>`\n      );\n      let selection = this.initialize(Selection, '<p>0123</p>', container.lastChild);\n      container.firstChild.select();\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(null);\n    });\n  });\n\n  describe('setRange()', function() {\n    it('empty document', function() {\n      let selection = this.initialize(Selection, '');\n      let expected = new Range(0);\n      selection.setRange(expected);\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(expected);\n      expect(selection.hasFocus()).toBe(true);\n    });\n\n    it('empty lines', function() {\n      let selection = this.initialize(Selection, `\n        <p><br></p>\n        <ul>\n          <li><br></li>\n        </ul>`\n      );\n      let expected = new Range(0, 1);\n      selection.setRange(expected);\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(range);\n      expect(selection.hasFocus()).toBe(true);\n    });\n\n    it('nested text node', function() {\n      let selection = this.initialize(Selection, `\n        <p><strong><em>01</em></strong></p>\n        <ul>\n          <li><em><u>34</u></em></li>\n        </ul>`\n      );\n      let expected = new Range(1, 3);\n      selection.setRange(expected);\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(expected);\n      expect(selection.hasFocus()).toBe(true);\n    });\n\n    it('between inlines', function() {\n      let selection = this.initialize(Selection, '<p><em>01</em><s>23</s><u>45</u></p>');\n      let expected = new Range(2, 2);\n      selection.setRange(expected);\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(expected);\n      expect(selection.hasFocus()).toBe(true);\n    });\n\n    it('single embed', function() {\n      let selection = this.initialize(Selection,\n        `<p><img src=\"/assets/favicon.png\"></p>`\n      );\n      let expected = new Range(1, 0);\n      selection.setRange(expected);\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(expected);\n      expect(selection.hasFocus()).toBe(true);\n    });\n\n    it('between embeds', function() {\n      let selection = this.initialize(Selection, `\n        <p>\n          <img src=\"/assets/favicon.png\">\n          <img src=\"/assets/favicon.png\">\n        </p>\n        <ul>\n          <li>\n            <img src=\"/assets/favicon.png\">\n            <img src=\"/assets/favicon.png\">\n          </li>\n        </ul>`\n      );\n      let expected = new Range(1, 3);\n      selection.setRange(expected);\n      let [range, ] = selection.getRange();\n      expect(range).toEqual(expected);\n      expect(selection.hasFocus()).toBe(true);\n    });\n\n    it('null', function() {\n      let selection = this.initialize(Selection, '<p>0123</p>');\n      selection.setRange(new Range(1));\n      let [range, ] = selection.getRange();\n      expect(range).not.toEqual(null);\n      selection.setRange(null);\n      [range, ] = selection.getRange();\n      expect(range).toEqual(null);\n      expect(selection.hasFocus()).toBe(false);\n    });\n  });\n\n  describe('format()', function() {\n    it('trailing', function() {\n      this.setup(`<p>0123</p>`, 4);\n      this.selection.format('bold', true);\n      expect(this.selection.getRange()[0].index).toEqual(4);\n      expect(this.container).toEqualHTML(`\n        <p>0123<strong><span class=\"ql-cursor\">${Cursor.CONTENTS}</span></strong></p>\n      `);\n    });\n\n    it('split nodes', function() {\n      this.setup(`<p><em>0123</em></p>`, 2);\n      this.selection.format('bold', true);\n      expect(this.selection.getRange()[0].index).toEqual(2);\n      expect(this.container).toEqualHTML(`\n        <p>\n          <em>01</em>\n          <strong><em><span class=\"ql-cursor\">${Cursor.CONTENTS}</span></em></strong>\n          <em>23</em>\n        </p>\n      `);\n    });\n\n    it('between characters', function() {\n      this.setup(`<p><em>0</em><strong>1</strong></p>`, 1);\n      this.selection.format('underline', true);\n      expect(this.selection.getRange()[0].index).toEqual(1);\n      expect(this.container).toEqualHTML(`\n        <p><em>0<u><span class=\"ql-cursor\">${Cursor.CONTENTS}</span></u></em><strong>1</strong></p>\n      `);\n    });\n\n    it('empty line', function() {\n      this.setup(`<p><br></p>`, 0);\n      this.selection.format('bold', true);\n      expect(this.selection.getRange()[0].index).toEqual(0);\n      expect(this.container).toEqualHTML(`\n        <p><strong><span class=\"ql-cursor\">${Cursor.CONTENTS}</span></strong></p>\n      `);\n    });\n\n    it('cursor interference', function() {\n      this.setup(`<p>0123</p>`, 2);\n      this.selection.format('underline', true);\n      this.selection.scroll.update();\n      let native = this.selection.getNativeRange();\n      expect(native.start.node).toEqual(this.selection.cursor.textNode);\n    });\n\n    it('multiple', function() {\n      this.setup(`<p>0123</p>`, 2);\n      this.selection.format('color', 'red');\n      this.selection.format('italic', true);\n      this.selection.format('underline', true);\n      this.selection.format('background', 'blue');\n      expect(this.selection.getRange()[0].index).toEqual(2);\n      expect(this.container).toEqualHTML(`\n        <p>\n          01\n          <em style=\"color: red; background-color: blue;\"><u>\n            <span class=\"ql-cursor\">${Cursor.CONTENTS}</span>\n          </u></em>\n          23\n        </p>\n      `);\n    });\n\n    it('remove format', function() {\n      this.setup(`<p><strong>0123</strong></p>`, 2);\n      this.selection.format('italic', true);\n      this.selection.format('underline', true);\n      this.selection.format('italic', false);\n      expect(this.selection.getRange()[0].index).toEqual(2);\n      expect(this.container).toEqualHTML(`\n        <p>\n          <strong>\n            01<u><span class=\"ql-cursor\">${Cursor.CONTENTS}</span></u>23\n          </strong>\n        </p>\n      `);\n    });\n\n    it('selection change cleanup', function() {\n      this.setup(`<p>0123</p>`, 2);\n      this.selection.format('italic', true);\n      this.selection.setRange(new Range(0, 0));\n      this.selection.scroll.update();\n      expect(this.container).toEqualHTML('<p>0123</p>');\n    });\n\n    it('text change cleanup', function() {\n      this.setup(`<p>0123</p>`, 2);\n      this.selection.format('italic', true);\n      this.selection.cursor.textNode.data = Cursor.CONTENTS + '|';\n      this.selection.setNativeRange(this.selection.cursor.textNode, 2);\n      this.selection.scroll.update();\n      expect(this.container).toEqualHTML('<p>01<em>|</em>23</p>');\n    });\n\n    it('no cleanup', function() {\n      this.setup('<p>0123</p><p><br></p>', 2);\n      this.selection.format('italic', true);\n      this.container.removeChild(this.container.lastChild);\n      this.selection.scroll.update();\n      expect(this.selection.getRange()[0].index).toEqual(2);\n      expect(this.container).toEqualHTML(`\n        <p>01<em><span class=\"ql-cursor\">${Cursor.CONTENTS}</span></em>23</p>\n      `);\n    });\n  });\n\n  describe('getBounds()', function() {\n    beforeEach(function() {\n      this.container.classList.add('ql-editor');\n      this.container.style.fontFamily = 'monospace';\n      this.container.style.lineHeight = /Trident/i.test(navigator.userAgent) ? '18px' : 'initial';\n      this.initialize(HTMLElement, '<div></div><div>&nbsp;</div>');\n      this.div = this.container.firstChild;\n      this.div.style.border = '1px solid #777';\n      // this.float is for visually a check, does not affect test itself\n      this.float = this.container.lastChild;\n      this.float.style.backgroundColor = 'red';\n      this.float.style.position = 'absolute';\n      this.float.style.width = '1px';\n      if (this.reference != null) return;\n      this.initialize(HTMLElement, '<p><span>0</span></p>', this.div);\n      let span = this.div.firstChild.firstChild;\n      span.style.display = 'inline-block';    // IE11 needs this to respect line height\n      let bounds = span.getBoundingClientRect();\n      this.reference = {\n        height: bounds.height,\n        left: bounds.left,\n        lineHeight: span.parentNode.offsetHeight,\n        width: bounds.width,\n        top: bounds.top\n      };\n      this.initialize(HTMLElement, '', this.div);\n    });\n\n    afterEach(function() {\n      this.float.style.left = this.bounds.left + 'px';\n      this.float.style.top = this.bounds.top + 'px';\n      this.float.style.height = this.bounds.height + 'px';\n    });\n\n    it('empty document', function() {\n      let selection = this.initialize(Selection, '<p><br></p>', this.div);\n      this.bounds = selection.getBounds(0);\n      if (/Android/i.test(navigator.userAgent)) return;   // false positive on emulators atm\n      expect(this.bounds.left).toBeApproximately(this.reference.left, 1);\n      expect(this.bounds.height).toBeApproximately(this.reference.height, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top, 1);\n    });\n\n    it('empty line', function() {\n      let selection = this.initialize(Selection, `\n        <p>0000</p>\n        <p><br></p>\n        <p>0000</p>`\n      , this.div);\n      this.bounds = selection.getBounds(5);\n      if (/Android/i.test(navigator.userAgent)) return;   // false positive on emulators atm\n      expect(this.bounds.left).toBeApproximately(this.reference.left, 1);\n      expect(this.bounds.height).toBeApproximately(this.reference.height, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top + this.reference.lineHeight, 2);\n    });\n\n    it('plain text', function() {\n      let selection = this.initialize(Selection, '<p>0123</p>', this.div);\n      this.bounds = selection.getBounds(2);\n      expect(this.bounds.left).toBeApproximately(this.reference.left + this.reference.width * 2, 2);\n      expect(this.bounds.height).toBeApproximately(this.reference.height, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top, 1);\n    });\n\n    it('multiple characters', function() {\n      let selection = this.initialize(Selection, '<p>0123</p>', this.div);\n      this.bounds = selection.getBounds(1, 2);\n      expect(this.bounds.left).toBeApproximately(this.reference.left + this.reference.width, 2);\n      expect(this.bounds.height).toBeApproximately(this.reference.height, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top, 1);\n      expect(this.bounds.width).toBeApproximately(this.reference.width*2, 2);\n    });\n\n    it('start of line', function() {\n      let selection = this.initialize(Selection, `\n        <p>0000</p>\n        <p>0000</p>`\n      , this.div);\n      this.bounds = selection.getBounds(5);\n      expect(this.bounds.left).toBeApproximately(this.reference.left, 1);\n      expect(this.bounds.height).toBeApproximately(this.reference.height, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top + this.reference.lineHeight, 1);\n    });\n\n    it('end of line', function() {\n      let selection = this.initialize(Selection, `\n        <p>0000</p>\n        <p>0000</p>\n        <p>0000</p>`\n      , this.div);\n      this.bounds = selection.getBounds(9);\n      expect(this.bounds.left).toBeApproximately(this.reference.left + this.reference.width * 4, 4);\n      expect(this.bounds.height).toBeApproximately(this.reference.height, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top + this.reference.lineHeight, 1);\n    });\n\n    it('multiple lines', function() {\n      let selection = this.initialize(Selection, `\n        <p>0000</p>\n        <p>0000</p>\n        <p>0000</p>`\n      , this.div);\n      this.bounds = selection.getBounds(2, 4);\n      expect(this.bounds.left).toBeApproximately(this.reference.left, 1);\n      expect(this.bounds.height).toBeApproximately(this.reference.height*2, 2);\n      expect(this.bounds.top).toBeApproximately(this.reference.top, 1);\n      expect(this.bounds.width).toBeGreaterThan(3*this.reference.width);\n    });\n\n    it('large text', function() {\n      let selection = this.initialize(Selection, '<p><span class=\"ql-size-large\">0000</span></p>', this.div);\n      let span = this.div.querySelector('span');\n      if (/Trident/i.test(navigator.userAgent)) {\n        span.style.lineHeight = '27px';\n      }\n      this.bounds = selection.getBounds(2);\n      expect(this.bounds.left).toBeApproximately(this.reference.left + span.offsetWidth / 2, 1);\n      expect(this.bounds.height).toBeApproximately(span.offsetHeight, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top, 1);\n    });\n\n    it('image', function() {\n      let selection = this.initialize(Selection, `\n        <p>\n          <img src=\"/assets/favicon.png\" width=\"32px\" height=\"32px\">\n          <img src=\"/assets/favicon.png\" width=\"32px\" height=\"32px\">\n        </p>`\n      , this.div);\n      this.bounds = selection.getBounds(1);\n      expect(this.bounds.left).toBeApproximately(this.reference.left + 32, 1);\n      expect(this.bounds.height).toBeApproximately(32, 1);\n      expect(this.bounds.top).toBeApproximately(this.reference.top, 1);\n    });\n\n    it('beyond document', function() {\n      let selection = this.initialize(Selection, '<p>0123</p>');\n      expect(() => {\n        this.bounds = selection.getBounds(10, 0);\n      }).not.toThrow();\n      expect(() => {\n        this.bounds = selection.getBounds(0, 10);\n      }).not.toThrow();\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/core/selection.js","import Delta from 'quill-delta';\nimport Quill, { expandConfig, overload } from '../../../core/quill';\nimport Theme from '../../../core/theme';\nimport Emitter from '../../../core/emitter';\nimport Toolbar from '../../../modules/toolbar';\nimport Snow from '../../../themes/snow';\nimport { Range } from '../../../core/selection';\n\n\ndescribe('Quill', function() {\n  it('imports', function() {\n    Object.keys(Quill.imports).forEach(function(path) {\n      expect(Quill.import(path)).toBeTruthy();\n    });\n  });\n\n  describe('construction', function() {\n    it('empty', function() {\n      let quill = this.initialize(Quill, '');\n      expect(quill.getContents()).toEqual(new Delta().insert('\\n'));\n      expect(quill.root).toEqualHTML('<p><br></p>');\n    });\n\n    it('text', function() {\n      let quill = this.initialize(Quill, '0123');\n      expect(quill.getContents()).toEqual(new Delta().insert('0123\\n'));\n      expect(quill.root).toEqualHTML('<p>0123</p>');\n    });\n\n    it('newlines', function() {\n      let quill = this.initialize(Quill, '<p><br></p><p><br></p><p><br></p>');\n      expect(quill.getContents()).toEqual(new Delta().insert('\\n\\n\\n'));\n      expect(quill.root).toEqualHTML('<p><br></p><p><br></p><p><br></p>');\n    });\n\n    it('formatted ending', function() {\n      let quill = this.initialize(Quill, '<p class=\"ql-align-center\">Test</p>');\n      expect(quill.getContents()).toEqual(\n        new Delta().insert('Test').insert('\\n', { align: 'center' })\n      );\n      expect(quill.root).toEqualHTML('<p class=\"ql-align-center\">Test</p>');\n    });\n  });\n\n  describe('api', function() {\n    beforeEach(function() {\n      this.quill = this.initialize(Quill, '<p>0123<em>45</em>67</p>');\n      this.oldDelta = this.quill.getContents();\n      spyOn(this.quill.emitter, 'emit').and.callThrough();\n    });\n\n    it('deleteText()', function() {\n      this.quill.deleteText(3, 2);\n      let change = new Delta().retain(3).delete(2);\n      expect(this.quill.root).toEqualHTML('<p>012<em>5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('format()', function() {\n      this.quill.setSelection(3, 2);\n      this.quill.format('bold', true);\n      let change = new Delta().retain(3).retain(2, { bold: true });\n      expect(this.quill.root).toEqualHTML('<p>012<strong>3<em>4</em></strong><em>5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n      expect(this.quill.getSelection()).toEqual(new Range(3, 2));\n    });\n\n    it('formatLine()', function() {\n      this.quill.formatLine(1, 1, 'header', 2);\n      let change = new Delta().retain(8).retain(1, { header: 2});\n      expect(this.quill.root).toEqualHTML('<h2>0123<em>45</em>67</h2>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('formatText()', function() {\n      this.quill.formatText(3, 2, 'bold', true);\n      let change = new Delta().retain(3).retain(2, { bold: true });\n      expect(this.quill.root).toEqualHTML('<p>012<strong>3<em>4</em></strong><em>5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('insertEmbed()', function() {\n      this.quill.insertEmbed(5, 'image', '/assets/favicon.png');\n      let change = new Delta().retain(5).insert({ image: '/assets/favicon.png'}, { italic: true });\n      expect(this.quill.root).toEqualHTML('<p>0123<em>4<img src=\"/assets/favicon.png\">5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('insertText()', function() {\n      this.quill.insertText(5, '|', 'bold', true);\n      let change = new Delta().retain(5).insert('|', { bold: true, italic: true });\n      expect(this.quill.root).toEqualHTML('<p>0123<em>4</em><strong><em>|</em></strong><em>5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('enable/disable', function() {\n      this.quill.disable();\n      expect(this.quill.root.getAttribute('contenteditable')).toEqual('false');\n      this.quill.enable();\n      expect(this.quill.root.getAttribute('contenteditable')).toBeTruthy();\n    });\n\n    it('getBounds() index', function() {\n      expect(this.quill.getBounds(1)).toBeTruthy();\n    });\n\n    it('getBounds() range', function() {\n      expect(this.quill.getBounds(new Range(3, 4))).toBeTruthy();\n    });\n\n    it('getFormat()', function() {\n      let formats = this.quill.getFormat(5);\n      expect(formats).toEqual({ italic: true });\n    });\n\n    it('getSelection()', function() {\n      expect(this.quill.getSelection()).toEqual(null);\n      let range = new Range(1, 2);\n      this.quill.setSelection(range);\n      expect(this.quill.getSelection()).toEqual(range);\n    });\n\n    it('pasteHTML(html)', function() {\n      this.quill.pasteHTML('<i>ab</i><b>cd</b>');\n      expect(this.quill.root).toEqualHTML('<p><em>ab</em><strong>cd</strong></p>');\n    });\n\n    it('pasteHTML(index, html)', function() {\n      this.quill.pasteHTML(2, '<b>ab</b>');\n      expect(this.quill.root).toEqualHTML('<p>01<strong>ab</strong>23<em>45</em>67</p>');\n    });\n\n    it('removeFormat()', function() {\n      this.quill.removeFormat(5, 1);\n      let change = new Delta().retain(5).retain(1, { italic: null });\n      expect(this.quill.root).toEqualHTML('<p>0123<em>4</em>567</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, change, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('updateContents() delta', function() {\n      let delta = new Delta().retain(5).insert('|');\n      this.quill.updateContents(delta);\n      expect(this.quill.root).toEqualHTML('<p>0123<em>4</em>|<em>5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, delta, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('updateContents() ops array', function() {\n      let delta = new Delta().retain(5).insert('|');\n      this.quill.updateContents(delta.ops);\n      expect(this.quill.root).toEqualHTML('<p>0123<em>4</em>|<em>5</em>67</p>');\n      expect(this.quill.emitter.emit).toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, delta, this.oldDelta, Emitter.sources.API);\n    });\n  });\n\n  describe('events', function() {\n    beforeEach(function() {\n      this.quill = this.initialize(Quill, '<p>0123</p>');\n      this.quill.update();\n      spyOn(this.quill.emitter, 'emit').and.callThrough();\n      this.oldDelta = this.quill.getContents();\n    });\n\n    it('api text insert', function() {\n      this.quill.insertText(2, '!');\n      let delta = new Delta().retain(2).insert('!');\n      expect(this.quill.emitter.emit)\n        .toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, delta, this.oldDelta, Emitter.sources.API);\n    });\n\n    it('user text insert', function(done) {\n      this.container.firstChild.firstChild.firstChild.data = '01!23';\n      let delta = new Delta().retain(2).insert('!');\n      setTimeout(() => {\n        expect(this.quill.emitter.emit)\n          .toHaveBeenCalledWith(Emitter.events.TEXT_CHANGE, delta, this.oldDelta, Emitter.sources.USER);\n        done();\n      }, 1);\n    });\n\n    it('insert same character', function(done) {\n      this.quill.setText('aaaa\\n');\n      this.quill.setSelection(2);\n      this.quill.update();\n      let old = this.quill.getContents();\n      let textNode = this.container.firstChild.firstChild.firstChild;\n      textNode.data = 'aaaaa';\n      this.quill.selection.setNativeRange(textNode.data, 3);\n      // this.quill.selection.update(Emitter.sources.SILENT);\n      let delta = new Delta().retain(2).insert('a');\n      setTimeout(() => {\n        let args = this.quill.emitter.emit.calls.mostRecent().args;\n        expect(args).toEqual([Emitter.events.TEXT_CHANGE, delta, old, Emitter.sources.USER]);\n        done();\n      }, 1);\n    });\n  });\n\n  describe('setContents()', function() {\n    it('empty', function() {\n      let quill = this.initialize(Quill, '');\n      let delta = new Delta().insert('\\n');\n      quill.setContents(delta);\n      expect(quill.getContents()).toEqual(delta);\n      expect(quill.root).toEqualHTML('<p><br></p>');\n    });\n\n    it('single line', function() {\n      let quill = this.initialize(Quill, '');\n      let delta = new Delta().insert('Hello World!\\n');\n      quill.setContents(delta);\n      expect(quill.getContents()).toEqual(delta);\n      expect(quill.root).toEqualHTML('<p>Hello World!</p>');\n    });\n\n    it('multiple lines', function() {\n      let quill = this.initialize(Quill, '');\n      let delta = new Delta().insert('Hello\\n\\nWorld!\\n');\n      quill.setContents(delta);\n      expect(quill.getContents()).toEqual(delta);\n      expect(quill.root).toEqualHTML('<p>Hello</p><p><br></p><p>World!</p>');\n    });\n\n    it('basic formats', function() {\n      let quill = this.initialize(Quill, '');\n      let delta = new Delta().insert('Welcome').insert('\\n', { header: 1 })\n                             .insert('Hello\\n')\n                             .insert('World')\n                             .insert('!', { bold: true })\n                             .insert('\\n');\n      quill.setContents(delta);\n      expect(quill.getContents()).toEqual(delta);\n      expect(quill.root).toEqualHTML(`\n        <h1>Welcome</h1>\n        <p>Hello</p>\n        <p>World<strong>!</strong></p>\n      `);\n    });\n\n    it('array of operations', function() {\n      let quill = this.initialize(Quill, '');\n      let delta = new Delta().insert('test').insert('123', { bold: true }).insert('\\n');\n      quill.setContents(delta.ops);\n      expect(quill.getContents()).toEqual(delta);\n    });\n\n    it('json', function() {\n      let quill = this.initialize(Quill, '');\n      let delta = { ops: [{ insert: 'test\\n'}] };\n      quill.setContents(delta);\n      expect(quill.getContents()).toEqual(new Delta(delta));\n    });\n\n    it('no trailing newline', function() {\n      let quill = this.initialize(Quill, '<h1>Welcome</h1>');\n      quill.setContents(new Delta().insert('0123'));\n      expect(quill.getContents()).toEqual(new Delta().insert('0123\\n'));\n    });\n\n    it('inline formatting', function() {\n      let quill = this.initialize(Quill, '<p><strong>Bold</strong></p><p>Not bold</p>');\n      let contents = quill.getContents();\n      let delta = quill.setContents(contents);\n      expect(quill.getContents()).toEqual(contents);\n      expect(delta).toEqual(contents.delete(contents.length()));\n    });\n  });\n\n  describe('setText()', function() {\n    it('overwrite', function() {\n      let quill = this.initialize(Quill, '<h1>Welcome</h1>');\n      quill.setText('abc');\n      expect(quill.root).toEqualHTML('<p>abc</p>');\n    });\n\n    it('set to newline', function() {\n      let quill = this.initialize(Quill, '<h1>Welcome</h1>');\n      quill.setText('\\n');\n      expect(quill.root).toEqualHTML('<p><br></p>');\n    });\n\n    it('multiple newlines', function() {\n      let quill = this.initialize(Quill, '<h1>Welcome</h1>');\n      quill.setText('\\n\\n');\n      expect(quill.root).toEqualHTML('<p><br></p><p><br></p>');\n    });\n\n    it('content with trailing newline', function() {\n      let quill = this.initialize(Quill, '<h1>Welcome</h1>');\n      quill.setText('abc\\n');\n      expect(quill.root).toEqualHTML('<p>abc</p>');\n    });\n\n    it('return carriage', function() {\n      let quill = this.initialize(Quill, '<p>Test</p>');\n      quill.setText('\\r');\n      expect(quill.root).toEqualHTML('<p><br></p>');\n    });\n\n    it('return carriage newline', function() {\n      let quill = this.initialize(Quill, '<p>Test</p>');\n      quill.setText('\\r\\n');\n      expect(quill.root).toEqualHTML('<p><br></p>');\n    });\n  });\n\n  describe('expandConfig', function() {\n    it('user overwrite quill', function() {\n      let config = expandConfig('#test-container', {\n        placeholder: 'Test',\n        readOnly: true\n      });\n      expect(config.placeholder).toEqual('Test')\n      expect(config.readOnly).toEqual(true);\n    });\n\n    it('convert css selectors', function() {\n      let config = expandConfig('#test-container', {\n        bounds: '#test-container'\n      });\n      expect(config.bounds).toEqual(document.querySelector('#test-container'));\n      expect(config.container).toEqual(document.querySelector('#test-container'));\n    });\n\n    it('convert module true to {}', function() {\n      let oldModules = Theme.DEFAULTS.modules;\n      Theme.DEFAULTS.modules = {\n        formula: true\n      };\n      let config = expandConfig('#test-container', {\n        modules: {\n          syntax: true\n        }\n      });\n      expect(config.modules.formula).toEqual({});\n      expect(config.modules.syntax).toEqual({ highlight: null, interval: 1000 });\n      Theme.DEFAULTS.modules = oldModules;\n    });\n\n    describe('theme defaults', function() {\n        it('for Snow', function() {\n            let config = expandConfig('#test-container', {\n                modules: {\n                    toolbar: true,\n                },\n                theme: 'snow'\n            });\n            expect(config.theme).toEqual(Snow);\n            expect(config.modules.toolbar.handlers.image).toEqual(Snow.DEFAULTS.modules.toolbar.handlers.image);\n        });\n\n        it('for false', function() {\n            let config = expandConfig('#test-container', {\n                theme: false\n            });\n            expect(config.theme).toEqual(Theme);\n        });\n\n        it('for undefined', function() {\n            let config = expandConfig('#test-container', {\n                theme: undefined\n            });\n            expect(config.theme).toEqual(Theme);\n        });\n\n        it('for null', function() {\n            let config = expandConfig('#test-container', {\n                theme: null\n            });\n            expect(config.theme).toEqual(Theme);\n        });\n    });\n\n    it('quill < module < theme < user', function() {\n      let oldTheme = Theme.DEFAULTS.modules;\n      let oldToolbar = Toolbar.DEFAULTS;\n      Toolbar.DEFAULTS = {\n        option: 2,\n        module: true\n      };\n      Theme.DEFAULTS.modules = {\n        toolbar: {\n          option: 1,\n          theme: true\n        }\n      };\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: {\n            option: 0,\n            user: true\n          }\n        }\n      });\n      expect(config.modules.toolbar).toEqual({\n        option: 0,\n        module: true,\n        theme: true,\n        user: true\n      });\n      Theme.DEFAULTS.modules = oldTheme;\n      Toolbar.DEFAULTS = oldToolbar;\n    });\n\n    it('toolbar default', function() {\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: true\n        }\n      });\n      expect(config.modules.toolbar).toEqual(Toolbar.DEFAULTS);\n    });\n\n    it('toolbar disabled', function() {\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: false\n        },\n        theme: 'snow'\n      });\n      expect(config.modules.toolbar).toBe(undefined);\n    });\n\n    it('toolbar selector', function() {\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: {\n            container: '#test-container'\n          }\n        }\n      });\n      expect(config.modules.toolbar).toEqual({\n        container: '#test-container',\n        handlers: Toolbar.DEFAULTS.handlers\n      });\n    });\n\n    it('toolbar container shorthand', function() {\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: document.querySelector('#test-container')\n        }\n      });\n      expect(config.modules.toolbar).toEqual({\n        container: document.querySelector('#test-container'),\n        handlers: Toolbar.DEFAULTS.handlers\n      });\n    });\n\n    it('toolbar format array', function() {\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: ['bold']\n        }\n      });\n      expect(config.modules.toolbar).toEqual({\n        container: ['bold'],\n        handlers: Toolbar.DEFAULTS.handlers\n      });\n    });\n\n    it('toolbar custom handler, default container', function() {\n      let handler = function() {};  // eslint-disable-line func-style\n      let config = expandConfig('#test-container', {\n        modules: {\n          toolbar: {\n            handlers: {\n              bold: handler\n            }\n          }\n        }\n      });\n      expect(config.modules.toolbar.container).toEqual(null);\n      expect(config.modules.toolbar.handlers.bold).toEqual(handler);\n      expect(config.modules.toolbar.handlers.clean).toEqual(Toolbar.DEFAULTS.handlers.clean);\n    });\n  });\n\n  describe('overload', function() {\n    it('(index:number, length:number)', function() {\n      let [index, length, formats, source] = overload(0, 1);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(index:number, length:number, format:string, value:boolean, source:string)', function() {\n      let [index, length, formats, source] = overload(0, 1, 'bold', true, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(index:number, length:number, format:string, value:string, source:string)', function() {\n      let [index, length, formats, source] = overload(0, 1, 'color', Quill.sources.USER, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ color: Quill.sources.USER });\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(index:number, length:number, format:string, value:string)', function() {\n      let [index, length, formats, source] = overload(0, 1, 'color', Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ color: Quill.sources.USER });\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(index:number, length:number, format:object)', function() {\n      let [index, length, formats, source] = overload(0, 1, { bold: true });\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(index:number, length:number, format:object, source:string)', function() {\n      let [index, length, formats, source] = overload(0, 1, { bold: true }, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(index:number, length:number, source:string)', function() {\n      let [index, length, formats, source] = overload(0, 1, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(index:number, source:string)', function() {\n      let [index, length, formats, source] = overload(0, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(0);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(range:range)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1));\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(range:range, format:string, value:boolean, source:string)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1), 'bold', true, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(range:range, format:string, value:string, source:string)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1), 'color', Quill.sources.API, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ color: Quill.sources.API });\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(range:range, format:string, value:string)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1), 'color', Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ color: Quill.sources.USER });\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(range:range, format:object)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1), { bold: true });\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(range:range, format:object, source:string)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1), { bold: true }, Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(range:range, source:string)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1), Quill.sources.USER);\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.USER);\n    });\n\n    it('(range:range)', function() {\n      let [index, length, formats, source] = overload(new Range(0, 1));\n      expect(index).toBe(0);\n      expect(length).toBe(1);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(range:range, dummy:number)', function() {\n      let [index, length, formats, source] = overload(new Range(10, 1), 0);\n      expect(index).toBe(10);\n      expect(length).toBe(1);\n      expect(formats).toEqual({});\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(range:range, dummy:number, format:string, value:boolean)', function() {\n      let [index, length, formats, source] = overload(new Range(10, 1), 0, 'bold', true);\n      expect(index).toBe(10);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.API);\n    });\n\n    it('(range:range, dummy:number, format:object, source:string)', function() {\n      let [index, length, formats, source] = overload(new Range(10, 1), 0, { bold: true }, Quill.sources.USER);\n      expect(index).toBe(10);\n      expect(length).toBe(1);\n      expect(formats).toEqual({ bold: true });\n      expect(source).toBe(Quill.sources.USER);\n    });\n  });\n\n  describe('placeholder', function() {\n    beforeEach(function() {\n      this.initialize(HTMLElement, '<div><p></p></div>');\n      this.quill = new Quill(this.container.firstChild, {\n        'placeholder': 'a great day to be a placeholder'\n      });\n      this.original = this.quill.getContents();\n    });\n\n    it('blank editor', function() {\n      expect(this.quill.root.dataset.placeholder).toEqual('a great day to be a placeholder');\n      expect(this.quill.root.classList).toContain('ql-blank');\n    });\n\n    it('with text', function() {\n      this.quill.setText('test');\n      expect(this.quill.root.classList).not.toContain('ql-blank');\n    });\n\n    it('formatted line', function() {\n      this.quill.formatLine(0, 1, 'list', 'ordered');\n      expect(this.quill.root.classList).not.toContain('ql-blank');\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/core/quill.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\n\n\ndescribe('Color', function() {\n  it('add', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    editor.formatText(1, 2, { color:  'red' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0')\n      .insert('12', { color: 'red' })\n      .insert('3\\n')\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<p>0<span style=\"color: red;\">12</span>3</p>');\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, '<p>0<strong style=\"color: red;\">12</strong>3</p>');\n    editor.formatText(1, 2, { color: false });\n    let delta = new Delta().insert('0').insert('12', { bold: true }).insert('3\\n');\n    expect(editor.getDelta()).toEqual(delta);\n    expect(editor.scroll.domNode).toEqualHTML('<p>0<strong>12</strong>3</p>');\n  });\n\n  it('remove unwrap', function() {\n    let editor = this.initialize(Editor, '<p>0<span style=\"color: red;\">12</span>3</p>');\n    editor.formatText(1, 2, { color: false });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123\\n'));\n    expect(editor.scroll.domNode).toEqualHTML('<p>0123</p>');\n  });\n\n  it('invalid scope', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    let initial = editor.scroll.domNode.innerHTML;\n    editor.formatText(4, 1, { color: 'red' });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123\\n'));\n    expect(editor.scroll.domNode).toEqualHTML(initial);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/color.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\nimport Link from '../../../formats/link';\n\n\ndescribe('Link', function() {\n  it('add', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    editor.formatText(1, 2, { link:  'https://quilljs.com' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0')\n      .insert('12', { link: 'https://quilljs.com' })\n      .insert('3\\n')\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<p>0<a href=\"https://quilljs.com\" target=\"_blank\">12</a>3</p>');\n  });\n\n  it('add invalid', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    editor.formatText(1, 2, { link: 'javascript:alert(0);' });  // eslint-disable-line no-script-url\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0')\n      .insert('12', { link: Link.SANITIZED_URL })\n      .insert('3\\n')\n    );\n  });\n\n  it('add non-whitelisted protocol', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    editor.formatText(1, 2, { link: 'gopher://quilljs.com' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0')\n      .insert('12', { link: Link.SANITIZED_URL })\n      .insert('3\\n')\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<p>0<a href=\"about:blank\" target=\"_blank\">12</a>3</p>');\n  });\n\n  it('change', function() {\n    let editor = this.initialize(Editor, '<p>0<a href=\"https://github.com\" target=\"_blank\">12</a>3</p>');\n    editor.formatText(1, 2, { link:  'https://quilljs.com' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0')\n      .insert('12', { link: 'https://quilljs.com' })\n      .insert('3\\n')\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<p>0<a href=\"https://quilljs.com\" target=\"_blank\">12</a>3</p>');\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, '<p>0<a class=\"ql-size-large\" href=\"https://quilljs.com\" target=\"_blank\">12</a>3</p>');\n    editor.formatText(1, 2, { link: false });\n    let delta = new Delta().insert('0').insert('12', { size: 'large' }).insert('3\\n');\n    expect(editor.getDelta()).toEqual(delta);\n    expect(editor.scroll.domNode).toEqualHTML('<p>0<span class=\"ql-size-large\">12</span>3</p>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/link.js","import Editor from '../../../core/editor';\n\n\ndescribe('Script', function() {\n  it('add', function() {\n    let editor = this.initialize(Editor, '<p>a<sup>2</sup> + b2 = c<sup>2</sup></p>');\n    editor.formatText(6, 1, { script: 'super' });\n    expect(editor.scroll.domNode).toEqualHTML('<p>a<sup>2</sup> + b<sup>2</sup> = c<sup>2</sup></p>');\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, '<p>a<sup>2</sup> + b<sup>2</sup></p>');\n    editor.formatText(1, 1, { script: false });\n    expect(editor.scroll.domNode).toEqualHTML('<p>a2 + b<sup>2</sup></p>');\n  });\n\n  it('replace', function() {\n    let editor = this.initialize(Editor, '<p>a<sup>2</sup> + b<sup>2</sup></p>');\n    editor.formatText(1, 1, { script: 'sub' });\n    expect(editor.scroll.domNode).toEqualHTML('<p>a<sub>2</sub> + b<sup>2</sup></p>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/script.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\n\n\ndescribe('Align', function() {\n  it('add', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    editor.formatText(4, 1, { align: 'center' });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { align: 'center' }));\n    expect(editor.scroll.domNode).toEqualHTML('<p class=\"ql-align-center\">0123</p>');\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, '<p class=\"ql-align-center\">0123</p>');\n    editor.formatText(4, 1, { align: false });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123\\n'));\n    expect(editor.scroll.domNode).toEqualHTML('<p>0123</p>');\n  });\n\n  it('whitelist', function() {\n    let editor = this.initialize(Editor, '<p class=\"ql-align-center\">0123</p>')\n    let initial = editor.scroll.domNode.innerHTML;\n    editor.formatText(4, 1, { align: 'middle' });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { align: 'center' }));\n    expect(editor.scroll.domNode).toEqualHTML(initial);\n  });\n\n  it('invalid scope', function() {\n    let editor = this.initialize(Editor, '<p>0123</p>');\n    let initial = editor.scroll.domNode.innerHTML;\n    editor.formatText(1, 2, { align: 'center' });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123\\n'));\n    expect(editor.scroll.domNode).toEqualHTML(initial);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/align.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\n\n\ndescribe('Code', function() {\n  it('newline', function() {\n    let editor = this.initialize(Editor, `\n      <pre></pre>\n      <p><br></p>\n      <pre>\\n</pre>\n      <p><br></p>\n      <pre>\\n\\n</pre>\n      <p><br></p>\n    `);\n    expect(editor.scroll.domNode).toEqualHTML(`\n      <pre>\\n</pre>\n      <p><br></p>\n      <pre>\\n</pre>\n      <p><br></p>\n      <pre>\\n\\n</pre>\n      <p><br></p>\n    `);\n  });\n\n  it('default child', function() {\n    let editor = this.initialize(Editor, '<p><br></p>');\n    editor.formatLine(0, 1, { 'code-block': true });\n    expect(editor.scroll.domNode.innerHTML).toEqual('<pre spellcheck=\"false\">\\n</pre>');\n  });\n\n  it('merge', function() {\n    let editor = this.initialize(Editor, `\n      <pre>0</pre>\n      <pre>0</pre>\n      <p><br></p>\n      <pre>0</pre>\n      <pre>1\\n</pre>\n      <p><br></p>\n      <pre>0</pre>\n      <pre>2\\n\\n</pre>\n      <p><br></p>\n      <pre>1\\n</pre>\n      <pre>0</pre>\n      <p><br></p>\n      <pre>1\\n</pre>\n      <pre>1\\n</pre>\n      <p><br></p>\n      <pre>1\\n</pre>\n      <pre>2\\n\\n</pre>\n      <p><br></p>\n      <pre>2\\n\\n</pre>\n      <pre>0</pre>\n      <p><br></p>\n      <pre>2\\n\\n</pre>\n      <pre>1\\n</pre>\n      <p><br></p>\n      <pre>2\\n\\n</pre>\n      <pre>2\\n\\n</pre>\n    `);\n    editor.scroll.lines().forEach(function(line) {\n      line.optimize();\n    })\n    expect(editor.scroll.domNode).toEqualHTML(`\n      <pre>0\\n0\\n</pre>\n      <p><br></p>\n      <pre>0\\n1\\n</pre>\n      <p><br></p>\n      <pre>0\\n2\\n\\n</pre>\n      <p><br></p>\n      <pre>1\\n0\\n</pre>\n      <p><br></p>\n      <pre>1\\n1\\n</pre>\n      <p><br></p>\n      <pre>1\\n2\\n\\n</pre>\n      <p><br></p>\n      <pre>2\\n\\n0\\n</pre>\n      <p><br></p>\n      <pre>2\\n\\n1\\n</pre>\n      <p><br></p>\n      <pre>2\\n\\n2\\n\\n</pre>\n    `);\n  });\n\n  it('merge multiple', function() {\n    let editor = this.initialize(Editor, `\n      <pre>0</pre>\n      <pre>1</pre>\n      <pre>2</pre>\n      <pre>3</pre>\n    `);\n    editor.scroll.children.head.optimize();\n    expect(editor.scroll.domNode).toEqualHTML(`\n      <pre>0\\n1\\n2\\n3\\n</pre>\n    `);\n  });\n\n  it('add', function() {\n    let editor = this.initialize(Editor, '<p><em>0123</em></p><p>5678</p>');\n    editor.formatLine(2, 5, { 'code-block': true });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123').insert('\\n', { 'code-block': true })\n      .insert('5678').insert('\\n', { 'code-block': true })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqual('<pre spellcheck=\"false\">0123\\n5678\\n</pre>');\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, { html: '<pre>0123\\n</pre>' });\n    editor.formatText(4, 1, { 'code-block': false });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123\\n'));\n    expect(editor.scroll.domNode).toEqualHTML('<p>0123</p>');\n  });\n\n  it('delete last', function() {\n    let editor = this.initialize(Editor, { html: '<p>0123</p><pre>\\n</pre><p>5678</p>' });\n    editor.deleteText(4, 1);\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { 'code-block': true }).insert('5678\\n'));\n    expect(editor.scroll.domNode).toEqualHTML('<pre>0123</pre><p>5678</p>');\n  });\n\n  it('delete merge before', function() {\n    let editor = this.initialize(Editor, { html: '<h1>0123</h1><pre>4567\\n</pre>' });\n    editor.deleteText(4, 1);\n    expect(editor.getDelta()).toEqual(new Delta().insert('01234567').insert('\\n', { 'code-block': true }));\n    expect(editor.scroll.domNode).toEqualHTML('<pre>01234567\\n</pre>');\n  });\n\n  it('delete merge after', function() {\n    let editor = this.initialize(Editor, { html: '<pre>0123\\n</pre><h1>4567</h1>' });\n    editor.deleteText(4, 1);\n    expect(editor.getDelta()).toEqual(new Delta().insert('01234567').insert('\\n', { header: 1 }));\n    expect(editor.scroll.domNode).toEqualHTML('<h1>01234567</h1>');\n  });\n\n  it('delete across before partial merge', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n34\\n67\\n</pre><h1>90</h1>' });\n    editor.deleteText(7, 3);\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { 'code-block': true })\n      .insert('34').insert('\\n', { 'code-block': true })\n      .insert('60').insert('\\n', { header: 1 })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqualHTML('<pre>01\\n34\\n</pre><h1>60</h1>');\n  });\n\n  it('delete across before no merge', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n34\\n</pre><h1>6789</h1>' });\n    editor.deleteText(3, 5);\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { 'code-block': true })\n      .insert('89').insert('\\n', { header: 1 })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqualHTML('<pre>01\\n</pre><h1>89</h1>');\n  });\n\n  it('delete across after', function() {\n    let editor = this.initialize(Editor, { html: '<h1>0123</h1><pre>56\\n89\\n</pre>' });\n    editor.deleteText(2, 4);\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('016').insert('\\n', { 'code-block': true })\n      .insert('89').insert('\\n', { 'code-block': true })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqualHTML('<pre>016\\n89\\n</pre>');\n  });\n\n  it('replace', function() {\n    let editor = this.initialize(Editor, { html: '<pre>0123\\n</pre>' });\n    editor.formatText(4, 1, { 'header': 1 });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { header: 1 }));\n    expect(editor.scroll.domNode).toEqualHTML('<h1>0123</h1>');\n  });\n\n  it('replace multiple', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n23\\n</pre>' });\n    editor.formatText(0, 6, { 'header': 1 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { header: 1 })\n      .insert('23').insert('\\n', { header: 1 })\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<h1>01</h1><h1>23</h1>');\n  });\n\n  it('format interior line', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n23\\n45\\n</pre>' });\n    editor.formatText(5, 1, { 'header': 1 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { 'code-block': true })\n      .insert('23').insert('\\n', { 'header': 1 })\n      .insert('45').insert('\\n', { 'code-block': true })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqual('<pre>01\\n</pre><h1>23</h1><pre>45\\n</pre>');\n  });\n\n  it('format imprecise bounds', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n23\\n45\\n</pre>' });\n    editor.formatText(1, 6, { 'header': 1 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { 'header': 1 })\n      .insert('23').insert('\\n', { 'header': 1 })\n      .insert('45').insert('\\n', { 'code-block': true })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqual('<h1>01</h1><h1>23</h1><pre>45\\n</pre>');\n  });\n\n  it('format without newline', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n23\\n45\\n</pre>' });\n    editor.formatText(3, 1, { 'header': 1 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { 'code-block': true })\n      .insert('23').insert('\\n', { 'code-block': true })\n      .insert('45').insert('\\n', { 'code-block': true })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqual('<pre>01\\n23\\n45\\n</pre>');\n  });\n\n  it('format line', function() {\n    let editor = this.initialize(Editor, { html: '<pre>01\\n23\\n45\\n</pre>' });\n    editor.formatLine(3, 1, { 'header': 1 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('01').insert('\\n', { 'code-block': true })\n      .insert('23').insert('\\n', { 'header': 1 })\n      .insert('45').insert('\\n', { 'code-block': true })\n    );\n    expect(editor.scroll.domNode.innerHTML).toEqual('<pre>01\\n</pre><h1>23</h1><pre>45\\n</pre>');\n  });\n\n  it('ignore formatAt', function() {\n    let editor = this.initialize(Editor, '<pre>0123</pre>');\n    editor.formatText(1, 1, { bold: true });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { 'code-block': true }));\n    expect(editor.scroll.domNode).toEqualHTML('<pre>0123</pre>');\n  });\n\n  it('partial block modification applyDelta', function() {\n    let editor = this.initialize(Editor, { html: '<pre>a\\nb\\n\\n</pre>' });\n    let delta = new Delta()\n      .retain(3)\n      .insert('\\n', { 'code-block': true })\n      .delete(1)\n      .retain(1, { 'code-block': null });\n    editor.applyDelta(delta);\n    expect(editor.scroll.domNode.innerHTML).toEqual('<pre>a\\nb\\n</pre><p><br></p>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/code.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\n\n\ndescribe('Header', function() {\n  it('add', function() {\n    let editor = this.initialize(Editor, '<p><em>0123</em></p>');\n    editor.formatText(4, 1, { header: 1 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123', { italic: true })\n      .insert('\\n', { header: 1 })\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<h1><em>0123</em></h1>');\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, '<h1><em>0123</em></h1>');\n    editor.formatText(4, 1, { header: false });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123', { italic: true })\n      .insert('\\n')\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<p><em>0123</em></p>');\n  });\n\n  it('change', function() {\n    let editor = this.initialize(Editor, '<h1><em>0123</em></h1>');\n    editor.formatText(4, 1, { header: 2 });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123', { italic: true })\n      .insert('\\n', { header: 2 })\n    );\n    expect(editor.scroll.domNode).toEqualHTML('<h2><em>0123</em></h2>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/header.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\n\n\ndescribe('Indent', function() {\n  it('+1', function() {\n    let editor = this.initialize(Editor, '<ul><li>0123</li></ul>');\n    editor.formatText(4, 1, { 'indent': '+1' });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { list: 'bullet', indent: 1 }));\n    expect(editor.scroll.domNode).toEqualHTML('<ul><li class=\"ql-indent-1\">0123</li></ul>');\n  });\n\n  it('-1', function() {\n    let editor = this.initialize(Editor, '<ul><li class=\"ql-indent-1\">0123</li></ul>');\n    editor.formatText(4, 1, { 'indent': '-1' });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123').insert('\\n', { list: 'bullet' }));\n    expect(editor.scroll.domNode).toEqualHTML('<ul><li>0123</li></ul>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/indent.js","import Delta from 'quill-delta';\nimport Editor from '../../../core/editor';\n\n\ndescribe('List', function() {\n  it('add', function() {\n    let editor = this.initialize(Editor, `\n      <p>0123</p>\n      <p>5678</p>\n      <p>0123</p>`\n    );\n    editor.formatText(9, 1, { list: 'ordered' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123\\n5678')\n      .insert('\\n', { list: 'ordered' })\n      .insert('0123\\n')\n    );\n    expect(this.container).toEqualHTML(`\n      <p>0123</p>\n      <ol><li>5678</li></ol>\n      <p>0123</p>\n    `);\n  });\n\n  it('checklist', function() {\n    let editor = this.initialize(Editor, `\n      <p>0123</p>\n      <p>5678</p>\n      <p>0123</p>\n    `);\n    editor.scroll.domNode.classList.add('ql-editor');\n    editor.formatText(4, 1, { list: 'checked' });\n    editor.formatText(9, 1, { list: 'unchecked' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'checked' })\n      .insert('5678')\n      .insert('\\n', { list: 'unchecked' })\n      .insert('0123\\n')\n    );\n    expect(this.container).toEqualHTML(`\n      <ul data-checked=\"true\">\n        <li>0123</li>\n      </ul>\n      <ul data-checked=\"false\">\n        <li>5678</li>\n      </ul>\n      <p>0123</p>\n    `);\n  });\n\n  it('remove', function() {\n    let editor = this.initialize(Editor, `\n      <p>0123</p>\n      <ol><li>5678</li></ol>\n      <p>0123</p>\n    `);\n    editor.formatText(9, 1, { list: null });\n    expect(editor.getDelta()).toEqual(new Delta().insert('0123\\n5678\\n0123\\n'));\n    expect(this.container).toEqualHTML(`\n      <p>0123</p>\n      <p>5678</p>\n      <p>0123</p>\n    `);\n  });\n\n  it('replace', function() {\n    let editor = this.initialize(Editor, `\n      <p>0123</p>\n      <ol><li>5678</li></ol>\n      <p>0123</p>\n    `);\n    editor.formatText(9, 1, { list: 'bullet' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123\\n5678')\n      .insert('\\n', { list: 'bullet' })\n      .insert('0123\\n')\n    );\n    expect(this.container).toEqualHTML(`\n      <p>0123</p>\n      <ul><li>5678</li></ul>\n      <p>0123</p>\n    `);\n  });\n\n  it('replace checklist with bullet', function() {\n    let editor = this.initialize(Editor, `\n      <ul data-checked=\"true\">\n        <li>0123</li>\n      </ul>\n    `);\n    editor.formatText(4, 1, { list: 'bullet' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'bullet' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ul><li>0123</li></ul>\n    `);\n  });\n\n  it('replace with attributes', function() {\n    let editor = this.initialize(Editor, '<ol><li class=\"ql-align-center\">0123</li></ol>');\n    editor.formatText(4, 1, { list: 'bullet' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123').insert('\\n', { align: 'center', list: 'bullet' })\n    );\n    expect(this.container).toEqualHTML('<ul><li class=\"ql-align-center\">0123</li></ul>');\n  });\n\n  it('format merge', function() {\n    let editor = this.initialize(Editor, `\n      <ol><li>0123</li></ol>\n      <p>5678</p>\n      <ol><li>0123</li></ol>\n    `);\n    editor.formatText(9, 1, { list: 'ordered' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n      .insert('5678')\n      .insert('\\n', { list: 'ordered' })\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ol>\n        <li>0123</li>\n        <li>5678</li>\n        <li>0123</li>\n      </ol>`\n    );\n  });\n\n  it('replace merge', function() {\n    let editor = this.initialize(Editor, `\n      <ol><li>0123</li></ol>\n      <ul><li>5678</li></ul>\n      <ol><li>0123</li></ol>`\n    );\n    editor.formatText(9, 1, { list: 'ordered' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n      .insert('5678')\n      .insert('\\n', { list: 'ordered' })\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ol>\n        <li>0123</li>\n        <li>5678</li>\n        <li>0123</li>\n      </ol>`\n    );\n  });\n\n  it('delete merge', function() {\n    let editor = this.initialize(Editor, `\n      <ol><li>0123</li></ol>\n      <p>5678</p>\n      <ol><li>0123</li></ol>`\n    );\n    editor.deleteText(5, 5);\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ol>\n        <li>0123</li>\n        <li>0123</li>\n      </ol>`\n    );\n  });\n\n  it('merge checklist', function() {\n    let editor = this.initialize(Editor, `\n      <ul data-checked=\"true\"><li>0123</li></ul>\n      <p>5678</p>\n      <ul data-checked=\"true\"><li>0123</li></ul>\n    `);\n    editor.formatText(9, 1, { list: 'checked' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'checked' })\n      .insert('5678')\n      .insert('\\n', { list: 'checked' })\n      .insert('0123')\n      .insert('\\n', { list: 'checked' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ul data-checked=\"true\">\n        <li>0123</li>\n        <li>5678</li>\n        <li>0123</li>\n      </ul>`\n    );\n  });\n\n  it('replace split', function() {\n    let editor = this.initialize(Editor, `\n      <ol>\n        <li>0123</li>\n        <li>5678</li>\n        <li>0123</li>\n      </ol>`\n    );\n    editor.formatText(9, 1,  { list: 'bullet' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n      .insert('5678')\n      .insert('\\n', { list: 'bullet' })\n      .insert('0123')\n      .insert('\\n', { list: 'ordered' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ol><li>0123</li></ol>\n      <ul><li>5678</li></ul>\n      <ol><li>0123</li></ol>`\n    );\n  });\n\n  it('split checklist', function() {\n    let editor = this.initialize(Editor, `\n      <ul>\n        <li>0123</li>\n        <li>5678</li>\n        <li>0123</li>\n      </ul>`\n    );\n    editor.formatText(9, 1,  { list: 'unchecked' });\n    expect(editor.getDelta()).toEqual(new Delta()\n      .insert('0123')\n      .insert('\\n', { list: 'bullet' })\n      .insert('5678')\n      .insert('\\n', { list: 'unchecked' })\n      .insert('0123')\n      .insert('\\n', { list: 'bullet' })\n    );\n    expect(this.container).toEqualHTML(`\n      <ul><li>0123</li></ul>\n      <ul data-checked=\"false\"><li>5678</li></ul>\n      <ul><li>0123</li></ul>`\n    );\n  });\n\n  it('empty line interop', function() {\n    let editor = this.initialize(Editor, '<ol><li><br></li></ol>');\n    editor.insertText(0, 'Test');\n    expect(this.container).toEqualHTML('<ol><li>Test</li></ol>');\n    editor.deleteText(0, 4);\n    expect(this.container).toEqualHTML('<ol><li><br></li></ol>');\n  });\n\n  it('delete multiple items', function() {\n    let editor = this.initialize(Editor, `\n      <ol>\n        <li>0123</li>\n        <li>5678</li>\n        <li>0123</li>\n      </ol>`\n    );\n    editor.deleteText(2, 5);\n    expect(this.container).toEqualHTML(`\n      <ol>\n        <li>0178</li>\n        <li>0123</li>\n      </ol>`\n    );\n  });\n\n  it('delete across last item', function() {\n    let editor = this.initialize(Editor, `\n      <ol><li>0123</li></ol>\n      <p>5678</p>`\n    );\n    editor.deleteText(2, 5);\n    expect(this.container).toEqualHTML('<p>0178</p>');\n  });\n\n  it('delete partial', function() {\n    let editor = this.initialize(Editor, '<p>0123</p><ul><li>5678</li></ul>');\n    editor.deleteText(2, 5);\n    expect(this.container).toEqualHTML('<ul><li>0178</li></ul>');\n  });\n\n  it('nested list replacement', function() {\n    let editor = this.initialize(Editor, `\n      <ol>\n        <li>One</li>\n        <li class='ql-indent-1'>Alpha</li>\n        <li>Two</li>\n      </ol>\n    `);\n    editor.formatLine(1, 10, { list: 'bullet' });\n    expect(this.container).toEqualHTML(`\n      <ul>\n        <li>One</li>\n        <li class='ql-indent-1'>Alpha</li>\n        <li>Two</li>\n      </ul>\n    `);\n  });\n\n  it('copy atttributes', function() {\n    let editor = this.initialize(Editor, '<p class=\"ql-align-center\">Test</p>');\n    editor.formatLine(4, 1, { list: 'bullet' });\n    expect(this.container).toEqualHTML('<ul><li class=\"ql-align-center\">Test</li></ul>');\n  });\n\n  it('insert block embed', function() {\n    let editor = this.initialize(Editor, '<ol><li>Test</li></ol>');\n    editor.insertEmbed(2, 'video', 'https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0');\n    expect(this.container).toEqualHTML(`\n      <ol><li>Te</li></ol>\n      <iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0\"></iframe>\n      <ol><li>st</li></ol>\n    `);\n  });\n\n  it('insert block embed at beginning', function() {\n    let editor = this.initialize(Editor, '<ol><li>Test</li></ol>');\n    editor.insertEmbed(0, 'video', 'https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0');\n    expect(this.container).toEqualHTML(`\n      <iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0\"></iframe>\n      <ol><li>Test</li></ol>\n    `);\n  });\n\n  it('insert block embed at end', function() {\n    let editor = this.initialize(Editor, '<ol><li>Test</li></ol>');\n    editor.insertEmbed(4, 'video', 'https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0');\n    expect(this.container).toEqualHTML(`\n      <ol><li>Test</li></ol>\n      <iframe class=\"ql-video\" frameborder=\"0\" allowfullscreen=\"true\" src=\"https://www.youtube.com/embed/QHH3iSeDBLo?showinfo=0\"></iframe>\n      <ol><li><br></li></ol>\n    `);\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/list.js","import Scroll from '../../../blots/scroll';\n\n\ndescribe('Bold', function() {\n  it('optimize and merge', function() {\n    let scroll = this.initialize(Scroll, '<p><strong>a</strong>b<strong>c</strong></p>');\n    let bold = document.createElement('b');\n    bold.appendChild(scroll.domNode.firstChild.childNodes[1]);\n    scroll.domNode.firstChild.insertBefore(bold, scroll.domNode.firstChild.lastChild);\n    scroll.update();\n    expect(scroll.domNode).toEqualHTML('<p><strong>abc</strong></p>');\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/formats/bold.js","import Delta from 'quill-delta';\nimport { Range } from '../../../core/selection';\nimport Quill from '../../../core';\n\n\ndescribe('Clipboard', function() {\n  describe('events', function() {\n    beforeEach(function() {\n      this.quill = this.initialize(Quill, '<h1>0123</h1><p>5<em>67</em>8</p>');\n      this.quill.setSelection(2, 5);\n    });\n\n    it('paste', function(done) {\n      this.quill.clipboard.container.innerHTML = '<strong>|</strong>';\n      this.quill.clipboard.onPaste({});\n      setTimeout(() => {\n        expect(this.quill.root).toEqualHTML('<p>01<strong>|</strong><em>7</em>8</p>');\n        expect(this.quill.getSelection()).toEqual(new Range(3));\n        done();\n      }, 2);\n    });\n\n    it('selection-change', function(done) {\n      let handler = {\n        change: function() {}\n      };\n      spyOn(handler, 'change');\n      this.quill.on('selection-change', handler.change);\n      this.quill.clipboard.container.innerHTML = '0';\n      this.quill.clipboard.onPaste({});\n      setTimeout(function() {\n        expect(handler.change).not.toHaveBeenCalled();\n        done();\n      }, 2);\n    });\n  });\n\n  describe('convert', function() {\n    beforeEach(function() {\n      let quill = this.initialize(Quill, '');\n      this.clipboard = quill.clipboard;\n    });\n\n    it('plain text', function() {\n      let delta = this.clipboard.convert('simple plain text');\n      expect(delta).toEqual(new Delta().insert('simple plain text'));\n    });\n\n    it('whitespace', function() {\n      let html =\n        '<div> 0 </div><div> <div> 1 2 <span> 3 </span> 4 </div> </div>' +\n        '<div><span>5 </span><span>6 </span><span> 7</span><span> 8</span></div>';\n      let delta = this.clipboard.convert(html);\n      expect(delta).toEqual(new Delta().insert('0\\n1 2  3  4\\n5 6  7 8'));\n    });\n\n    it('inline whitespace', function() {\n      let html = '<p>0 <strong>1</strong> 2</p>';\n      let delta = this.clipboard.convert(html);\n      expect(delta).toEqual(new Delta().insert('0 ').insert('1', { bold: true }).insert(' 2'));\n    });\n\n    it('intentional whitespace', function() {\n      let html = '<span>0&nbsp;<strong>1</strong>&nbsp;2</span>';\n      let delta = this.clipboard.convert(html);\n      expect(delta).toEqual(new Delta().insert('0\\u00a0').insert('1', { bold: true }).insert('\\u00a02'));\n    });\n\n    it('consecutive intentional whitespace', function() {\n      let html = '<strong>&nbsp;&nbsp;1&nbsp;&nbsp;</strong>';\n      let delta = this.clipboard.convert(html);\n      expect(delta).toEqual(new Delta().insert('\\u00a0\\u00a01\\u00a0\\u00a0', { bold: true }));\n    });\n\n    it('break', function() {\n      let html = '<div>0<br>1</div><div>2<br></div><div>3</div><div><br>4</div><div><br></div><div>5</div>';\n      let delta = this.clipboard.convert(html);\n      expect(delta).toEqual(new Delta().insert('0\\n1\\n2\\n3\\n\\n4\\n\\n5'));\n    });\n\n    it('mixed inline and block', function() {\n      let delta = this.clipboard.convert('<div>One<div>Two</div></div>');\n      expect(delta).toEqual(new Delta().insert('One\\nTwo'));\n    });\n\n    it('alias', function() {\n      let delta = this.clipboard.convert('<b>Bold</b><i>Italic</i>');\n      expect(delta).toEqual(new Delta().insert('Bold', { bold: true }).insert('Italic', { italic: true }));\n    });\n\n    it('pre', function() {\n      let html = '<div style=\"white-space: pre;\"> 01 \\n 23 </div>';\n      let delta = this.clipboard.convert(html);\n      expect(delta).toEqual(new Delta().insert(' 01 \\n 23 '));\n    });\n\n    it('nested list', function() {\n      let delta = this.clipboard.convert('<ol><li>One</li><li class=\"ql-indent-1\">Alpha</li></ol>');\n      expect(delta).toEqual(new Delta().insert('One\\n', { list: 'ordered' })\n                                       .insert('Alpha\\n', { list: 'ordered', indent: 1 }));\n    });\n\n    it('html nested list', function() {\n      let delta = this.clipboard.convert('<ol><li>One<ol><li>Alpha</li><li>Beta</li></ol></li></ol>');\n      expect(delta).toEqual(new Delta().insert('One\\nAlpha', { list: 'ordered' })\n                                       .insert('\\n', { list: 'ordered', indent: 1 })\n                                       .insert('Beta', { list: 'ordered' })\n                                       .insert('\\n', { list: 'ordered', indent: 1 }));\n    });\n\n    it('embeds', function() {\n      let delta = this.clipboard.convert('<div>01<img src=\"/assets/favicon.png\" height=\"200\" width=\"300\">34</div>');\n      let expected = new Delta()\n        .insert('01')\n        .insert({ image: '/assets/favicon.png' }, { height: '200', width: '300' })\n        .insert('34');\n      expect(delta).toEqual(expected);\n    });\n\n    it('block embed', function() {\n      let delta = this.clipboard.convert('<p>01</p><iframe src=\"#\"></iframe><p>34</p>');\n      expect(delta).toEqual(new Delta().insert('01\\n').insert({ video: '#' }).insert('34'));\n    });\n\n    it('attributor and style match', function() {\n      let delta = this.clipboard.convert('<p style=\"direction:rtl;\">Test</p>');\n      expect(delta).toEqual(new Delta().insert('Test\\n', { direction: 'rtl' }));\n    });\n\n    it('nested styles', function() {\n      let delta = this.clipboard.convert('<span style=\"color: red;\"><span style=\"color: blue;\">Test</span></span>');\n      expect(delta).toEqual(new Delta().insert('Test', { color: 'blue' }));\n    })\n\n    it('custom matcher', function() {\n      this.clipboard.addMatcher(Node.TEXT_NODE, function(node, delta) {\n        let index = 0;\n        let regex = /https?:\\/\\/[^\\s]+/g;\n        let match = null;\n        let composer = new Delta();\n        while ((match = regex.exec(node.data)) !== null) {\n          composer.retain(match.index - index);\n          index = regex.lastIndex;\n          composer.retain(match[0].length, { link: match[0] });\n        }\n        return delta.compose(composer);\n      });\n      let delta = this.clipboard.convert('http://github.com https://quilljs.com');\n      let expected = new Delta().insert('http://github.com', { link: 'http://github.com' })\n                                .insert(' ')\n                                .insert('https://quilljs.com', { link: 'https://quilljs.com' });\n      expect(delta).toEqual(expected);\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/modules/clipboard.js","import Delta from 'quill-delta';\nimport Quill from '../../../core';\nimport { getLastChangeIndex } from '../../../modules/history';\n\n\ndescribe('History', function() {\n  describe('getLastChangeIndex', function() {\n    it('delete', function() {\n      let delta = new Delta().retain(4).delete(2);\n      expect(getLastChangeIndex(delta)).toEqual(4);\n    });\n\n    it('delete with inserts', function() {\n      let delta = new Delta().retain(4).insert('test').delete(2);\n      expect(getLastChangeIndex(delta)).toEqual(8);\n    });\n\n    it('insert text', function() {\n      let delta = new Delta().retain(4).insert('testing');\n      expect(getLastChangeIndex(delta)).toEqual(11);\n    });\n\n    it('insert embed', function() {\n      let delta = new Delta().retain(4).insert({ image: true });\n      expect(getLastChangeIndex(delta)).toEqual(5);\n    });\n\n    it('insert with deletes', function() {\n      let delta = new Delta().retain(4).delete(3).insert('!');\n      expect(getLastChangeIndex(delta)).toEqual(5);\n    });\n\n    it('format', function() {\n      let delta = new Delta().retain(4).retain(3, { bold: true });\n      expect(getLastChangeIndex(delta)).toEqual(7);\n    });\n\n    it('format newline', function() {\n      let delta = new Delta().retain(4).retain(1, { align: 'left' });\n      expect(getLastChangeIndex(delta)).toEqual(4);\n    });\n\n    it('format mixed', function() {\n      let delta = new Delta().retain(4).retain(1, { align: 'left', bold: true });\n      expect(getLastChangeIndex(delta)).toEqual(4);\n    });\n\n    it('insert newline', function() {\n      let delta = new Delta().retain(4).insert('a\\n');\n      expect(getLastChangeIndex(delta)).toEqual(5);\n    });\n\n    it('mutliple newline inserts', function() {\n      let delta = new Delta().retain(4).insert('ab\\n\\n');\n      expect(getLastChangeIndex(delta)).toEqual(7);\n    });\n  });\n\n  describe('undo/redo', function() {\n    beforeEach(function() {\n      this.initialize(HTMLElement, '<div><p>The lazy fox</p></div>');\n      this.quill = new Quill(this.container.firstChild, {\n        modules: {\n          'history': { delay: 400 }\n        }\n      });\n      this.original = this.quill.getContents();\n    });\n\n    it('limits undo stack size', function () {\n      let quill = new Quill(this.container.firstChild, {\n        modules: {\n          history: { delay: 0, maxStack: 2 }\n        }\n      });\n      ['A', 'B', 'C'].forEach(function(text) {\n        quill.insertText(0, text)\n      });\n      expect(quill.history.stack.undo.length).toEqual(2);\n    });\n\n    it('user change', function() {\n      this.quill.root.firstChild.innerHTML = 'The lazy foxes';\n      this.quill.update();\n      let changed = this.quill.getContents();\n      expect(changed).not.toEqual(this.original);\n      this.quill.history.undo();\n      expect(this.quill.getContents()).toEqual(this.original);\n      this.quill.history.redo();\n      expect(this.quill.getContents()).toEqual(changed);\n    });\n\n    it('merge changes', function() {\n      expect(this.quill.history.stack.undo.length).toEqual(0);\n      this.quill.updateContents(new Delta().retain(12).insert('e'));\n      expect(this.quill.history.stack.undo.length).toEqual(1);\n      this.quill.updateContents(new Delta().retain(13).insert('s'));\n      expect(this.quill.history.stack.undo.length).toEqual(1);\n      this.quill.history.undo();\n      expect(this.quill.getContents()).toEqual(this.original);\n      expect(this.quill.history.stack.undo.length).toEqual(0);\n    });\n\n    it('dont merge changes', function(done) {\n      expect(this.quill.history.stack.undo.length).toEqual(0);\n      this.quill.updateContents(new Delta().retain(12).insert('e'));\n      expect(this.quill.history.stack.undo.length).toEqual(1);\n      setTimeout(() => {\n        this.quill.updateContents(new Delta().retain(13).insert('s'));\n        expect(this.quill.history.stack.undo.length).toEqual(2);\n        done();\n      }, this.quill.history.options.delay * 1.25);\n    });\n\n    it('multiple undos', function(done) {\n      expect(this.quill.history.stack.undo.length).toEqual(0);\n      this.quill.updateContents(new Delta().retain(12).insert('e'));\n      let contents = this.quill.getContents();\n      setTimeout(() => {\n        this.quill.updateContents(new Delta().retain(13).insert('s'));\n        this.quill.history.undo();\n        expect(this.quill.getContents()).toEqual(contents);\n        this.quill.history.undo();\n        expect(this.quill.getContents()).toEqual(this.original);\n        done();\n      }, this.quill.history.options.delay * 1.25);\n    });\n\n    it('transform api change', function() {\n      this.quill.history.options.userOnly = true;\n      this.quill.updateContents(new Delta().retain(12).insert('es'), Quill.sources.USER);\n      this.quill.history.lastRecorded = 0;\n      this.quill.updateContents(new Delta().retain(14).insert('!'), Quill.sources.USER);\n      this.quill.history.undo();\n      this.quill.updateContents(new Delta().retain(4).delete(5), Quill.sources.API);\n      expect(this.quill.getContents()).toEqual(new Delta().insert('The foxes\\n'));\n      this.quill.history.undo();\n      expect(this.quill.getContents()).toEqual(new Delta().insert('The fox\\n'));\n      this.quill.history.redo();\n      expect(this.quill.getContents()).toEqual(new Delta().insert('The foxes\\n'));\n      this.quill.history.redo();\n      expect(this.quill.getContents()).toEqual(new Delta().insert('The foxes!\\n'));\n    });\n\n    it('transform preserve intention', function() {\n      let url = 'https://www.google.com/';\n      this.quill.history.options.userOnly = true;\n      this.quill.updateContents(new Delta().insert(url, { link: url }), Quill.sources.USER);\n      this.quill.history.lastRecorded = 0;\n      this.quill.updateContents(new Delta().delete(url.length).insert('Google', { link: url }), Quill.sources.API);\n      this.quill.history.lastRecorded = 0;\n      this.quill.updateContents(new Delta().retain(this.quill.getLength()-1).insert('!'), Quill.sources.USER);\n      this.quill.history.lastRecorded = 0;\n      expect(this.quill.getContents()).toEqual(new Delta().insert('Google', { link: url }).insert('The lazy fox!\\n'));\n      this.quill.history.undo();\n      expect(this.quill.getContents()).toEqual(new Delta().insert('Google', { link: url }).insert('The lazy fox\\n'));\n      this.quill.history.undo();\n      expect(this.quill.getContents()).toEqual(new Delta().insert('Google', { link: url }).insert('The lazy fox\\n'));\n    });\n\n    it('ignore remote changes', function() {\n      this.quill.history.options.delay = 0;\n      this.quill.history.options.userOnly = true;\n      this.quill.setText('\\n');\n      this.quill.insertText(0, 'a', Quill.sources.USER);\n      this.quill.insertText(1, 'b', Quill.sources.API);\n      this.quill.insertText(2, 'c', Quill.sources.USER);\n      this.quill.insertText(3, 'd', Quill.sources.API);\n      expect(this.quill.getText()).toEqual('abcd\\n');\n      this.quill.history.undo();\n      expect(this.quill.getText()).toEqual('abd\\n');\n      this.quill.history.undo();\n      expect(this.quill.getText()).toEqual('bd\\n');\n      this.quill.history.redo();\n      expect(this.quill.getText()).toEqual('abd\\n');\n      this.quill.history.redo();\n      expect(this.quill.getText()).toEqual('abcd\\n');\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/modules/history.js","import Keyboard, { SHORTKEY } from '../../../modules/keyboard';\n\n\ndescribe('Keyboard', function() {\n  describe('match', function() {\n    it('no modifiers', function() {\n      let binding = {\n        key: 'a'\n      };\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(true);\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: true,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(false);\n    });\n\n    it('simple modifier', function() {\n      let binding = {\n        key: 'a',\n        shiftKey: true\n      };\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(false);\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: true,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(true);\n    });\n\n    it('optional modifier', function() {\n      let binding = {\n        key: 'a',\n        shiftKey: null\n      };\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(true);\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: true,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(true);\n    });\n\n    it('shortkey modifier', function() {\n      let binding = {\n        key: 'a',\n        shortKey: true\n      };\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(false);\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false,\n        [SHORTKEY]: true\n      }, binding)).toBe(true);\n    });\n\n    it('native shortkey modifier', function() {\n      let binding = {\n        key: 'a',\n        [SHORTKEY]: true\n      };\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }, binding)).toBe(false);\n      expect(Keyboard.match({\n        keyCode: 'A'.charCodeAt(0),\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false,\n        [SHORTKEY]: true\n      }, binding)).toBe(true);\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/modules/keyboard.js","import Quill from '../../../core/quill';\nimport { addControls } from '../../../modules/toolbar';\n\n\ndescribe('Toolbar', function() {\n  describe('add controls', function() {\n    it('single level', function() {\n      addControls(this.container, ['bold', 'italic']);\n      expect(this.container).toEqualHTML(`\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-bold\"></button>\n          <button type=\"button\" class=\"ql-italic\"></button>\n        </span>\n      `);\n    });\n\n    it('nested group', function() {\n      addControls(this.container, [['bold', 'italic'], ['underline', 'strike']]);\n      expect(this.container).toEqualHTML(`\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-bold\"></button>\n          <button type=\"button\" class=\"ql-italic\"></button>\n        </span>\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-underline\"></button>\n          <button type=\"button\" class=\"ql-strike\"></button>\n        </span>\n      `);\n    });\n\n    it('button value', function() {\n      addControls(this.container, ['bold', { header: '2' }]);\n      expect(this.container).toEqualHTML(`\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-bold\"></button>\n          <button type=\"button\" class=\"ql-header\" value=\"2\"></button>\n        </span>\n      `);\n    });\n\n    it('select', function() {\n      addControls(this.container, [{ size: ['10px', false, '18px', '32px'] }]);\n      expect(this.container).toEqualHTML(`\n        <span class=\"ql-formats\">\n          <select class=\"ql-size\">\n            <option value=\"10px\"></option>\n            <option selected=\"selected\"></option>\n            <option value=\"18px\"></option>\n            <option value=\"32px\"></option>\n          </select>\n        </span>\n      `);\n    });\n\n    it('everything', function() {\n      addControls(this.container, [\n        [{ font: [false, 'sans-serif', 'monospace']}, { size: ['10px', false, '18px', '32px'] }],\n        ['bold', 'italic', 'underline', 'strike'],\n        [{ list: 'ordered' }, { list: 'bullet' }, { align: [false, 'center', 'right', 'justify'] }],\n        ['link', 'image']\n      ]);\n      expect(this.container).toEqualHTML(`\n        <span class=\"ql-formats\">\n          <select class=\"ql-font\">\n            <option selected=\"selected\"></option>\n            <option value=\"sans-serif\"></option>\n            <option value=\"monospace\"></option>\n          </select>\n          <select class=\"ql-size\">\n            <option value=\"10px\"></option>\n            <option selected=\"selected\"></option>\n            <option value=\"18px\"></option>\n            <option value=\"32px\"></option>\n          </select>\n        </span>\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-bold\"></button>\n          <button type=\"button\" class=\"ql-italic\"></button>\n          <button type=\"button\" class=\"ql-underline\"></button>\n          <button type=\"button\" class=\"ql-strike\"></button>\n        </span>\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-list\" value=\"ordered\"></button>\n          <button type=\"button\" class=\"ql-list\" value=\"bullet\"></button>\n          <select class=\"ql-align\">\n            <option selected=\"selected\"></option>\n            <option value=\"center\"></option>\n            <option value=\"right\"></option>\n            <option value=\"justify\"></option>\n          </select>\n        </span>\n        <span class=\"ql-formats\">\n          <button type=\"button\" class=\"ql-link\"></button>\n          <button type=\"button\" class=\"ql-image\"></button>\n        </span>\n      `);\n    });\n  });\n\n  describe('active', function() {\n    beforeEach(function() {\n      let container = this.initialize(HTMLElement, `\n        <p>0123</p>\n        <p><strong>5678</strong></p>\n        <p><a href=\"http://quilljs.com/\">0123</a></p>\n        <p class=\"ql-align-center\">5678</p>\n        <p><span class=\"ql-size-small\">01</span><span class=\"ql-size-large\">23</span></p>\n      `);\n      this.quill = new Quill(container, {\n        modules: {\n          toolbar: [\n            ['bold', 'link'],\n            [{ 'size': ['small', false, 'large'] }],\n            [{ 'align': '' }, { 'align': 'center' }]\n          ]\n        },\n        theme: 'snow'\n      });\n    });\n\n    it('toggle button', function() {\n      let boldButton = this.container.parentNode.querySelector('button.ql-bold');\n      this.quill.setSelection(7);\n      expect(boldButton.classList.contains('ql-active')).toBe(true);\n      this.quill.setSelection(2);\n      expect(boldButton.classList.contains('ql-active')).toBe(false);\n    });\n\n    it('link', function() {\n      let linkButton = this.container.parentNode.querySelector('button.ql-link');\n      this.quill.setSelection(12);\n      expect(linkButton.classList.contains('ql-active')).toBe(true);\n      this.quill.setSelection(2);\n      expect(linkButton.classList.contains('ql-active')).toBe(false);\n    });\n\n    it('dropdown', function() {\n      let sizeSelect = this.container.parentNode.querySelector('select.ql-size');\n      this.quill.setSelection(21);\n      expect(sizeSelect.selectedIndex).toEqual(0);\n      this.quill.setSelection(23);\n      expect(sizeSelect.selectedIndex).toEqual(2);\n      this.quill.setSelection(21, 2);\n      expect(sizeSelect.selectedIndex).toBeLessThan(0);\n      this.quill.setSelection(2);\n      expect(sizeSelect.selectedIndex).toEqual(1);\n    });\n\n    it('custom button', function() {\n      let centerButton = this.container.parentNode.querySelector('button.ql-align[value=\"center\"]');\n      let leftButton = this.container.parentNode.querySelector('button.ql-align[value]');\n      this.quill.setSelection(17);\n      expect(centerButton.classList.contains('ql-active')).toBe(true);\n      expect(leftButton.classList.contains('ql-active')).toBe(false);\n      this.quill.setSelection(2);\n      expect(centerButton.classList.contains('ql-active')).toBe(false);\n      expect(leftButton.classList.contains('ql-active')).toBe(true);\n      this.quill.blur();\n      expect(centerButton.classList.contains('ql-active')).toBe(false);\n      expect(leftButton.classList.contains('ql-active')).toBe(false);\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/modules/toolbar.js","import Keyboard from '../../../modules/keyboard';\nimport Picker from '../../../ui/picker';\n\nfunction createKeydownEvent(keyCode) {\n  let event;\n  if (typeof Event === 'function') {\n    event = new Event('keydown', {\n      bubbles: true,\n      cancelable: true,\n    });\n    Object.defineProperty(event, 'keyCode', {'value': keyCode});\n  } else if (typeof Event === 'object') {     // IE11\n    event = document.createEvent('Event');\n    Object.defineProperty(event, 'keyCode', {'value': keyCode});\n    event.initEvent('keydown', true, true);\n  }\n  return event;\n}\n\ndescribe('Picker', function() {\n  beforeEach(function () {\n    this.container.innerHTML = '<select><option selected>0</option><option value=\"1\">1</option></select>';\n    this.pickerSelectorInstance = new Picker(this.container.firstChild);\n    this.pickerSelector = this.container.querySelector('.ql-picker');\n  });\n\n  it('initialization', function() {\n    expect(this.container.querySelector('.ql-picker')).toBeTruthy();\n    expect(this.container.querySelector('.ql-active')).toBeFalsy();\n    expect(this.container.querySelector('.ql-picker-item.ql-selected').outerHTML).toEqualHTML('<span tabindex=\"0\" role=\"button\" class=\"ql-picker-item ql-selected\" data-label=\"0\"></span>');\n    expect(this.container.querySelector('.ql-picker-item:not(.ql-selected)').outerHTML).toEqualHTML('<span tabindex=\"0\" role=\"button\" class=\"ql-picker-item\" data-value=\"1\" data-label=\"1\"></span>');\n  });\n\n  it('escape charcters', function() {\n    let select = document.createElement('select');\n    let option = document.createElement('option');\n    this.container.appendChild(select);\n    select.appendChild(option);\n    let value = '\"Helvetica Neue\", \\'Helvetica\\', sans-serif';\n    option.value = value;\n    value = value.replace(/\\\"/g, '\\\\\"');\n    expect(select.querySelector(`option[value=\"${value}\"]`)).toEqual(option);\n  });\n\n  it('label is initialized with the correct aria attributes', function() {\n    expect(this.pickerSelector.querySelector('.ql-picker-label').getAttribute('aria-expanded')).toEqual('false');\n    const optionsId = this.pickerSelector.querySelector('.ql-picker-options').id;\n    expect(this.pickerSelector.querySelector('.ql-picker-label').getAttribute('aria-controls')).toEqual(optionsId);\n  });\n\n  it('options container is initialized with the correct aria attributes', function() {\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('true');\n\n    const ariaControlsLabel = this.pickerSelector.querySelector('.ql-picker-label').getAttribute('aria-controls');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').id).toEqual(ariaControlsLabel);\n    expect(this.pickerSelector.querySelector('.ql-picker-options').tabIndex).toEqual(-1);\n  });\n\n  it('aria attributes toggle correctly when the picker is opened via enter key', function() {\n    const pickerLabel = this.pickerSelector.querySelector('.ql-picker-label');\n\n    // Select picker via enter key\n    const e = createKeydownEvent(Keyboard.keys.ENTER);\n    pickerLabel.dispatchEvent(e);\n\n    expect(pickerLabel.getAttribute('aria-expanded')).toEqual('true');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('false');\n  });\n\n  it('aria attributes toggle correctly when the picker is opened via mousedown', function() {\n    const pickerLabel = this.pickerSelector.querySelector('.ql-picker-label');\n\n    // Select picker via enter key\n    let e;\n    if (typeof Event === 'function') {\n      e = new Event('mousedown', {\n        bubbles: true,\n        cancelable: true,\n      });\n    } else if (typeof Event === 'object') {     // IE11\n      e = document.createEvent('Event');\n      e.initEvent('mousedown', true, true);\n    }\n\n    pickerLabel.dispatchEvent(e);\n\n    expect(pickerLabel.getAttribute('aria-expanded')).toEqual('true');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('false');\n  });\n\n  it('aria attributes toggle correctly when an item is selected via click', function() {\n    const pickerLabel = this.pickerSelector.querySelector('.ql-picker-label');\n    pickerLabel.click();\n\n    const pickerItem = this.pickerSelector.querySelector('.ql-picker-item');\n    pickerItem.click();\n\n    expect(pickerLabel.getAttribute('aria-expanded')).toEqual('false');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('true');\n    expect(pickerLabel.textContent.trim()).toEqual(pickerItem.textContent.trim());\n  });\n\n  it('aria attributes toggle correctly when an item is selected via enter', function() {\n    const pickerLabel = this.pickerSelector.querySelector('.ql-picker-label');\n    pickerLabel.click();\n\n    const pickerItem = this.pickerSelector.querySelector('.ql-picker-item');\n    // Select picker item via enter key\n    const e = createKeydownEvent(Keyboard.keys.ENTER);\n    pickerItem.dispatchEvent(e);\n\n    expect(pickerLabel.getAttribute('aria-expanded')).toEqual('false');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('true');\n    expect(pickerLabel.textContent.trim()).toEqual(pickerItem.textContent.trim());\n  });\n\n  it('aria attributes toggle correctly when the picker is closed via clicking on the label again', function() {\n    const pickerLabel = this.pickerSelector.querySelector('.ql-picker-label');\n    pickerLabel.click();\n    pickerLabel.click();\n    expect(pickerLabel.getAttribute('aria-expanded')).toEqual('false');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('true');\n  });\n\n  it('aria attributes toggle correctly when the picker is closed via escaping out of it', function() {\n    const pickerLabel = this.pickerSelector.querySelector('.ql-picker-label');\n    pickerLabel.click();\n\n    // Escape out of the picker\n    const e = createKeydownEvent(Keyboard.keys.ESCAPE);\n    pickerLabel.dispatchEvent(e);\n\n    expect(pickerLabel.getAttribute('aria-expanded')).toEqual('false');\n    expect(this.pickerSelector.querySelector('.ql-picker-options').getAttribute('aria-hidden')).toEqual('true');\n  });\n\n  afterEach(function() {\n    this.pickerSelectorInstance = null;\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/ui/picker.js","import Quill from '../../../../core';\nimport { BaseTooltip } from '../../../../themes/base'\n\nclass Tooltip extends BaseTooltip {\n}\n\nTooltip.TEMPLATE = '<input type=\"text\">';\n\ndescribe('BaseTooltip', function() {\n  describe('save', function() {\n    beforeEach(function() {\n      this.quill = this.initialize(Quill, '');\n      this.tooltip = new Tooltip(this.quill)\n    });\n\n    it('converts youtube video url to embedded', function() {\n      insertVideo(this.tooltip, 'http://youtube.com/watch?v=QHH3iSeDBLo');\n      expect(this.container.querySelector('.ql-video').src).toContain('http://www.youtube.com/embed/QHH3iSeDBLo');\n    });\n\n    it('converts www.youtube video url to embedded', function() {\n      insertVideo(this.tooltip, 'http://www.youtube.com/watch?v=QHH3iSeDBLo');\n      expect(this.container.querySelector('.ql-video').src).toContain('http://www.youtube.com/embed/QHH3iSeDBLo');\n    });\n\n    it('converts m.youtube video url to embedded', function() {\n      insertVideo(this.tooltip, 'http://m.youtube.com/watch?v=QHH3iSeDBLo');\n      expect(this.container.querySelector('.ql-video').src).toContain('http://www.youtube.com/embed/QHH3iSeDBLo');\n    });\n\n    it('preserves youtube video url protocol', function() {\n      insertVideo(this.tooltip, 'https://m.youtube.com/watch?v=QHH3iSeDBLo');\n      expect(this.container.querySelector('.ql-video').src).toContain('https://www.youtube.com/embed/QHH3iSeDBLo');\n    });\n\n    it('uses https as default youtube video url protocol', function() {\n      insertVideo(this.tooltip, 'youtube.com/watch?v=QHH3iSeDBLo');\n      expect(this.container.querySelector('.ql-video').src).toContain('https://www.youtube.com/embed/QHH3iSeDBLo');\n    });\n\n    it('converts vimeo video url to embedded', function() {\n      insertVideo(this.tooltip, 'http://vimeo.com/47762693');\n      expect(this.container.querySelector('.ql-video').src).toContain('http://player.vimeo.com/video/47762693/');\n    });\n\n    it('converts www.vimeo video url to embedded', function() {\n      insertVideo(this.tooltip, 'http://www.vimeo.com/47762693');\n      expect(this.container.querySelector('.ql-video').src).toContain('http://player.vimeo.com/video/47762693/');\n    });\n\n    it('preserves vimeo video url protocol', function() {\n      insertVideo(this.tooltip, 'https://www.vimeo.com/47762693');\n      expect(this.container.querySelector('.ql-video').src).toContain('https://player.vimeo.com/video/47762693/');\n    });\n\n    it('uses https as default vimeo video url protocol', function() {\n      insertVideo(this.tooltip, 'vimeo.com/47762693');\n      expect(this.container.querySelector('.ql-video').src).toContain('https://player.vimeo.com/video/47762693/');\n    });\n\n    function insertVideo(tooltip, url) {\n      tooltip.textbox.value = url;\n      tooltip.root.setAttribute('data-mode', 'video');\n      tooltip.save();\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./test/unit/theme/base/tooltip.js"],"sourceRoot":""}