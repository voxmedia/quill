{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap f3e82c5b9367de7d46ed","webpack:///./node_modules/parchment/src/parchment.ts","webpack:///./node_modules/parchment/src/registry.ts","webpack:///./node_modules/quill-delta/lib/delta.js","webpack:///./node_modules/extend/index.js","webpack:///./blots/block.js","webpack:///./core/quill.js","webpack:///./blots/inline.js","webpack:///./blots/text.js","webpack:///./core/emitter.js","webpack:///./core/module.js","webpack:///./core/logger.js","webpack:///./node_modules/deep-equal/index.js","webpack:///./node_modules/parchment/src/attributor/attributor.ts","webpack:///./core/editor.js","webpack:///./core/selection.js","webpack:///./formats/code.js","webpack:///./node_modules/parchment/src/blot/abstract/container.ts","webpack:///./node_modules/parchment/src/blot/abstract/format.ts","webpack:///./node_modules/parchment/src/blot/abstract/leaf.ts","webpack:///./node_modules/quill-delta/lib/op.js","webpack:///./blots/break.js","webpack:///./node_modules/clone/clone.js","webpack:///./blots/scroll.js","webpack:///./modules/keyboard.js","webpack:///./blots/cursor.js","webpack:///./blots/container.js","webpack:///./formats/color.js","webpack:///./core.js","webpack:///./node_modules/parchment/src/blot/abstract/shadow.ts","webpack:///./node_modules/parchment/src/attributor/store.ts","webpack:///./node_modules/parchment/src/attributor/class.ts","webpack:///./node_modules/parchment/src/attributor/style.ts","webpack:///./core/theme.js","webpack:///./blots/embed.js","webpack:///./formats/align.js","webpack:///./formats/background.js","webpack:///./formats/direction.js","webpack:///./formats/font.js","webpack:///./formats/size.js","webpack:///./modules/history.js","webpack:///./node_modules/parchment/src/collection/linked-list.ts","webpack:///./node_modules/parchment/src/blot/scroll.ts","webpack:///./node_modules/parchment/src/blot/inline.ts","webpack:///./node_modules/parchment/src/blot/block.ts","webpack:///./node_modules/parchment/src/blot/embed.ts","webpack:///./node_modules/parchment/src/blot/text.ts","webpack:///./core/polyfill.js","webpack:///./node_modules/fast-diff/diff.js","webpack:///./node_modules/deep-equal/lib/keys.js","webpack:///./node_modules/deep-equal/lib/is_arguments.js","webpack:///./node_modules/eventemitter3/index.js","webpack:///./modules/clipboard.js"],"names":["NEWLINE_LENGTH","BlockEmbed","attributes","Attributor","Store","domNode","insert","value","formats","values","name","attribute","query","Scope","BLOCK_ATTRIBUTE","index","length","format","def","endsWith","block","create","Block","blotName","parent","insertBefore","next","insertAt","slice","Embed","scope","BLOCK_BLOT","cache","delta","descendants","Leaf","reduce","leaf","bubbleFormats","BLOCK","Math","min","lines","split","text","shift","children","tail","line","blot","ref","head","remove","source","moveChildren","target","merge","context","child","force","clone","tagName","defaultChild","allowedChildren","statics","default","debug","Quill","limit","level","node","__quill","find","imports","error","path","overwrite","attrName","register","Object","keys","forEach","key","warn","startsWith","container","options","expandConfig","html","innerHTML","trim","classList","add","root","addContainer","setAttribute","scrollingContainer","emitter","scroll","whitelist","editor","selection","theme","keyboard","addModule","clipboard","history","init","on","events","EDITOR_CHANGE","type","TEXT_CHANGE","toggle","isBlank","SCROLL_UPDATE","mutations","range","lastRange","undefined","modify","call","update","contents","convert","setContents","clear","placeholder","readOnly","disable","refNode","className","document","createElement","setRange","overload","deleteText","enable","enabled","scrollTop","focus","scrollIntoView","sources","API","getSelection","change","formatLine","formatText","setSelection","SILENT","bounds","getBounds","containerBounds","getBoundingClientRect","bottom","top","height","left","right","width","getLength","getContents","getFormat","offset","Number","MAX_VALUE","modules","getRange","getText","hasFocus","embed","insertEmbed","insertText","contains","off","apply","arguments","once","dangerouslyPasteHTML","removeFormat","deleted","applied","applyDelta","lastOp","ops","delete","ret","compose","USER","DEFAULTS","strict","version","userConfig","import","Error","themeConfig","config","module","moduleNames","concat","moduleConfig","moduleClass","toolbar","constructor","querySelector","modifier","isEnabled","oldDelta","shiftRange","args","emit","start","end","map","pos","transformPosition","max","Inline","compare","BLOT","isolate","wrap","self","other","selfIndex","order","indexOf","otherIndex","TextBlot","Text","EVENTS","eventName","addEventListener","querySelectorAll","handleDOM","Emitter","listeners","log","event","handler","push","SCROLL_BEFORE_UPDATE","SCROLL_OPTIMIZE","SELECTION_CHANGE","Module","quill","levels","method","namespace","ns","logger","bind","console","newLevel","ASCII","Editor","getDelta","consumeNextNewline","scrollLength","batchStart","normalizeDelta","op","retain","descendant","diff","formatAt","deleteAt","batchEnd","lengthRemaining","lineLength","codeIndex","codeLength","newlineIndex","optimize","leaves","formatsArr","blots","combineFormats","filter","join","replace","suffixLength","suffix","cursorIndex","data","match","textBlot","oldValue","CONTENTS","oldText","newText","diffDelta","combined","merged","Array","isArray","image","list","bullet","Range","Selection","composing","mouseDown","cursor","savedRange","handleComposition","handleDragging","listenDOM","setTimeout","native","getNativeRange","textNode","setNativeRange","ignored","startNode","startOffset","endNode","endOffset","restore","body","nativeRange","collapsed","after","attach","position","createRange","setStart","setEnd","side","rect","rangeCount","getRangeAt","normalizeNative","info","normalized","normalizedToRange","activeElement","positions","indexes","Container","startContainer","endContainer","childNodes","lastChild","i","first","last","scrollBounds","parentNode","removeAllRanges","addRange","blur","rangeToNative","oldRange","e","Code","CodeBlock","textContent","frag","nextNewline","prevNewline","isolateLength","mergeInto","searchIndex","reverse","lastIndexOf","appendChild","prev","removeChild","unwrap","TAB","Break","isLine","Scroll","batch","INLINE_BLOT","wrapper","pop","getLines","lengthLeft","forEachAt","observer","takeRecords","SHORTKEY","test","navigator","platform","Keyboard","evt","binding","normalize","some","which","keyCode","bindings","addBinding","ENTER","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","BACKSPACE","handleBackspace","DELETE","handleDelete","prefix","handleDeleteRange","listen","defaultPrevented","getLine","getLeaf","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","prevented","every","preventDefault","ESCAPE","LEFT","UP","RIGHT","DOWN","makeFormatHandler","indent","makeCodeBlockHandler","cutoff","updateContents","header","makeEmbedArrowHandler","where","curFormats","prevFormats","nextLength","nextFormats","firstFormats","lastFormats","lineFormats","scrollIndex","getIndex","toUpperCase","shortKey","charCodeAt","Cursor","createTextNode","_length","restoreText","mutation","ColorAttributor","component","parseInt","toString","Style","ColorClass","Class","INLINE","ColorStyle","Theme","themes","GUARD_TEXT","contentNode","childNode","leftGuard","rightGuard","prevLength","AlignAttribute","Attribute","AlignClass","AlignStyle","BackgroundClass","BackgroundStyle","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyleAttributor","FontStyle","SizeClass","SizeStyle","History","lastRecorded","ignoreChange","userOnly","record","transform","undo","redo","dest","stack","getLastChangeIndex","changeDelta","undoDelta","timestamp","Date","now","delay","maxStack","endsWithNewlineChange","attr","deleteLength","changeIndex","elem","_toggle","DOMTokenList","prototype","token","String","searchString","substr","subjectString","isFinite","floor","lastIndex","defineProperty","predicate","TypeError","thisArg","execCommand","DOM_KEY","CLIPBOARD_CONFIG","Node","TEXT_NODE","matchText","matchNewline","matchBreak","ELEMENT_NODE","matchBlot","matchSpacing","matchAttributor","matchStyles","matchIndent","matchAlias","matchIgnore","ATTRIBUTE_ATTRIBUTORS","memo","keyName","STYLE_ATTRIBUTORS","Clipboard","onPaste","matchers","selector","matcher","matchVisual","addMatcher","innerText","prepareMatching","elementMatchers","textMatchers","traverse","deltaEndsWith","paste","pair","applyFormat","computeStyle","nodeType","window","getComputedStyle","endText","style","display","childrenDelta","classes","styles","ATTRIBUTE","nextSibling","nextElementSibling","nodeHeight","offsetHeight","parseFloat","marginTop","marginBottom","offsetTop","fontStyle","italic","fontWeight","bold","textIndent","whiteSpace","replacer","collapse","previousSibling"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACpCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,8CAA8C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uBAAuB;AAC3C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;;;;;;ACnJA;AACA;AACA;AACA;;;AAGA,4CAA4C;;;AAG5C;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,mBAAmB;AACvC;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B;AACA;AACA,OAAO;AACP,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;ACpUA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,YAAY;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AA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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,WAAW;AAC1C,gCAAgC,2BAA2B;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClQA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC1EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;AC1CA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,IAAI;AACX;AACA,KAAK;;AAEL;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,2DAA2D;AAC3D;AACA,OAAO,IAAI;AACX;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;;;;;;;;;;;;AC1IA;;;;;;;;;;;;IAGMe,K;;;;;;;;;;;+BAKO3V,M,EAAQ0B,G,EAAK;AACtB,UAAI1B,OAAOsB,QAAP,CAAgB9B,MAAhB,KAA2B,CAA/B,EAAkC;AAChC,iHAAiBQ,MAAjB,EAAyB0B,GAAzB;AACD,OAFD,MAEO;AACL,aAAKE,MAAL;AACD;AACF;;;6BAEQ;AACP,aAAO,CAAP;AACD;;;4BAEO;AACN,aAAO,EAAP;AACD;;;4BAlBc;AACb,aAAOmE,SAAP;AACD;;;;EAHiB,oBAAU1F,K;;AAqB9BsV,MAAM5V,QAAN,GAAiB,OAAjB;AACA4V,MAAMtT,OAAN,GAAgB,IAAhB;;kBAGesT,K;;;;;;AC5Bf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,6BAA6B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;;;;;;;;;;;;;;;;;;;;AChQA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAGA,SAASC,MAAT,CAAgBnU,IAAhB,EAAsB;AACpB,SAAQA,mCAAyBA,iCAAjC;AACD;;IAGKoU,M;;;AACJ,kBAAYhX,OAAZ,EAAqB+L,MAArB,EAA6B;AAAA;;AAAA,gHACrB/L,OADqB;;AAE3B,UAAK4F,OAAL,GAAemG,OAAOnG,OAAtB;AACA,QAAIqM,MAAMC,OAAN,CAAcn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iC,gBAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC3JA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb;AACA;AACA,CAAC;AACD;;;;;;;;ACrEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACvDA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D;AAC1D;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;;;;;;;;;ICvDMiY,K;AACJ,iBAAY1N,KAAZ,EAAmB/J,OAAnB,EAA4B;AAAA;;AAC1B,SAAK+J,KAAL,GAAaA,KAAb;AACA,SAAK/J,OAAL,GAAeA,OAAf;AACA,SAAKgF,OAAL,GAAe,EAAf;AACD;;;;2BAEM;AAAA;;AACLvF,aAAOC,IAAP,CAAY,KAAKM,OAAL,CAAagF,OAAzB,EAAkCrF,OAAlC,CAA0C,UAACvE,IAAD,EAAU;AAClD,YAAI,MAAK4J,OAAL,CAAa5J,IAAb,KAAsB,IAA1B,EAAgC;AAC9B,gBAAK8F,SAAL,CAAe9F,IAAf;AACD;AACF,OAJD;AAKD;;;8BAESA,I,EAAM;AACd,UAAI+L,cAAc,KAAK4C,KAAL,CAAW1C,WAAX,CAAuBV,MAAvB,cAAyCvL,IAAzC,CAAlB;AACA,WAAK4J,OAAL,CAAa5J,IAAb,IAAqB,IAAI+L,WAAJ,CAAgB,KAAK4C,KAArB,EAA4B,KAAK/J,OAAL,CAAagF,OAAb,CAAqB5J,IAArB,KAA8B,EAA1D,CAArB;AACA,aAAO,KAAK4J,OAAL,CAAa5J,IAAb,CAAP;AACD;;;;;;AAEHqc,MAAMlR,QAAN,GAAiB;AACfvB,WAAS;AADM,CAAjB;AAGAyS,MAAMC,MAAN,GAAe;AACb,aAAWD;AADE,CAAf;;kBAKeA,K;;;;;;;;;;;;;;;;;AC7Bf;;;;AACA;;;;;;;;;;;;AAEA,IAAME,aAAa,QAAnB;;IAGMpb,K;;;AACJ,iBAAYyC,IAAZ,EAAkB;AAAA;;AAAA,8GACVA,IADU;;AAEhB,UAAK4Y,WAAL,GAAmB9U,SAASC,aAAT,CAAuB,MAAvB,CAAnB;AACA,UAAK6U,WAAL,CAAiBnX,YAAjB,CAA8B,iBAA9B,EAAiD,KAAjD;AACA,OAAGnE,KAAH,CAAS6F,IAAT,CAAc,MAAKpH,OAAL,CAAaiV,UAA3B,EAAuCrQ,OAAvC,CAA+C,UAACkY,SAAD,EAAe;AAC5D,YAAKD,WAAL,CAAiBpG,WAAjB,CAA6BqG,SAA7B;AACD,KAFD;AAGA,UAAKC,SAAL,GAAiBhV,SAAS8T,cAAT,CAAwBe,UAAxB,CAAjB;AACA,UAAKI,UAAL,GAAkBjV,SAAS8T,cAAT,CAAwBe,UAAxB,CAAlB;AACA,UAAK5c,OAAL,CAAayW,WAAb,CAAyB,MAAKsG,SAA9B;AACA,UAAK/c,OAAL,CAAayW,WAAb,CAAyB,MAAKoG,WAA9B;AACA,UAAK7c,OAAL,CAAayW,WAAb,CAAyB,MAAKuG,UAA9B;AAXgB;AAYjB;;;;0BAEK/Y,I,EAAM6F,M,EAAQ;AAClB,UAAI7F,SAAS,KAAK8Y,SAAlB,EAA6B,OAAO,CAAP;AAC7B,UAAI9Y,SAAS,KAAK+Y,UAAlB,EAA8B,OAAO,CAAP;AAC9B,iHAAmB/Y,IAAnB,EAAyB6F,MAAzB;AACD;;;4BAEO7F,I,EAAM;AACZ,UAAI+C,cAAJ;AAAA,UAAWkM,iBAAX;AACA,UAAI3Q,OAAO0B,KAAKsN,IAAL,CAAUjP,KAAV,CAAgBsa,UAAhB,EAA4B1L,IAA5B,CAAiC,EAAjC,CAAX;AACA,UAAIjN,SAAS,KAAK8Y,SAAlB,EAA6B;AAC3B,YAAI,KAAKrG,IAAL,0BAAJ,EAAmC;AACjC,cAAIuG,aAAa,KAAKvG,IAAL,CAAU/V,MAAV,EAAjB;AACA,eAAK+V,IAAL,CAAUpV,QAAV,CAAmB2b,UAAnB,EAA+B1a,IAA/B;AACAyE,kBAAQ;AACNqM,uBAAW,KAAKqD,IAAL,CAAU1W,OADf;AAENsT,yBAAa2J,aAAa1a,KAAK5B;AAFzB,WAAR;AAID,SAPD,MAOO;AACLuS,qBAAWnL,SAAS8T,cAAT,CAAwBtZ,IAAxB,CAAX;AACA,eAAKpB,MAAL,CAAYC,YAAZ,CAAyB,oBAAUJ,MAAV,CAAiBkS,QAAjB,CAAzB,EAAqD,IAArD;AACAlM,kBAAQ;AACNqM,uBAAWH,QADL;AAENI,yBAAa/Q,KAAK5B;AAFZ,WAAR;AAID;AACF,OAhBD,MAgBO,IAAIsD,SAAS,KAAK+Y,UAAlB,EAA8B;AACnC,YAAI,KAAK3b,IAAL,0BAAJ,EAAmC;AACjC,eAAKA,IAAL,CAAUC,QAAV,CAAmB,CAAnB,EAAsBiB,IAAtB;AACAyE,kBAAQ;AACNqM,uBAAW,KAAKhS,IAAL,CAAUrB,OADf;AAENsT,yBAAa/Q,KAAK5B;AAFZ,WAAR;AAID,SAND,MAMO;AACLuS,qBAAWnL,SAAS8T,cAAT,CAAwBtZ,IAAxB,CAAX;AACA,eAAKpB,MAAL,CAAYC,YAAZ,CAAyB,oBAAUJ,MAAV,CAAiBkS,QAAjB,CAAzB,EAAqD,KAAK7R,IAA1D;AACA2F,kBAAQ;AACNqM,uBAAWH,QADL;AAENI,yBAAa/Q,KAAK5B;AAFZ,WAAR;AAID;AACF;AACDsD,WAAKsN,IAAL,GAAYqL,UAAZ;AACA,aAAO5V,KAAP;AACD;;;2BAEMD,S,EAAW3D,O,EAAS;AAAA;;AACzB2D,gBAAUnC,OAAV,CAAkB,UAACoX,QAAD,EAAc;AAC9B,YAAIA,SAAStV,IAAT,KAAkB,eAAlB,KACCsV,SAAS9Y,MAAT,KAAoB,OAAK6Z,SAAzB,IAAsCf,SAAS9Y,MAAT,KAAoB,OAAK8Z,UADhE,CAAJ,EACiF;AAC/E,cAAIhW,QAAQ,OAAKyM,OAAL,CAAauI,SAAS9Y,MAAtB,CAAZ;AACA,cAAI8D,KAAJ,EAAW5D,QAAQ4D,KAAR,GAAgBA,KAAhB;AACZ;AACF,OAND;AAOD;;;;EApEiB,oBAAUxF,K;;kBAwEfA,K;;;;;;;;;;;;;;AC9Ef;;;;;;AAEA,IAAIuK,SAAS;AACXtK,SAAO,oBAAUjB,KAAV,CAAgB0B,KADZ;AAEX4D,aAAW,CAAC,OAAD,EAAU,QAAV,EAAoB,SAApB;AAFA,CAAb;;AAKA,IAAIoX,iBAAiB,IAAI,oBAAUpd,UAAV,CAAqBqd,SAAzB,CAAmC,OAAnC,EAA4C,OAA5C,EAAqDpR,MAArD,CAArB;AACA,IAAIqR,aAAa,IAAI,oBAAUtd,UAAV,CAAqByc,KAAzB,CAA+B,OAA/B,EAAwC,UAAxC,EAAoDxQ,MAApD,CAAjB;AACA,IAAIsR,aAAa,IAAI,oBAAUvd,UAAV,CAAqBuc,KAAzB,CAA+B,OAA/B,EAAwC,YAAxC,EAAsDtQ,MAAtD,CAAjB;;QAESmR,c,GAAAA,c;QAAgBE,U,GAAAA,U;QAAYC,U,GAAAA,U;;;;;;;;;;;;;;ACXrC;;;;AACA;;;;AAEA,IAAIC,kBAAkB,IAAI,oBAAUxd,UAAV,CAAqByc,KAAzB,CAA+B,YAA/B,EAA6C,OAA7C,EAAsD;AAC1E9a,SAAO,oBAAUjB,KAAV,CAAgBgc;AADmD,CAAtD,CAAtB;AAGA,IAAIe,kBAAkB,2BAAoB,YAApB,EAAkC,kBAAlC,EAAsD;AAC1E9b,SAAO,oBAAUjB,KAAV,CAAgBgc;AADmD,CAAtD,CAAtB;;QAISc,e,GAAAA,e;QAAiBC,e,GAAAA,e;;;;;;;;;;;;;;ACV1B;;;;;;AAEA,IAAIxR,SAAS;AACXtK,SAAO,oBAAUjB,KAAV,CAAgB0B,KADZ;AAEX4D,aAAW,CAAC,KAAD;AAFA,CAAb;;AAKA,IAAI0X,qBAAqB,IAAI,oBAAU1d,UAAV,CAAqBqd,SAAzB,CAAmC,WAAnC,EAAgD,KAAhD,EAAuDpR,MAAvD,CAAzB;AACA,IAAI0R,iBAAiB,IAAI,oBAAU3d,UAAV,CAAqByc,KAAzB,CAA+B,WAA/B,EAA4C,cAA5C,EAA4DxQ,MAA5D,CAArB;AACA,IAAI2R,iBAAiB,IAAI,oBAAU5d,UAAV,CAAqBuc,KAAzB,CAA+B,WAA/B,EAA4C,WAA5C,EAAyDtQ,MAAzD,CAArB;;QAESyR,kB,GAAAA,kB;QAAoBC,c,GAAAA,c;QAAgBC,c,GAAAA,c;;;;;;;;;;;;;;;;;;ACX7C;;;;;;;;;;;;AAEA,IAAI3R,SAAS;AACXtK,SAAO,oBAAUjB,KAAV,CAAgBgc,MADZ;AAEX1W,aAAW,CAAC,OAAD,EAAU,WAAV;AAFA,CAAb;;AAKA,IAAI6X,YAAY,IAAI,oBAAU7d,UAAV,CAAqByc,KAAzB,CAA+B,MAA/B,EAAuC,SAAvC,EAAkDxQ,MAAlD,CAAhB;;IAEM6R,mB;;;;;;;;;;;0BACE3Z,I,EAAM;AACV,aAAO,gIAAYA,IAAZ,EAAkBkN,OAAlB,CAA0B,OAA1B,EAAmC,EAAnC,CAAP;AACD;;;;EAH+B,oBAAUrR,UAAV,CAAqBuc,K;;AAMvD,IAAIwB,YAAY,IAAID,mBAAJ,CAAwB,MAAxB,EAAgC,aAAhC,EAA+C7R,MAA/C,CAAhB;;QAES8R,S,GAAAA,S;QAAWF,S,GAAAA,S;;;;;;;;;;;;;;ACjBpB;;;;;;AAEA,IAAIG,YAAY,IAAI,oBAAUhe,UAAV,CAAqByc,KAAzB,CAA+B,MAA/B,EAAuC,SAAvC,EAAkD;AAChE9a,SAAO,oBAAUjB,KAAV,CAAgBgc,MADyC;AAEhE1W,aAAW,CAAC,OAAD,EAAU,OAAV,EAAmB,MAAnB;AAFqD,CAAlD,CAAhB;AAIA,IAAIiY,YAAY,IAAI,oBAAUje,UAAV,CAAqBuc,KAAzB,CAA+B,MAA/B,EAAuC,WAAvC,EAAoD;AAClE5a,SAAO,oBAAUjB,KAAV,CAAgBgc,MAD2C;AAElE1W,aAAW,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB;AAFuD,CAApD,CAAhB;;QAKSgY,S,GAAAA,S;QAAWC,S,GAAAA,S;;;;;;;;;;;;;;;;;ACXpB;;;;AACA;;;;AACA;;;;;;;;;;;;IAGMC,O;;;AACJ,mBAAYhP,KAAZ,EAAmB/J,OAAnB,EAA4B;AAAA;;AAAA,kHACpB+J,KADoB,EACb/J,OADa;;AAE1B,UAAKgZ,YAAL,GAAoB,CAApB;AACA,UAAKC,YAAL,GAAoB,KAApB;AACA,UAAKzW,KAAL;AACA,UAAKuH,KAAL,CAAWzI,EAAX,CAAc,gBAAMC,MAAN,CAAaC,aAA3B,EAA0C,UAACyH,SAAD,EAAYtM,KAAZ,EAAmB8K,QAAnB,EAA6B1J,MAA7B,EAAwC;AAChF,UAAIkL,cAAc,gBAAM1H,MAAN,CAAaG,WAA3B,IAA0C,MAAKuX,YAAnD,EAAiE;AACjE,UAAI,CAAC,MAAKjZ,OAAL,CAAakZ,QAAd,IAA0Bnb,WAAW,gBAAMyF,OAAN,CAAc8C,IAAvD,EAA6D;AAC3D,cAAK6S,MAAL,CAAYxc,KAAZ,EAAmB8K,QAAnB;AACD,OAFD,MAEO;AACL,cAAK2R,SAAL,CAAezc,KAAf;AACD;AACF,KAPD;AAQA,UAAKoN,KAAL,CAAW9I,QAAX,CAAoBoS,UAApB,CAA+B,EAAEzT,KAAK,GAAP,EAAY6W,UAAU,IAAtB,EAA/B,EAA6D,MAAK4C,IAAL,CAAUhP,IAAV,OAA7D;AACA,UAAKN,KAAL,CAAW9I,QAAX,CAAoBoS,UAApB,CAA+B,EAAEzT,KAAK,GAAP,EAAY6W,UAAU,IAAtB,EAA4BlD,UAAU,IAAtC,EAA/B,EAA6E,MAAK+F,IAAL,CAAUjP,IAAV,OAA7E;AACA,QAAI,OAAOqI,IAAP,CAAYC,UAAUC,QAAtB,CAAJ,EAAqC;AACnC,YAAK7I,KAAL,CAAW9I,QAAX,CAAoBoS,UAApB,CAA+B,EAAEzT,KAAK,GAAP,EAAY6W,UAAU,IAAtB,EAA/B,EAA6D,MAAK6C,IAAL,CAAUjP,IAAV,OAA7D;AACD;AAjByB;AAkB3B;;;;2BAEMtM,M,EAAQwb,I,EAAM;AACnB,UAAI,KAAKC,KAAL,CAAWzb,MAAX,EAAmBrC,MAAnB,KAA8B,CAAlC,EAAqC;AACrC,UAAIiB,QAAQ,KAAK6c,KAAL,CAAWzb,MAAX,EAAmBoU,GAAnB,EAAZ;AACA,WAAKqH,KAAL,CAAWD,IAAX,EAAiB7P,IAAjB,CAAsB/M,KAAtB;AACA,WAAKqc,YAAL,GAAoB,CAApB;AACA,WAAKC,YAAL,GAAoB,IAApB;AACA,WAAKlP,KAAL,CAAW4L,cAAX,CAA0BhZ,MAAMoB,MAAN,CAA1B,EAAyC,gBAAMyF,OAAN,CAAc8C,IAAvD;AACA,WAAK2S,YAAL,GAAoB,KAApB;AACA,UAAIxd,QAAQge,mBAAmB9c,MAAMoB,MAAN,CAAnB,CAAZ;AACA,WAAKgM,KAAL,CAAWjG,YAAX,CAAwBrI,KAAxB;AACD;;;4BAEO;AACN,WAAK+d,KAAL,GAAa,EAAEH,MAAM,EAAR,EAAYC,MAAM,EAAlB,EAAb;AACD;;;6BAEQ;AACP,WAAKN,YAAL,GAAoB,CAApB;AACD;;;2BAEMU,W,EAAajS,Q,EAAU;AAC5B,UAAIiS,YAAYxT,GAAZ,CAAgBxK,MAAhB,KAA2B,CAA/B,EAAkC;AAClC,WAAK8d,KAAL,CAAWF,IAAX,GAAkB,EAAlB;AACA,UAAIK,YAAY,KAAK5P,KAAL,CAAWpF,WAAX,GAAyBuG,IAAzB,CAA8BzD,QAA9B,CAAhB;AACA,UAAImS,YAAYC,KAAKC,GAAL,EAAhB;AACA,UAAI,KAAKd,YAAL,GAAoB,KAAKhZ,OAAL,CAAa+Z,KAAjC,GAAyCH,SAAzC,IAAsD,KAAKJ,KAAL,CAAWH,IAAX,CAAgB3d,MAAhB,GAAyB,CAAnF,EAAsF;AACpF,YAAIiB,QAAQ,KAAK6c,KAAL,CAAWH,IAAX,CAAgBlH,GAAhB,EAAZ;AACAwH,oBAAYA,UAAUtT,OAAV,CAAkB1J,MAAM0c,IAAxB,CAAZ;AACAK,sBAAc/c,MAAM2c,IAAN,CAAWjT,OAAX,CAAmBqT,WAAnB,CAAd;AACD,OAJD,MAIO;AACL,aAAKV,YAAL,GAAoBY,SAApB;AACD;AACD,WAAKJ,KAAL,CAAWH,IAAX,CAAgB3P,IAAhB,CAAqB;AACnB4P,cAAMI,WADa;AAEnBL,cAAMM;AAFa,OAArB;AAIA,UAAI,KAAKH,KAAL,CAAWH,IAAX,CAAgB3d,MAAhB,GAAyB,KAAKsE,OAAL,CAAaga,QAA1C,EAAoD;AAClD,aAAKR,KAAL,CAAWH,IAAX,CAAgB9b,KAAhB;AACD;AACF;;;2BAEM;AACL,WAAKoG,MAAL,CAAY,MAAZ,EAAoB,MAApB;AACD;;;8BAEShH,K,EAAO;AACf,WAAK6c,KAAL,CAAWH,IAAX,CAAgB1Z,OAAhB,CAAwB,UAASgE,MAAT,EAAiB;AACvCA,eAAO0V,IAAP,GAAc1c,MAAMyc,SAAN,CAAgBzV,OAAO0V,IAAvB,EAA6B,IAA7B,CAAd;AACA1V,eAAO2V,IAAP,GAAc3c,MAAMyc,SAAN,CAAgBzV,OAAO2V,IAAvB,EAA6B,IAA7B,CAAd;AACD,OAHD;AAIA,WAAKE,KAAL,CAAWF,IAAX,CAAgB3Z,OAAhB,CAAwB,UAASgE,MAAT,EAAiB;AACvCA,eAAO0V,IAAP,GAAc1c,MAAMyc,SAAN,CAAgBzV,OAAO0V,IAAvB,EAA6B,IAA7B,CAAd;AACA1V,eAAO2V,IAAP,GAAc3c,MAAMyc,SAAN,CAAgBzV,OAAO2V,IAAvB,EAA6B,IAA7B,CAAd;AACD,OAHD;AAID;;;2BAEM;AACL,WAAK3V,MAAL,CAAY,MAAZ,EAAoB,MAApB;AACD;;;;;;AAEHoV,QAAQxS,QAAR,GAAmB;AACjBwT,SAAO,IADU;AAEjBC,YAAU,GAFO;AAGjBd,YAAU;AAHO,CAAnB;;AAMA,SAASe,qBAAT,CAA+Btd,KAA/B,EAAsC;AACpC,MAAIsJ,SAAStJ,MAAMuJ,GAAN,CAAUvJ,MAAMuJ,GAAN,CAAUxK,MAAV,GAAmB,CAA7B,CAAb;AACA,MAAIuK,UAAU,IAAd,EAAoB,OAAO,KAAP;AACpB,MAAIA,OAAOjL,MAAP,IAAiB,IAArB,EAA2B;AACzB,WAAO,OAAOiL,OAAOjL,MAAd,KAAyB,QAAzB,IAAqCiL,OAAOjL,MAAP,CAAca,QAAd,CAAuB,IAAvB,CAA5C;AACD;AACD,MAAIoK,OAAOrL,UAAP,IAAqB,IAAzB,EAA+B;AAC7B,WAAO6E,OAAOC,IAAP,CAAYuG,OAAOrL,UAAnB,EAA+BqY,IAA/B,CAAoC,UAASiH,IAAT,EAAe;AACxD,aAAO,oBAAU5e,KAAV,CAAgB4e,IAAhB,EAAsB,oBAAU3e,KAAV,CAAgB0B,KAAtC,KAAgD,IAAvD;AACD,KAFM,CAAP;AAGD;AACD,SAAO,KAAP;AACD;;AAED,SAASwc,kBAAT,CAA4B9c,KAA5B,EAAmC;AACjC,MAAIwd,eAAexd,MAAMG,MAAN,CAAa,UAASpB,MAAT,EAAiBqP,EAAjB,EAAqB;AACnDrP,cAAWqP,GAAG5E,MAAH,IAAa,CAAxB;AACA,WAAOzK,MAAP;AACD,GAHkB,EAGhB,CAHgB,CAAnB;AAIA,MAAI0e,cAAczd,MAAMjB,MAAN,KAAiBye,YAAnC;AACA,MAAIF,sBAAsBtd,KAAtB,CAAJ,EAAkC;AAChCyd,mBAAe,CAAf;AACD;AACD,SAAOA,WAAP;AACD;;QAGmBzb,O,GAAXoa,O;QAAoBU,kB,GAAAA,kB;;;;;;;;ACvH7B;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACrIA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,gBAAgB;AACnD,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mBAAmB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,cAAc;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AChLA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;AC7EA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACpEA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;ACxCA;AACA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,mBAAmB;AACtD;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;;;;;;;;;;AC/FA,IAA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CA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,WAAW;AAC5B;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,cAAc,eAAe;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB;AACpD;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,IAAI;AACf,WAAW,IAAI;AACf,YAAY,MAAM;AAClB;AACA;AACA;AACA,kCAAkC,0BAA0B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjuBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,0DAA0D,OAAO;AACjE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,eAAe,YAAY;AAC3B;;AAEA;AACA,2DAA2D;AAC3D,+DAA+D;AAC/D,mEAAmE;AACnE,uEAAuE;AACvE;AACA,0DAA0D,SAAS;AACnE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,SAAS;AACpB,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,2DAA2D,YAAY;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACtTA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AACA;;AACA;;;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;AAEA,IAAIzc,QAAQ,sBAAO,iBAAP,CAAZ;;AAGA,IAAM0c,UAAU,cAAhB;;AAEA,IAAMC,mBAAmB,CACvB,CAACC,KAAKC,SAAN,EAAiBC,SAAjB,CADuB,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","file":"quill.core.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 110);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f3e82c5b9367de7d46ed","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./blot/abstract/container\");\nvar format_1 = require(\"./blot/abstract/format\");\nvar leaf_1 = require(\"./blot/abstract/leaf\");\nvar scroll_1 = require(\"./blot/scroll\");\nvar inline_1 = require(\"./blot/inline\");\nvar block_1 = require(\"./blot/block\");\nvar embed_1 = require(\"./blot/embed\");\nvar text_1 = require(\"./blot/text\");\nvar attributor_1 = require(\"./attributor/attributor\");\nvar class_1 = require(\"./attributor/class\");\nvar style_1 = require(\"./attributor/style\");\nvar store_1 = require(\"./attributor/store\");\nvar Registry = require(\"./registry\");\nvar Parchment = {\n    Scope: Registry.Scope,\n    create: Registry.create,\n    find: Registry.find,\n    query: Registry.query,\n    register: Registry.register,\n    Container: container_1.default,\n    Format: format_1.default,\n    Leaf: leaf_1.default,\n    Embed: embed_1.default,\n    Scroll: scroll_1.default,\n    Block: block_1.default,\n    Inline: inline_1.default,\n    Text: text_1.default,\n    Attributor: {\n        Attribute: attributor_1.default,\n        Class: class_1.default,\n        Style: style_1.default,\n        Store: store_1.default,\n    },\n};\nexports.default = Parchment;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/parchment.ts\n// module id = 0\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ParchmentError = /** @class */ (function (_super) {\n    __extends(ParchmentError, _super);\n    function ParchmentError(message) {\n        var _this = this;\n        message = '[Parchment] ' + message;\n        _this = _super.call(this, message) || this;\n        _this.message = message;\n        _this.name = _this.constructor.name;\n        return _this;\n    }\n    return ParchmentError;\n}(Error));\nexports.ParchmentError = ParchmentError;\nvar attributes = {};\nvar classes = {};\nvar tags = {};\nvar types = {};\nexports.DATA_KEY = '__blot';\nvar Scope;\n(function (Scope) {\n    Scope[Scope[\"TYPE\"] = 3] = \"TYPE\";\n    Scope[Scope[\"LEVEL\"] = 12] = \"LEVEL\";\n    Scope[Scope[\"ATTRIBUTE\"] = 13] = \"ATTRIBUTE\";\n    Scope[Scope[\"BLOT\"] = 14] = \"BLOT\";\n    Scope[Scope[\"INLINE\"] = 7] = \"INLINE\";\n    Scope[Scope[\"BLOCK\"] = 11] = \"BLOCK\";\n    Scope[Scope[\"BLOCK_BLOT\"] = 10] = \"BLOCK_BLOT\";\n    Scope[Scope[\"INLINE_BLOT\"] = 6] = \"INLINE_BLOT\";\n    Scope[Scope[\"BLOCK_ATTRIBUTE\"] = 9] = \"BLOCK_ATTRIBUTE\";\n    Scope[Scope[\"INLINE_ATTRIBUTE\"] = 5] = \"INLINE_ATTRIBUTE\";\n    Scope[Scope[\"ANY\"] = 15] = \"ANY\";\n})(Scope = exports.Scope || (exports.Scope = {}));\nfunction create(input, value) {\n    var match = query(input);\n    if (match == null) {\n        throw new ParchmentError(\"Unable to create \" + input + \" blot\");\n    }\n    var BlotClass = match;\n    var node = \n    // @ts-ignore\n    input instanceof Node || input['nodeType'] === Node.TEXT_NODE ? input : BlotClass.create(value);\n    return new BlotClass(node, value);\n}\nexports.create = create;\nfunction find(node, bubble) {\n    if (bubble === void 0) { bubble = false; }\n    if (node == null)\n        return null;\n    // @ts-ignore\n    if (node[exports.DATA_KEY] != null)\n        return node[exports.DATA_KEY].blot;\n    if (bubble)\n        return find(node.parentNode, bubble);\n    return null;\n}\nexports.find = find;\nfunction query(query, scope) {\n    if (scope === void 0) { scope = Scope.ANY; }\n    var match;\n    if (typeof query === 'string') {\n        match = types[query] || attributes[query];\n        // @ts-ignore\n    }\n    else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n        match = types['text'];\n    }\n    else if (typeof query === 'number') {\n        if (query & Scope.LEVEL & Scope.BLOCK) {\n            match = types['block'];\n        }\n        else if (query & Scope.LEVEL & Scope.INLINE) {\n            match = types['inline'];\n        }\n    }\n    else if (query instanceof HTMLElement) {\n        var names = (query.getAttribute('class') || '').split(/\\s+/);\n        for (var i in names) {\n            match = classes[names[i]];\n            if (match)\n                break;\n        }\n        match = match || tags[query.tagName];\n    }\n    if (match == null)\n        return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n        return match;\n    return null;\n}\nexports.query = query;\nfunction register() {\n    var Definitions = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        Definitions[_i] = arguments[_i];\n    }\n    if (Definitions.length > 1) {\n        return Definitions.map(function (d) {\n            return register(d);\n        });\n    }\n    var Definition = Definitions[0];\n    if (typeof Definition.blotName !== 'string' && typeof Definition.attrName !== 'string') {\n        throw new ParchmentError('Invalid definition');\n    }\n    else if (Definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n    }\n    types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n        attributes[Definition.keyName] = Definition;\n    }\n    else {\n        if (Definition.className != null) {\n            classes[Definition.className] = Definition;\n        }\n        if (Definition.tagName != null) {\n            if (Array.isArray(Definition.tagName)) {\n                Definition.tagName = Definition.tagName.map(function (tagName) {\n                    return tagName.toUpperCase();\n                });\n            }\n            else {\n                Definition.tagName = Definition.tagName.toUpperCase();\n            }\n            var tagNames = Array.isArray(Definition.tagName) ? Definition.tagName : [Definition.tagName];\n            tagNames.forEach(function (tag) {\n                if (tags[tag] == null || Definition.className == null) {\n                    tags[tag] = Definition;\n                }\n            });\n        }\n    }\n    return Definition;\n}\nexports.register = register;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/registry.ts\n// module id = 1\n// module chunks = 0 1 2","var diff = require('fast-diff');\nvar equal = require('deep-equal');\nvar extend = require('extend');\nvar op = require('./op');\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/quill-delta/lib/delta.js\n// module id = 2\n// module chunks = 0 1 2","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extend/index.js\n// module id = 3\n// module chunks = 0 1 2","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Break from './break';\nimport Inline from './inline';\nimport TextBlot from './text';\n\n\nconst NEWLINE_LENGTH = 1;\n\n\nclass BlockEmbed extends Parchment.Embed {\n  attach() {\n    super.attach();\n    this.attributes = new Parchment.Attributor.Store(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), extend(this.formats(), this.attributes.values()));\n  }\n\n  format(name, value) {\n    let attribute = Parchment.query(name, Parchment.Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n\n  insertAt(index, value, def) {\n    if (typeof value === 'string' && value.endsWith('\\n')) {\n      let block = Parchment.create(Block.blotName);\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\n      block.insertAt(0, value.slice(0, -1));\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n}\nBlockEmbed.scope = Parchment.Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\n\nclass Block extends Parchment.Block {\n  constructor(domNode) {\n    super(domNode);\n    this.cache = {};\n  }\n\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = this.descendants(Parchment.Leaf).reduce((delta, leaf) => {\n        if (leaf.length() === 0) {\n          return delta;\n        } else {\n          return delta.insert(leaf.value(), bubbleFormats(leaf));\n        }\n      }, new Delta()).insert('\\n', bubbleFormats(this));\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (Parchment.query(name, Parchment.Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n    this.cache = {};\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) return super.insertAt(index, value, def);\n    if (value.length === 0) return;\n    let lines = value.split('\\n');\n    let text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    let block = this;\n    lines.reduce(function(index, line) {\n      block = block.split(index, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot, ref) {\n    let head = this.children.head;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  merge(source) {\n    let ref = this.children.head instanceof Break ? null : this.children.head;\n    source.moveChildren(this, ref);\n    source.remove();\n  }\n\n  mergeInto(target) {\n    target.merge(this);\n  }\n\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index) {\n    return super.path(index, true);\n  }\n\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index, force = false) {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      let clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      } else {\n        this.parent.insertBefore(clone, this.next);\n        return clone;\n      }\n    } else {\n      let next = super.split(index, force);\n      this.cache = {};\n      return next;\n    }\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = 'break';\nBlock.allowedChildren = [Inline, Parchment.Embed, TextBlot];\n\n\nfunction bubbleFormats(blot, formats = {}) {\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = extend(formats, blot.formats());\n  }\n  if (blot.parent == null || blot.parent.blotName == 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\n\nexport { bubbleFormats, BlockEmbed, Block as default };\n\n\n\n// WEBPACK FOOTER //\n// ./blots/block.js","import './polyfill';\nimport Delta from 'quill-delta';\nimport Editor from './editor';\nimport Emitter from './emitter';\nimport Module from './module';\nimport Parchment from 'parchment';\nimport Selection, { Range } from './selection';\nimport extend from 'extend';\nimport logger from './logger';\nimport Theme from './theme';\n\nlet debug = logger('quill');\n\n\nclass Quill {\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node) {\n    return node.__quill || Parchment.find(node);\n  }\n\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(path, target, overwrite = false) {\n    if (typeof path !== 'string') {\n      let name = path.attrName || path.blotName;\n      if (typeof name === 'string') {\n        // register(Blot | Attributor, overwrite)\n        this.register('formats/' + name, path, target);\n      } else {\n        Object.keys(path).forEach((key) => {\n          this.register(key, path[key], target);\n        });\n      }\n    } else {\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if ((path.startsWith('blots/') || path.startsWith('formats/')) &&\n          target.blotName !== 'abstract') {\n        Parchment.register(target);\n      } else if (path.startsWith('modules') && typeof target.register === 'function') {\n        target.register();\n      }\n    }\n  }\n\n  constructor(container, options = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    let html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    this.container.__quill = this;\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new Emitter();\n    this.scroll = Parchment.create(this.root, {\n      emitter: this.emitter,\n      whitelist: this.options.formats\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options);\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      let range = this.selection.lastRange;\n      let index = range && range.length === 0 ? range.index : undefined;\n      modify.call(this, () => {\n        return this.editor.update(null, mutations, index);\n      }, source);\n    });\n    let contents = this.clipboard.convert(`<div class='ql-editor' style=\"white-space: normal;\">${html}<p><br></p></div>`);\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  addContainer(container, refNode = null) {\n    if (typeof container === 'string') {\n      let className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1*length);\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus() {\n    let scrollTop = this.scrollingContainer.scrollTop;\n    this.selection.focus();\n    this.scrollingContainer.scrollTop = scrollTop;\n    this.scrollIntoView();\n  }\n\n  format(name, value, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      let range = this.getSelection(true);\n      let change = new Delta();\n      if (range == null) {\n        return change;\n      } else if (Parchment.query(name, Parchment.Scope.BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, { [name]: value });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, { [name]: value });\n      }\n      this.setSelection(range, Emitter.sources.SILENT);\n      return change;\n    }, source);\n  }\n\n  formatLine(index, length, name, value, source) {\n    let formats;\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n\n  formatText(index, length, name, value, source) {\n    let formats;\n    [index, length, formats, source] = overload(index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n\n  getBounds(index, length = 0) {\n    let bounds;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    let containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index = this.getSelection(true), length = 0) {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    } else {\n      return this.editor.getFormat(index.index, index.length);\n    }\n  }\n\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n\n  getLines(index = 0, length = Number.MAX_VALUE) {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    } else {\n      return this.scroll.lines(index, length);\n    }\n  }\n\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus = false) {\n    if (focus) this.focus();\n    this.update();  // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getText(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n\n  insertText(index, text, name, value, source) {\n    let formats;\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n\n  isEnabled() {\n    return !this.container.classList.contains('ql-disabled');\n  }\n\n  off() {\n    return this.emitter.off.apply(this.emitter, arguments);\n  }\n\n  on() {\n    return this.emitter.on.apply(this.emitter, arguments);\n  }\n\n  once() {\n    return this.emitter.once.apply(this.emitter, arguments);\n  }\n\n  pasteHTML(index, html, source) {\n    this.clipboard.dangerouslyPasteHTML(index, html, source);\n  }\n\n  removeFormat(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n\n  scrollIntoView() {\n    this.selection.scrollIntoView(this.scrollingContainer);\n  }\n\n  setContents(delta, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      let length = this.getLength();\n      let deleted = this.editor.deleteText(0, length);\n      let applied = this.editor.applyDelta(delta);\n      let lastOp = applied.ops[applied.ops.length - 1];\n      if (lastOp != null && typeof(lastOp.insert) === 'string' && lastOp.insert[lastOp.insert.length-1] === '\\n') {\n        this.editor.deleteText(this.getLength() - 1, 1);\n        applied.delete(1);\n      }\n      let ret = deleted.compose(applied);\n      return ret;\n    }, source);\n  }\n\n  setSelection(index, length, source) {\n    if (index == null) {\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(index, length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.selection.scrollIntoView(this.scrollingContainer);\n      }\n    }\n  }\n\n  setText(text, source = Emitter.sources.API) {\n    let delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    let change = this.scroll.update(source);   // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    return change;\n  }\n\n  updateContents(delta, source = Emitter.sources.API) {\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      return this.editor.applyDelta(delta, source);\n    }, source, true);\n  }\n}\nQuill.DEFAULTS = {\n  bounds: null,\n  formats: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  scrollingContainer: null,\n  strict: true,\n  theme: 'default'\n};\nQuill.events = Emitter.events;\nQuill.sources = Emitter.sources;\n// eslint-disable-next-line no-undef\nQuill.version = typeof(QUILL_VERSION) === 'undefined' ? 'dev' : QUILL_VERSION;\n\nQuill.imports = {\n  'delta'       : Delta,\n  'parchment'   : Parchment,\n  'core/module' : Module,\n  'core/theme'  : Theme\n};\n\n\nfunction expandConfig(container, userConfig) {\n  userConfig = extend(true, {\n    container: container,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true\n    }\n  }, userConfig);\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = Theme;\n  } else {\n    userConfig.theme = Quill.import(`themes/${userConfig.theme}`);\n    if (userConfig.theme == null) {\n      throw new Error(`Invalid theme ${userConfig.theme}. Did you register it?`);\n    }\n  }\n  let themeConfig = extend(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(function(config) {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(function(module) {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  let moduleNames = Object.keys(themeConfig.modules).concat(Object.keys(userConfig.modules));\n  let moduleConfig = moduleNames.reduce(function(config, name) {\n    let moduleClass = Quill.import(`modules/${name}`);\n    if (moduleClass == null) {\n      debug.error(`Cannot load ${name} module. Are you sure you registered it?`);\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (userConfig.modules != null && userConfig.modules.toolbar &&\n      userConfig.modules.toolbar.constructor !== Object) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar\n    };\n  }\n  userConfig = extend(true, {}, Quill.DEFAULTS, { modules: moduleConfig }, themeConfig, userConfig);\n  ['bounds', 'container', 'scrollingContainer'].forEach(function(key) {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(function(config, name) {\n    if (userConfig.modules[name]) {\n      config[name] = userConfig.modules[name];\n    }\n    return config;\n  }, {});\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (this.options.strict && !this.isEnabled() && source === Emitter.sources.USER) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  let oldDelta = this.editor.delta;\n  let change = modifier();\n  if (range != null) {\n    if (index === true) index = range.index;\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    let args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value, value = name, name = length, length = index.length, index = index.index;\n    } else {\n      length = index.length, index = index.index;\n    }\n  } else if (typeof length !== 'number') {\n    source = value, value = name, name = length, length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  let start, end;\n  if (index instanceof Delta) {\n    [start, end] = [range.index, range.index + range.length].map(function(pos) {\n      return index.transformPosition(pos, source !== Emitter.sources.USER);\n    });\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(function(pos) {\n      if (pos < index || (pos === index && source === Emitter.sources.USER)) return pos;\n      if (length >= 0) {\n        return pos + length;\n      } else {\n        return Math.max(index, pos + length);\n      }\n    });\n  }\n  return new Range(start, end - start);\n}\n\n\nexport { expandConfig, overload, Quill as default };\n\n\n\n// WEBPACK FOOTER //\n// ./core/quill.js","import Text from './text';\nimport Parchment from 'parchment';\n\n\nclass Inline extends Parchment.Inline {\n  static compare(self, other) {\n    let selfIndex = Inline.order.indexOf(self);\n    let otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    } else if (self === other) {\n      return 0;\n    } else if (self < other) {\n      return -1;\n    } else {\n      return 1;\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && Parchment.query(name, Parchment.Scope.BLOT)) {\n      let blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent instanceof Inline &&\n        Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      let parent = this.parent.isolate(this.offset(), this.length());\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nInline.allowedChildren = [Inline, Parchment.Embed, Text];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = [\n  'cursor', 'inline',   // Must be lower\n  'underline', 'strike', 'italic', 'bold', 'script',\n  'link', 'code'        // Must be higher\n];\n\n\nexport default Inline;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/inline.js","import Parchment from 'parchment';\n\nclass TextBlot extends Parchment.Text { }\n\nexport default TextBlot;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/text.js","import EventEmitter from 'eventemitter3';\nimport logger from './logger';\n\nlet debug = logger('quill:events');\n\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach(function(eventName) {\n  document.addEventListener(eventName, (...args) => {\n    [].slice.call(document.querySelectorAll('.ql-container')).forEach((node) => {\n      // TODO use WeakMap\n      if (node.__quill && node.__quill.emitter) {\n        node.__quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\n\nclass Emitter extends EventEmitter {\n  constructor() {\n    super();\n    this.listeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit() {\n    debug.log.apply(debug, arguments);\n    super.emit.apply(this, arguments);\n  }\n\n  handleDOM(event, ...args) {\n    (this.listeners[event.type] || []).forEach(function({ node, handler }) {\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName, node, handler) {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n    this.listeners[eventName].push({ node, handler })\n  }\n}\n\nEmitter.events = {\n  EDITOR_CHANGE        : 'editor-change',\n  SCROLL_BEFORE_UPDATE : 'scroll-before-update',\n  SCROLL_OPTIMIZE      : 'scroll-optimize',\n  SCROLL_UPDATE        : 'scroll-update',\n  SELECTION_CHANGE     : 'selection-change',\n  TEXT_CHANGE          : 'text-change'\n};\nEmitter.sources = {\n  API    : 'api',\n  SILENT : 'silent',\n  USER   : 'user'\n};\n\n\nexport default Emitter;\n\n\n\n// WEBPACK FOOTER //\n// ./core/emitter.js","class Module {\n  constructor(quill, options = {}) {\n    this.quill = quill;\n    this.options = options;\n  }\n}\nModule.DEFAULTS = {};\n\n\nexport default Module;\n\n\n\n// WEBPACK FOOTER //\n// ./core/module.js","let levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\n\nfunction debug(method, ...args) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    console[method](...args);  // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce(function(logger, method) {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\ndebug.level = namespace.level = function(newLevel) {\n  level = newLevel;\n};\n\n\nexport default namespace;\n\n\n\n// WEBPACK FOOTER //\n// ./core/logger.js","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-equal/index.js\n// module id = 11\n// module chunks = 0 1 2","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = require(\"../registry\");\nvar Attributor = /** @class */ (function () {\n    function Attributor(attrName, keyName, options) {\n        if (options === void 0) { options = {}; }\n        this.attrName = attrName;\n        this.keyName = keyName;\n        var attributeBit = Registry.Scope.TYPE & Registry.Scope.ATTRIBUTE;\n        if (options.scope != null) {\n            // Ignore type bits, force attribute bit\n            this.scope = (options.scope & Registry.Scope.LEVEL) | attributeBit;\n        }\n        else {\n            this.scope = Registry.Scope.ATTRIBUTE;\n        }\n        if (options.whitelist != null)\n            this.whitelist = options.whitelist;\n    }\n    Attributor.keys = function (node) {\n        return [].map.call(node.attributes, function (item) {\n            return item.name;\n        });\n    };\n    Attributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        node.setAttribute(this.keyName, value);\n        return true;\n    };\n    Attributor.prototype.canAdd = function (node, value) {\n        var match = Registry.query(node, Registry.Scope.BLOT & (this.scope | Registry.Scope.TYPE));\n        if (match == null)\n            return false;\n        if (this.whitelist == null)\n            return true;\n        if (typeof value === 'string') {\n            return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n        }\n        else {\n            return this.whitelist.indexOf(value) > -1;\n        }\n    };\n    Attributor.prototype.remove = function (node) {\n        node.removeAttribute(this.keyName);\n    };\n    Attributor.prototype.value = function (node) {\n        var value = node.getAttribute(this.keyName);\n        if (this.canAdd(node, value) && value) {\n            return value;\n        }\n        return '';\n    };\n    return Attributor;\n}());\nexports.default = Attributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/attributor.ts\n// module id = 12\n// module chunks = 0 1 2","import Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport Parchment from 'parchment';\nimport CodeBlock from '../formats/code';\nimport CursorBlot from '../blots/cursor';\nimport Block, { bubbleFormats } from '../blots/block';\nimport Break from '../blots/break';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\n\n\nconst ASCII = /^[ -~]*$/;\n\n\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta) {\n    let consumeNextNewline = false;\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    delta = normalizeDelta(delta);\n    delta.reduce((index, op) => {\n      let length = op.retain || op.delete || op.insert.length || 1;\n      let attributes = op.attributes || {};\n      if (op.insert != null) {\n        if (typeof op.insert === 'string') {\n          let text = op.insert;\n          if (text.endsWith('\\n') && consumeNextNewline) {\n            consumeNextNewline = false;\n            text = text.slice(0, -1);\n          }\n          if (index >= scrollLength && !text.endsWith('\\n')) {\n            consumeNextNewline = true;\n          }\n          this.scroll.insertAt(index, text);\n          let [line, offset] = this.scroll.line(index);\n          let formats = extend({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            let [leaf, ] = line.descendant(Parchment.Leaf, offset);\n            formats = extend(formats, bubbleFormats(leaf));\n          }\n          attributes = DeltaOp.attributes.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          let key = Object.keys(op.insert)[0];  // There should only be one key\n          if (key == null) return index;\n          this.scroll.insertAt(index, key, op.insert[key]);\n        }\n        scrollLength += length;\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      return index + length;\n    }, 0);\n    delta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + (op.retain || op.insert.length || 1);\n    }, 0);\n    this.scroll.batchEnd();\n    return this.update(delta);\n  }\n\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(index, length, formats = {}) {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      if (this.scroll.whitelist != null && !this.scroll.whitelist[format]) return;\n      let lines = this.scroll.lines(index, Math.max(length, 1));\n      let lengthRemaining = length;\n      lines.forEach((line) => {\n        let lineLength = line.length();\n        if (!(line instanceof CodeBlock)) {\n          line.format(format, formats[format]);\n        } else {\n          let codeIndex = index - line.offset(this.scroll);\n          let codeLength = line.newlineIndex(codeIndex + lengthRemaining) - codeIndex + 1;\n          line.formatAt(codeIndex, codeLength, format, formats[format]);\n        }\n        lengthRemaining -= lineLength;\n      });\n    });\n    this.scroll.optimize();\n    return this.update(new Delta().retain(index).retain(length, clone(formats)));\n  }\n\n  formatText(index, length, formats = {}) {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).retain(length, clone(formats)));\n  }\n\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index, length = 0) {\n    let lines = [], leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(function(path) {\n        let [blot, ] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof Parchment.Leaf) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(Parchment.Leaf, index, length);\n    }\n    let formatsArr = [lines, leaves].map(function(blots) {\n      if (blots.length === 0) return {};\n      let formats = bubbleFormats(blots.shift());\n      while (Object.keys(formats).length > 0) {\n        let blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return extend.apply(extend, formatsArr);\n  }\n\n  getText(index, length) {\n    return this.getContents(index, length).filter(function(op) {\n      return typeof op.insert === 'string';\n    }).map(function(op) {\n      return op.insert;\n    }).join('');\n  }\n\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(index, text, formats = {}) {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, clone(formats)));\n  }\n\n  isBlank() {\n    if (this.scroll.children.length == 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    let block = this.scroll.children.head;\n    if (block.statics.blotName !== Block.blotName) return false;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index, length) {\n    let text = this.getText(index, length);\n    let [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0, suffix = new Delta();\n    if (line != null) {\n      if (!(line instanceof CodeBlock)) {\n        suffixLength = line.length() - offset;\n      } else {\n        suffixLength = line.newlineIndex(offset) - offset + 1;\n      }\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n    }\n    let contents = this.getContents(index, length + suffixLength);\n    let diff = contents.diff(new Delta().insert(text).concat(suffix));\n    let delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(change, mutations = [], cursorIndex = undefined) {\n    let oldDelta = this.delta;\n    if (mutations.length === 1 &&\n        mutations[0].type === 'characterData' &&\n        mutations[0].target.data.match(ASCII) &&\n        Parchment.find(mutations[0].target)) {\n      // Optimization for character changes\n      let textBlot = Parchment.find(mutations[0].target);\n      let formats = bubbleFormats(textBlot);\n      let index = textBlot.offset(this.scroll);\n      let oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      let oldText = new Delta().insert(oldValue);\n      let newText = new Delta().insert(textBlot.value());\n      let diffDelta = new Delta().retain(index).concat(oldText.diff(newText, cursorIndex));\n      change = diffDelta.reduce(function(delta, op) {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        } else {\n          return delta.push(op);\n        }\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !equal(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, cursorIndex);\n      }\n    }\n    return change;\n  }\n}\n\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce(function(merged, name) {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce(function(delta, op) {\n    if (op.insert === 1) {\n      let attributes = clone(op.attributes);\n      delete attributes['image'];\n      return delta.insert({ image: op.attributes.image }, attributes);\n    }\n    if (op.attributes != null && (op.attributes.list === true || op.attributes.bullet === true)) {\n      op = clone(op);\n      if (op.attributes.list) {\n        op.attributes.list = 'ordered';\n      } else {\n        op.attributes.list = 'bullet';\n        delete op.attributes.bullet;\n      }\n    }\n    if (typeof op.insert === 'string') {\n      let text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return delta.insert(text, op.attributes);\n    }\n    return delta.push(op);\n  }, new Delta());\n}\n\n\nexport default Editor;\n\n\n\n// WEBPACK FOOTER //\n// ./core/editor.js","import Parchment from 'parchment';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport Emitter from './emitter';\nimport logger from './logger';\n\nlet debug = logger('quill:selection');\n\n\nclass Range {\n  constructor(index, length = 0) {\n    this.index = index;\n    this.length = length;\n  }\n}\n\n\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = Parchment.create('cursor', this);\n    // savedRange is last non-null range\n    this.lastRange = this.savedRange = new Range(0, 0);\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type, delta) => {\n      if (type === Emitter.events.TEXT_CHANGE && delta.length() > 0) {\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      let native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return;  // cursor.restore() will handle\n      // TODO unclear if this has negative side effects\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, () => {\n        try {\n          this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n        } catch (ignored) {}\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.root.addEventListener('compositionstart', () => {\n      this.composing = true;\n    });\n    this.root.addEventListener('compositionend', () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus();\n    this.setRange(this.savedRange);\n  }\n\n  format(format, value) {\n    if (this.scroll.whitelist != null && !this.scroll.whitelist[format]) return;\n    this.scroll.update();\n    let nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || Parchment.query(format, Parchment.Scope.BLOCK)) return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      let blot = Parchment.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof Parchment.Leaf) {\n        let after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        blot.insertBefore(this.cursor, nativeRange.start.node);  // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index, length = 0) {\n    let scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node, [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    [node, offset] = leaf.position(offset, true);\n    let range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    } else {\n      let side = 'left';\n      let rect;\n      if (node instanceof Text) {\n        if (offset < node.data.length) {\n          range.setStart(node, offset);\n          range.setEnd(node, offset + 1);\n        } else {\n          range.setStart(node, offset - 1);\n          range.setEnd(node, offset);\n          side = 'right';\n        }\n        rect = range.getBoundingClientRect();\n      } else {\n        rect = leaf.domNode.getBoundingClientRect();\n        if (offset > 0) side = 'right';\n      }\n      return {\n        bottom: rect.top + rect.height,\n        height: rect.height,\n        left: rect[side],\n        right: rect[side],\n        top: rect.top,\n        width: 0\n      };\n    }\n  }\n\n  getNativeRange() {\n    let selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    let nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    let range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange() {\n    let normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    let range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus() {\n    return document.activeElement === this.root;\n  }\n\n  normalizedToRange(range) {\n    let positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    let indexes = positions.map((position) => {\n      let [node, offset] = position;\n      let blot = Parchment.find(node, true);\n      let index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      } else if (blot instanceof Parchment.Container) {\n        return index + blot.length();\n      } else {\n        return index + blot.index(node, offset);\n      }\n    });\n    let end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    let start = Math.min(end, ...indexes);\n    return new Range(start, end-start);\n  }\n\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) ||\n        (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))) {\n      return null;\n    }\n    let range = {\n      start: { node: nativeRange.startContainer, offset: nativeRange.startOffset },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(function(position) {\n      let node = position.node, offset = position.offset;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          node = node.lastChild;\n          offset = node instanceof Text ? node.data.length : node.childNodes.length + 1;\n        } else {\n          break;\n        }\n      }\n      position.node = node, position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range) {\n    let indexes = range.collapsed ? [range.index] : [range.index, range.index + range.length];\n    let args = [];\n    let scrollLength = this.scroll.length();\n    indexes.forEach((index, i) => {\n      index = Math.min(scrollLength - 1, index);\n      let node, [leaf, offset] = this.scroll.leaf(index);\n      [node, offset] = leaf.position(offset, i !== 0);\n      args.push(node, offset);\n    });\n    if (args.length < 2) {\n      args = args.concat(args);\n    }\n    return args;\n  }\n\n  scrollIntoView(scrollingContainer) {\n    let range = this.lastRange;\n    if (range == null) return;\n    let bounds = this.getBounds(range.index, range.length);\n    if (bounds == null) return;\n    let limit = this.scroll.length()-1;\n    let [first, ] = this.scroll.line(Math.min(range.index, limit));\n    let last = first;\n    if (range.length > 0) {\n      [last, ] = this.scroll.line(Math.min(range.index + range.length, limit));\n    }\n    if (first == null || last == null) return;\n    let scrollBounds = scrollingContainer.getBoundingClientRect();\n    if (bounds.top < scrollBounds.top) {\n      scrollingContainer.scrollTop -= (scrollBounds.top - bounds.top);\n    } else if (bounds.bottom > scrollBounds.bottom) {\n      scrollingContainer.scrollTop += (bounds.bottom - scrollBounds.bottom);\n    }\n  }\n\n  setNativeRange(startNode, startOffset, endNode = startNode, endOffset = startOffset, force = false) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null || endNode.parentNode == null)) {\n      return;\n    }\n    let selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus();\n      let native = (this.getNativeRange() || {}).native;\n      if (native == null || force ||\n          startNode !== native.startContainer ||\n          startOffset !== native.startOffset ||\n          endNode !== native.endContainer ||\n          endOffset !== native.endOffset) {\n\n        if (startNode.tagName == \"BR\") {\n          startOffset = [].indexOf.call(startNode.parentNode.childNodes, startNode);\n          startNode = startNode.parentNode;\n        }\n        if (endNode.tagName == \"BR\") {\n          endOffset = [].indexOf.call(endNode.parentNode.childNodes, endNode);\n          endNode = endNode.parentNode;\n        }\n        let range = document.createRange();\n        range.setStart(startNode, startOffset);\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n      document.body.focus();  // root.blur() not enough on IE11+Travis+SauceLabs (but not local VMs)\n    }\n  }\n\n  setRange(range, force = false, source = Emitter.sources.API) {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      let args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    let oldRange = this.lastRange;\n    let [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!equal(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        this.cursor.restore();\n      }\n      let args = [Emitter.events.SELECTION_CHANGE, clone(this.lastRange), clone(oldRange), source];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode;\n  } catch (e) {\n    return false;\n  }\n  // IE11 has bug with Text nodes\n  // https://connect.microsoft.com/IE/feedback/details/780874/node-contains-is-incorrect\n  if (descendant instanceof Text) {\n    descendant = descendant.parentNode;\n  }\n  return parent.contains(descendant);\n}\n\n\nexport { Range, Selection as default };\n\n\n\n// WEBPACK FOOTER //\n// ./core/selection.js","import Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Block from '../blots/block';\nimport Inline from '../blots/inline';\nimport TextBlot from '../blots/text';\n\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\n\nclass CodeBlock extends Block {\n  static create(value) {\n    let domNode = super.create(value);\n    domNode.setAttribute('spellcheck', false);\n    return domNode;\n  }\n\n  static formats() {\n    return true;\n  }\n\n  delta() {\n    let text = this.domNode.textContent;\n    if (text.endsWith('\\n')) {      // Should always be true\n      text = text.slice(0, -1);\n    }\n    return text.split('\\n').reduce((delta, frag) => {\n      return delta.insert(frag).insert('\\n', this.formats());\n    }, new Delta());\n  }\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) return;\n    let [text, ] = this.descendant(TextBlot, this.length() - 1);\n    if (text != null) {\n      text.deleteAt(text.length() - 1, 1);\n    }\n    super.format(name, value);\n  }\n\n  formatAt(index, length, name, value) {\n    if (length === 0) return;\n    if (Parchment.query(name, Parchment.Scope.BLOCK) == null ||\n        (name === this.statics.blotName && value === this.statics.formats(this.domNode))) {\n      return;\n    }\n    let nextNewline = this.newlineIndex(index);\n    if (nextNewline < 0 || nextNewline >= index + length) return;\n    let prevNewline = this.newlineIndex(index, true) + 1;\n    let isolateLength = nextNewline - prevNewline + 1;\n    let blot = this.isolate(prevNewline, isolateLength);\n    let next = blot.next;\n    blot.format(name, value);\n    if (next instanceof CodeBlock) {\n      next.formatAt(0, index - prevNewline + length - isolateLength, name, value);\n    }\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) return;\n    let [text, offset] = this.descendant(TextBlot, index);\n    text.insertAt(offset, value);\n  }\n\n  length() {\n    let length = this.domNode.textContent.length;\n    if (!this.domNode.textContent.endsWith('\\n')) {\n      return length + 1;\n    }\n    return length;\n  }\n\n  merge(source) {\n    let newlineIndex = this.newlineIndex(0);\n    if (newlineIndex > -1) {\n      this.split(newlineIndex + 1);\n    }\n    super.merge(source);\n  }\n\n  mergeInto(target) {\n    let newlineIndex = this.newlineIndex(this.length(), true);\n    if (newlineIndex > -1) {\n      let after = this.split(newlineIndex + 1);\n      if (after === target) {\n        this.optimize();\n      } else {\n        after.mergeInto(target);\n      }\n    } else {\n      super.mergeInto(target);\n    }\n  }\n\n  newlineIndex(searchIndex, reverse = false) {\n    if (!reverse) {\n      let offset = this.domNode.textContent.slice(searchIndex).indexOf('\\n');\n      return offset > -1 ? searchIndex + offset : -1;\n    } else {\n      return this.domNode.textContent.slice(0, searchIndex).lastIndexOf('\\n');\n    }\n  }\n\n  optimize(context) {\n    if (!this.domNode.textContent.endsWith('\\n')) {\n      this.appendChild(Parchment.create('text', '\\n'));\n    }\n    super.optimize(context);\n    let next = this.next;\n    if (next != null && next.prev === this &&\n        next.statics.blotName === this.statics.blotName &&\n        this.statics.formats(this.domNode) === next.statics.formats(next.domNode)) {\n      next.optimize(context);\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  replace(target) {\n    super.replace(target);\n    [].slice.call(this.domNode.querySelectorAll('*')).forEach(function(node) {\n      let blot = Parchment.find(node);\n      if (blot == null) {\n        node.parentNode.removeChild(node);\n      } else if (blot instanceof Parchment.Embed) {\n        blot.remove();\n      } else {\n        blot.unwrap();\n      }\n    });\n  }\n}\nCodeBlock.blotName = 'code-block';\nCodeBlock.tagName = 'PRE';\nCodeBlock.TAB = '  ';\n\n\nexport { Code, CodeBlock as default };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/code.js","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar linked_list_1 = require(\"../../collection/linked-list\");\nvar shadow_1 = require(\"./shadow\");\nvar Registry = require(\"../../registry\");\nvar ContainerBlot = /** @class */ (function (_super) {\n    __extends(ContainerBlot, _super);\n    function ContainerBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.build();\n        return _this;\n    }\n    ContainerBlot.prototype.appendChild = function (other) {\n        this.insertBefore(other);\n    };\n    ContainerBlot.prototype.attach = function () {\n        _super.prototype.attach.call(this);\n        this.children.forEach(function (child) {\n            child.attach();\n        });\n    };\n    ContainerBlot.prototype.build = function () {\n        var _this = this;\n        this.children = new linked_list_1.default();\n        // Need to be reversed for if DOM nodes already in order\n        [].slice\n            .call(this.domNode.childNodes)\n            .reverse()\n            .forEach(function (node) {\n            try {\n                var child = makeBlot(node);\n                _this.insertBefore(child, _this.children.head || undefined);\n            }\n            catch (err) {\n                if (err instanceof Registry.ParchmentError)\n                    return;\n                else\n                    throw err;\n            }\n        });\n    };\n    ContainerBlot.prototype.deleteAt = function (index, length) {\n        if (index === 0 && length === this.length()) {\n            return this.remove();\n        }\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.deleteAt(offset, length);\n        });\n    };\n    ContainerBlot.prototype.descendant = function (criteria, index) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if ((criteria.blotName == null && criteria(child)) ||\n            (criteria.blotName != null && child instanceof criteria)) {\n            return [child, offset];\n        }\n        else if (child instanceof ContainerBlot) {\n            return child.descendant(criteria, offset);\n        }\n        else {\n            return [null, -1];\n        }\n    };\n    ContainerBlot.prototype.descendants = function (criteria, index, length) {\n        if (index === void 0) { index = 0; }\n        if (length === void 0) { length = Number.MAX_VALUE; }\n        var descendants = [];\n        var lengthLeft = length;\n        this.children.forEachAt(index, length, function (child, index, length) {\n            if ((criteria.blotName == null && criteria(child)) ||\n                (criteria.blotName != null && child instanceof criteria)) {\n                descendants.push(child);\n            }\n            if (child instanceof ContainerBlot) {\n                descendants = descendants.concat(child.descendants(criteria, index, lengthLeft));\n            }\n            lengthLeft -= length;\n        });\n        return descendants;\n    };\n    ContainerBlot.prototype.detach = function () {\n        this.children.forEach(function (child) {\n            child.detach();\n        });\n        _super.prototype.detach.call(this);\n    };\n    ContainerBlot.prototype.formatAt = function (index, length, name, value) {\n        this.children.forEachAt(index, length, function (child, offset, length) {\n            child.formatAt(offset, length, name, value);\n        });\n    };\n    ContainerBlot.prototype.insertAt = function (index, value, def) {\n        var _a = this.children.find(index), child = _a[0], offset = _a[1];\n        if (child) {\n            child.insertAt(offset, value, def);\n        }\n        else {\n            var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n            this.appendChild(blot);\n        }\n    };\n    ContainerBlot.prototype.insertBefore = function (childBlot, refBlot) {\n        if (this.statics.allowedChildren != null &&\n            !this.statics.allowedChildren.some(function (child) {\n                return childBlot instanceof child;\n            })) {\n            throw new Registry.ParchmentError(\"Cannot insert \" + childBlot.statics.blotName + \" into \" + this.statics.blotName);\n        }\n        childBlot.insertInto(this, refBlot);\n    };\n    ContainerBlot.prototype.length = function () {\n        return this.children.reduce(function (memo, child) {\n            return memo + child.length();\n        }, 0);\n    };\n    ContainerBlot.prototype.moveChildren = function (targetParent, refNode) {\n        this.children.forEach(function (child) {\n            targetParent.insertBefore(child, refNode);\n        });\n    };\n    ContainerBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        if (this.children.length === 0) {\n            if (this.statics.defaultChild != null) {\n                var child = Registry.create(this.statics.defaultChild);\n                this.appendChild(child);\n                child.optimize(context);\n            }\n            else {\n                this.remove();\n            }\n        }\n    };\n    ContainerBlot.prototype.path = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var _a = this.children.find(index, inclusive), child = _a[0], offset = _a[1];\n        var position = [[this, index]];\n        if (child instanceof ContainerBlot) {\n            return position.concat(child.path(offset, inclusive));\n        }\n        else if (child != null) {\n            position.push([child, offset]);\n        }\n        return position;\n    };\n    ContainerBlot.prototype.removeChild = function (child) {\n        this.children.remove(child);\n    };\n    ContainerBlot.prototype.replace = function (target) {\n        if (target instanceof ContainerBlot) {\n            target.moveChildren(this);\n        }\n        _super.prototype.replace.call(this, target);\n    };\n    ContainerBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = this.clone();\n        this.parent.insertBefore(after, this.next);\n        this.children.forEachAt(index, this.length(), function (child, offset, length) {\n            child = child.split(offset, force);\n            after.appendChild(child);\n        });\n        return after;\n    };\n    ContainerBlot.prototype.unwrap = function () {\n        this.moveChildren(this.parent, this.next);\n        this.remove();\n    };\n    ContainerBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        var addedNodes = [];\n        var removedNodes = [];\n        mutations.forEach(function (mutation) {\n            if (mutation.target === _this.domNode && mutation.type === 'childList') {\n                addedNodes.push.apply(addedNodes, mutation.addedNodes);\n                removedNodes.push.apply(removedNodes, mutation.removedNodes);\n            }\n        });\n        removedNodes.forEach(function (node) {\n            // Check node has actually been removed\n            // One exception is Chrome does not immediately remove IFRAMEs\n            // from DOM but MutationRecord is correct in its reported removal\n            if (node.parentNode != null &&\n                // @ts-ignore\n                node.tagName !== 'IFRAME' &&\n                document.body.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n                return;\n            }\n            var blot = Registry.find(node);\n            if (blot == null)\n                return;\n            if (blot.domNode.parentNode == null || blot.domNode.parentNode === _this.domNode) {\n                blot.detach();\n            }\n        });\n        addedNodes\n            .filter(function (node) {\n            return node.parentNode == _this.domNode;\n        })\n            .sort(function (a, b) {\n            if (a === b)\n                return 0;\n            if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n                return 1;\n            }\n            return -1;\n        })\n            .forEach(function (node) {\n            var refBlot = null;\n            if (node.nextSibling != null) {\n                refBlot = Registry.find(node.nextSibling);\n            }\n            var blot = makeBlot(node);\n            if (blot.next != refBlot || blot.next == null) {\n                if (blot.parent != null) {\n                    blot.parent.removeChild(_this);\n                }\n                _this.insertBefore(blot, refBlot || undefined);\n            }\n        });\n    };\n    return ContainerBlot;\n}(shadow_1.default));\nfunction makeBlot(node) {\n    var blot = Registry.find(node);\n    if (blot == null) {\n        try {\n            blot = Registry.create(node);\n        }\n        catch (e) {\n            blot = Registry.create(Registry.Scope.INLINE);\n            [].slice.call(node.childNodes).forEach(function (child) {\n                // @ts-ignore\n                blot.domNode.appendChild(child);\n            });\n            if (node.parentNode) {\n                node.parentNode.replaceChild(blot.domNode, node);\n            }\n            blot.attach();\n        }\n    }\n    return blot;\n}\nexports.default = ContainerBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/container.ts\n// module id = 16\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"../../attributor/attributor\");\nvar store_1 = require(\"../../attributor/store\");\nvar container_1 = require(\"./container\");\nvar Registry = require(\"../../registry\");\nvar FormatBlot = /** @class */ (function (_super) {\n    __extends(FormatBlot, _super);\n    function FormatBlot(domNode) {\n        var _this = _super.call(this, domNode) || this;\n        _this.attributes = new store_1.default(_this.domNode);\n        return _this;\n    }\n    FormatBlot.formats = function (domNode) {\n        if (typeof this.tagName === 'string') {\n            return true;\n        }\n        else if (Array.isArray(this.tagName)) {\n            return domNode.tagName.toLowerCase();\n        }\n        return undefined;\n    };\n    FormatBlot.prototype.format = function (name, value) {\n        var format = Registry.query(name);\n        if (format instanceof attributor_1.default) {\n            this.attributes.attribute(format, value);\n        }\n        else if (value) {\n            if (format != null && (name !== this.statics.blotName || this.formats()[name] !== value)) {\n                this.replaceWith(name, value);\n            }\n        }\n    };\n    FormatBlot.prototype.formats = function () {\n        var formats = this.attributes.values();\n        var format = this.statics.formats(this.domNode);\n        if (format != null) {\n            formats[this.statics.blotName] = format;\n        }\n        return formats;\n    };\n    FormatBlot.prototype.replaceWith = function (name, value) {\n        var replacement = _super.prototype.replaceWith.call(this, name, value);\n        this.attributes.copy(replacement);\n        return replacement;\n    };\n    FormatBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        _super.prototype.update.call(this, mutations, context);\n        if (mutations.some(function (mutation) {\n            return mutation.target === _this.domNode && mutation.type === 'attributes';\n        })) {\n            this.attributes.build();\n        }\n    };\n    FormatBlot.prototype.wrap = function (name, value) {\n        var wrapper = _super.prototype.wrap.call(this, name, value);\n        if (wrapper instanceof FormatBlot && wrapper.statics.scope === this.statics.scope) {\n            this.attributes.move(wrapper);\n        }\n        return wrapper;\n    };\n    return FormatBlot;\n}(container_1.default));\nexports.default = FormatBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/format.ts\n// module id = 17\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar shadow_1 = require(\"./shadow\");\nvar Registry = require(\"../../registry\");\nvar LeafBlot = /** @class */ (function (_super) {\n    __extends(LeafBlot, _super);\n    function LeafBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    LeafBlot.value = function (domNode) {\n        return true;\n    };\n    LeafBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node ||\n            this.domNode.compareDocumentPosition(node) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n            return Math.min(offset, 1);\n        }\n        return -1;\n    };\n    LeafBlot.prototype.position = function (index, inclusive) {\n        var offset = [].indexOf.call(this.parent.domNode.childNodes, this.domNode);\n        if (index > 0)\n            offset += 1;\n        return [this.parent.domNode, offset];\n    };\n    LeafBlot.prototype.value = function () {\n        return _a = {}, _a[this.statics.blotName] = this.statics.value(this.domNode) || true, _a;\n        var _a;\n    };\n    LeafBlot.scope = Registry.Scope.INLINE_BLOT;\n    return LeafBlot;\n}(shadow_1.default));\nexports.default = LeafBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/leaf.ts\n// module id = 18\n// module chunks = 0 1 2","var equal = require('deep-equal');\nvar extend = require('extend');\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\n\nmodule.exports = lib;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/quill-delta/lib/op.js\n// module id = 19\n// module chunks = 0 1 2","import Parchment from 'parchment';\n\n\nclass Break extends Parchment.Embed {\n  static value() {\n    return undefined;\n  }\n\n  insertInto(parent, ref) {\n    if (parent.children.length === 0) {\n      super.insertInto(parent, ref);\n    } else {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\n\nexport default Break;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/break.js","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/clone/clone.js\n// module id = 21\n// module chunks = 0 1 2","import Parchment from 'parchment';\nimport Emitter from '../core/emitter';\nimport Block, { BlockEmbed } from './block';\nimport Container from './container';\n\n\nfunction isLine(blot) {\n  return (blot instanceof Block || blot instanceof BlockEmbed);\n}\n\n\nclass Scroll extends Parchment.Scroll {\n  constructor(domNode, config) {\n    super(domNode);\n    this.emitter = config.emitter;\n    if (Array.isArray(config.whitelist)) {\n      this.whitelist = config.whitelist.reduce(function(whitelist, format) {\n        whitelist[format] = true;\n        return whitelist;\n      }, {});\n    }\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    this.domNode.addEventListener('DOMNodeInserted', function() {});\n    this.optimize();\n    this.enable();\n  }\n\n  batchStart() {\n    this.batch = true;\n  }\n\n  batchEnd() {\n    this.batch = false;\n    this.optimize();\n  }\n\n  deleteAt(index, length) {\n    let [first, offset] = this.line(index);\n    let [last, ] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      first.mergeInto(last);\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled);\n  }\n\n  formatAt(index, length, format, value) {\n    if (this.whitelist != null && !this.whitelist[format]) return;\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index, value, def) {\n    if (def != null && this.whitelist != null && !this.whitelist[value]) return;\n    if (index >= this.length()) {\n      if (def == null || Parchment.query(value, Parchment.Scope.BLOCK) == null) {\n        let blot = Parchment.create(this.statics.defaultChild);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          value = value.slice(0, -1);\n        }\n        blot.insertAt(0, value, def);\n      } else {\n        let embed = Parchment.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Parchment.Scope.INLINE_BLOT) {\n      let wrapper = Parchment.create(this.statics.defaultChild);\n      wrapper.appendChild(blot);\n      blot = wrapper;\n    }\n    super.insertBefore(blot, ref);\n  }\n\n  leaf(index) {\n    return this.path(index).pop() || [null, -1];\n  }\n\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE) {\n    let getLines = (blot, index, length) => {\n      let lines = [], lengthLeft = length;\n      blot.children.forEachAt(index, length, function(child, index, length) {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof Parchment.Container) {\n          lines = lines.concat(getLines(child, index, lengthLeft));\n        }\n        lengthLeft -= length;\n      });\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(mutations = [], context = {}) {\n    if (this.batch === true) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index) {\n    return super.path(index).slice(1);  // Exclude self\n  }\n\n  update(mutations) {\n    if (this.batch === true) return;\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([]));   // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n}\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = 'block';\nScroll.allowedChildren = [Block, BlockEmbed, Container];\n\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/scroll.js","import clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\nimport Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nlet debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\n\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    binding = normalize(binding);\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(function(key) {\n      return (!!binding[key] !== evt[key] && binding[key] !== null);\n    })) {\n      return false;\n    }\n    return binding.key === (evt.which || evt.keyCode);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    Object.keys(this.options.bindings).forEach((name) => {\n      if (name === 'list autofill' &&\n          quill.scroll.whitelist != null &&\n          !quill.scroll.whitelist['list']) {\n        return;\n      }\n      if (this.options.bindings[name]) {\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: Keyboard.keys.ENTER, shiftKey: null }, handleEnter);\n    this.addBinding({ key: Keyboard.keys.ENTER, metaKey: null, ctrlKey: null, altKey: null }, function() {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true }, handleBackspace);\n      this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true }, handleDelete);\n    } else {\n      this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: true, prefix: /^.?$/ }, handleBackspace);\n      this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: true, suffix: /^.?$/ }, handleDelete);\n    }\n    this.addBinding({ key: Keyboard.keys.BACKSPACE }, { collapsed: false }, handleDeleteRange);\n    this.addBinding({ key: Keyboard.keys.DELETE }, { collapsed: false }, handleDeleteRange);\n    this.addBinding({ key: Keyboard.keys.BACKSPACE, altKey: null, ctrlKey: null, metaKey: null, shiftKey: null },\n                    { collapsed: true, offset: 0 },\n                    handleBackspace);\n    this.listen();\n  }\n\n  addBinding(key, context = {}, handler = {}) {\n    let binding = normalize(key);\n    if (binding == null || binding.key == null) {\n      return debug.warn('Attempted to add invalid keyboard binding', binding);\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler: handler };\n    }\n    binding = extend(binding, context, handler);\n    this.bindings[binding.key] = this.bindings[binding.key] || [];\n    this.bindings[binding.key].push(binding);\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented) return;\n      let which = evt.which || evt.keyCode;\n      let bindings = (this.bindings[which] || []).filter(function(binding) {\n        return Keyboard.match(evt, binding);\n      });\n      if (bindings.length === 0) return;\n      let range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      let [line, offset] = this.quill.getLine(range.index);\n      let [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      let [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      let prefixText = leafStart instanceof Parchment.Text ? leafStart.value().slice(0, offsetStart) : '';\n      let suffixText = leafEnd instanceof Parchment.Text ? leafEnd.value().slice(offsetEnd) : '';\n      let curContext = {\n        collapsed: range.length === 0,\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        offset: offset,\n        prefix: prefixText,\n        suffix: suffixText\n      };\n      let prevented = bindings.some((binding) => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) return false;\n        if (binding.empty != null && binding.empty !== curContext.empty) return false;\n        if (binding.offset != null && binding.offset !== curContext.offset) return false;\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(function(name) {\n            return curContext.format[name] == null;\n          })) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(function(name) {\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            return equal(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) return false;\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) return false;\n        return binding.handler.call(this, range, curContext) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n}\n\nKeyboard.keys = {\n  BACKSPACE: 8,\n  TAB: 9,\n  ENTER: 13,\n  ESCAPE: 27,\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  DELETE: 46\n};\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    'bold'      : makeFormatHandler('bold'),\n    'italic'    : makeFormatHandler('italic'),\n    'underline' : makeFormatHandler('underline'),\n    'indent': {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: Keyboard.keys.TAB,\n      format: ['blockquote', 'indent', 'list'],\n      handler: function(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n      }\n    },\n    'outdent': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler: function(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n      }\n    },\n    'outdent backspace': {\n      key: Keyboard.keys.BACKSPACE,\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler: function(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: Keyboard.keys.TAB,\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler: function(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      }\n    },\n    'tab': {\n      key: Keyboard.keys.TAB,\n      handler: function(range) {\n        this.quill.history.cutoff();\n        let delta = new Delta().retain(range.index)\n                               .delete(range.length)\n                               .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n      }\n    },\n    'list empty enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler: function(range, context) {\n        this.quill.format('list', false, Quill.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, Quill.sources.USER);\n        }\n      }\n    },\n    'checklist enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: { list: 'checked' },\n      handler: function(range) {\n        let [line, offset] = this.quill.getLine(range.index);\n        let formats = extend({}, line.formats(), { list: 'checked' });\n        let delta = new Delta().retain(range.index)\n                               .insert('\\n', formats)\n                               .retain(line.length() - offset - 1)\n                               .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'header enter': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler: function(range, context) {\n        let [line, offset] = this.quill.getLine(range.index);\n        let delta = new Delta().retain(range.index)\n                               .insert('\\n', context.format)\n                               .retain(line.length() - offset - 1)\n                               .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: { list: false },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler: function(range, context) {\n        let length = context.prefix.length;\n        let [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]': case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-': case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        let delta = new Delta().retain(range.index - offset)\n                               .delete(length + 1)\n                               .retain(line.length() - 2 - offset)\n                               .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n      }\n    },\n    'code exit': {\n      key: Keyboard.keys.ENTER,\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /\\n\\n$/,\n      suffix: /^\\s+$/,\n      handler: function(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index + line.length() - offset - 2)\n          .retain(1, { 'code-block': null })\n          .delete(1);\n        this.quill.updateContents(delta, Quill.sources.USER);\n      }\n    },\n    'embed left': makeEmbedArrowHandler(Keyboard.keys.LEFT, false),\n    'embed left shift': makeEmbedArrowHandler(Keyboard.keys.LEFT, true),\n    'embed right': makeEmbedArrowHandler(Keyboard.keys.RIGHT, false),\n    'embed right shift': makeEmbedArrowHandler(Keyboard.keys.RIGHT, true)\n  }\n};\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === Keyboard.keys.LEFT ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler: function(range) {\n      let index = range.index;\n      if (key === Keyboard.keys.RIGHT) {\n        index += (range.length + 1);\n      }\n      const [leaf, ] = this.quill.getLeaf(index);\n      if (!(leaf instanceof Parchment.Embed)) return true;\n      if (key === Keyboard.keys.LEFT) {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else {\n        if (shiftKey) {\n          this.quill.setSelection(range.index, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index + range.length + 1, Quill.sources.USER);\n        }\n      }\n      return false;\n    }\n  };\n}\n\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n  let [line, ] = this.quill.getLine(range.index);\n  let formats = {};\n  if (context.offset === 0) {\n    let [prev, ] = this.quill.getLine(range.index - 1);\n    if (prev != null && prev.length() > 1) {\n      let curFormats = line.formats();\n      let prevFormats = this.quill.getFormat(range.index-1, 1);\n      formats = DeltaOp.attributes.diff(curFormats, prevFormats) || {};\n    }\n  }\n  // Check for astral symbols\n  let length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index-length, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index-length, length, formats, Quill.sources.USER);\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  let length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  let formats = {}, nextLength = 0;\n  let [line, ] = this.quill.getLine(range.index);\n  if (context.offset >= line.length() - 1) {\n    let [next, ] = this.quill.getLine(range.index + 1);\n    if (next) {\n      let curFormats = line.formats();\n      let nextFormats = this.quill.getFormat(range.index, 1);\n      formats = DeltaOp.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index + nextLength - 1, length, formats, Quill.sources.USER);\n  }\n}\n\nfunction handleDeleteRange(range) {\n  let lines = this.quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    let firstFormats = lines[0].formats();\n    let lastFormats = lines[lines.length - 1].formats();\n    formats = DeltaOp.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  this.quill.setSelection(range.index, Quill.sources.SILENT);\n  this.quill.focus();\n}\n\nfunction handleEnter(range, context) {\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length);  // So we do not trigger text-change\n  }\n  let lineFormats = Object.keys(context.format).reduce(function(lineFormats, format) {\n    if (Parchment.query(format, Parchment.Scope.BLOCK) && !Array.isArray(context.format[format])) {\n      lineFormats[format] = context.format[format];\n    }\n    return lineFormats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, Quill.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach((name) => {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    this.quill.format(name, context.format[name], Quill.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: Keyboard.keys.TAB,\n    shiftKey: !indent,\n    format: {'code-block': true },\n    handler: function(range) {\n      let CodeBlock = Parchment.query('code-block');\n      let index = range.index, length = range.length;\n      let [block, offset] = this.quill.scroll.descendant(CodeBlock, index);\n      if (block == null) return;\n      let scrollIndex = this.quill.getIndex(block);\n      let start = block.newlineIndex(offset, true) + 1;\n      let end = block.newlineIndex(scrollIndex + offset + length);\n      let lines = block.domNode.textContent.slice(start, end).split('\\n');\n      offset = 0;\n      lines.forEach((line, i) => {\n        if (indent) {\n          block.insertAt(start + offset, CodeBlock.TAB);\n          offset += CodeBlock.TAB.length;\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.startsWith(CodeBlock.TAB)) {\n          block.deleteAt(start + offset, CodeBlock.TAB.length);\n          offset -= CodeBlock.TAB.length;\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n        offset += line.length + 1;\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    }\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0].toUpperCase(),\n    shortKey: true,\n    handler: function(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    }\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    return normalize({ key: binding });\n  }\n  if (typeof binding === 'object') {\n    binding = clone(binding, false);\n  }\n  if (typeof binding.key === 'string') {\n    if (Keyboard.keys[binding.key.toUpperCase()] != null) {\n      binding.key = Keyboard.keys[binding.key.toUpperCase()];\n    } else if (binding.key.length === 1) {\n      binding.key = binding.key.toUpperCase().charCodeAt(0);\n    } else {\n      return null;\n    }\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n\nexport { Keyboard as default, SHORTKEY };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/keyboard.js","import Parchment from 'parchment';\nimport TextBlot from './text';\n\n\nclass Cursor extends Parchment.Embed {\n  static value() {\n    return undefined;\n  }\n\n  constructor(domNode, selection) {\n    super(domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this._length = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name, value) {\n    if (this._length !== 0) {\n      return super.format(name, value);\n    }\n    let target = this, index = 0;\n    while (target != null && target.statics.scope !== Parchment.Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this._length = Cursor.CONTENTS.length;\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this._length = 0;\n    }\n  }\n\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this._length;\n  }\n\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    this.parent = null;\n  }\n\n  restore() {\n    if (this.selection.composing || this.parent == null) return;\n    let textNode = this.textNode;\n    let range = this.selection.getNativeRange();\n    let restoreText, start, end;\n    if (range != null && range.start.node === textNode && range.end.node === textNode) {\n      [restoreText, start, end] = [textNode, range.start.offset, range.end.offset];\n    }\n    // Link format will insert text outside of anchor tag\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n    if (this.textNode.data !== Cursor.CONTENTS) {\n      let text = this.textNode.data.split(Cursor.CONTENTS).join('');\n      if (this.next instanceof TextBlot) {\n        restoreText = this.next.domNode;\n        this.next.insertAt(0, text);\n        this.textNode.data = Cursor.CONTENTS;\n      } else {\n        this.textNode.data = text;\n        this.parent.insertBefore(Parchment.create(this.textNode), this);\n        this.textNode = document.createTextNode(Cursor.CONTENTS);\n        this.domNode.appendChild(this.textNode);\n      }\n    }\n    this.remove();\n    if (start != null) {\n      [start, end] = [start, end].map(function(offset) {\n        return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n      });\n      return {\n        startNode: restoreText,\n        startOffset: start,\n        endNode: restoreText,\n        endOffset: end\n      };\n    }\n  }\n\n  update(mutations, context) {\n    if (mutations.some((mutation) => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      let range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = \"\\uFEFF\";   // Zero width no break space\n\n\nexport default Cursor;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/cursor.js","import Parchment from 'parchment';\nimport Block, { BlockEmbed } from './block';\n\n\nclass Container extends Parchment.Container { }\nContainer.allowedChildren = [Block, BlockEmbed, Container];\n\n\nexport default Container;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/container.js","import Parchment from 'parchment';\n\nclass ColorAttributor extends Parchment.Attributor.Style {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    return '#' + value.split(',').map(function(component) {\n      return ('00' + parseInt(component).toString(16)).slice(-2);\n    }).join('');\n  }\n}\n\nlet ColorClass = new Parchment.Attributor.Class('color', 'ql-color', {\n  scope: Parchment.Scope.INLINE\n});\nlet ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Parchment.Scope.INLINE\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/color.js","import Parchment from 'parchment';\nimport Quill from './core/quill';\n\nimport Block, { BlockEmbed } from './blots/block';\nimport Break from './blots/break';\nimport Container from './blots/container';\nimport Cursor from './blots/cursor';\nimport Embed from './blots/embed';\nimport Inline from './blots/inline';\nimport Scroll from './blots/scroll';\nimport TextBlot from './blots/text';\n\nimport Clipboard from './modules/clipboard';\nimport History from './modules/history';\nimport Keyboard from './modules/keyboard';\n\nQuill.register({\n  'blots/block'        : Block,\n  'blots/block/embed'  : BlockEmbed,\n  'blots/break'        : Break,\n  'blots/container'    : Container,\n  'blots/cursor'       : Cursor,\n  'blots/embed'        : Embed,\n  'blots/inline'       : Inline,\n  'blots/scroll'       : Scroll,\n  'blots/text'         : TextBlot,\n\n  'modules/clipboard'  : Clipboard,\n  'modules/history'    : History,\n  'modules/keyboard'   : Keyboard\n});\n\nParchment.register(Block, Break, Cursor, Inline, Scroll, TextBlot);\n\n\nexport default Quill;\n\n\n\n// WEBPACK FOOTER //\n// ./core.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Registry = require(\"../../registry\");\nvar ShadowBlot = /** @class */ (function () {\n    function ShadowBlot(domNode) {\n        this.domNode = domNode;\n        // @ts-ignore\n        this.domNode[Registry.DATA_KEY] = { blot: this };\n    }\n    Object.defineProperty(ShadowBlot.prototype, \"statics\", {\n        // Hack for accessing inherited static methods\n        get: function () {\n            return this.constructor;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShadowBlot.create = function (value) {\n        if (this.tagName == null) {\n            throw new Registry.ParchmentError('Blot definition missing tagName');\n        }\n        var node;\n        if (Array.isArray(this.tagName)) {\n            if (typeof value === 'string') {\n                value = value.toUpperCase();\n                if (parseInt(value).toString() === value) {\n                    value = parseInt(value);\n                }\n            }\n            if (typeof value === 'number') {\n                node = document.createElement(this.tagName[value - 1]);\n            }\n            else if (this.tagName.indexOf(value) > -1) {\n                node = document.createElement(value);\n            }\n            else {\n                node = document.createElement(this.tagName[0]);\n            }\n        }\n        else {\n            node = document.createElement(this.tagName);\n        }\n        if (this.className) {\n            node.classList.add(this.className);\n        }\n        return node;\n    };\n    ShadowBlot.prototype.attach = function () {\n        if (this.parent != null) {\n            this.scroll = this.parent.scroll;\n        }\n    };\n    ShadowBlot.prototype.clone = function () {\n        var domNode = this.domNode.cloneNode(false);\n        return Registry.create(domNode);\n    };\n    ShadowBlot.prototype.detach = function () {\n        if (this.parent != null)\n            this.parent.removeChild(this);\n        // @ts-ignore\n        delete this.domNode[Registry.DATA_KEY];\n    };\n    ShadowBlot.prototype.deleteAt = function (index, length) {\n        var blot = this.isolate(index, length);\n        blot.remove();\n    };\n    ShadowBlot.prototype.formatAt = function (index, length, name, value) {\n        var blot = this.isolate(index, length);\n        if (Registry.query(name, Registry.Scope.BLOT) != null && value) {\n            blot.wrap(name, value);\n        }\n        else if (Registry.query(name, Registry.Scope.ATTRIBUTE) != null) {\n            var parent = Registry.create(this.statics.scope);\n            blot.wrap(parent);\n            parent.format(name, value);\n        }\n    };\n    ShadowBlot.prototype.insertAt = function (index, value, def) {\n        var blot = def == null ? Registry.create('text', value) : Registry.create(value, def);\n        var ref = this.split(index);\n        this.parent.insertBefore(blot, ref);\n    };\n    ShadowBlot.prototype.insertInto = function (parentBlot, refBlot) {\n        if (refBlot === void 0) { refBlot = null; }\n        if (this.parent != null) {\n            this.parent.children.remove(this);\n        }\n        var refDomNode = null;\n        parentBlot.children.insertBefore(this, refBlot);\n        if (refBlot != null) {\n            refDomNode = refBlot.domNode;\n        }\n        if (this.domNode.parentNode != parentBlot.domNode ||\n            this.domNode.nextSibling != refDomNode) {\n            parentBlot.domNode.insertBefore(this.domNode, refDomNode);\n        }\n        this.parent = parentBlot;\n        this.attach();\n    };\n    ShadowBlot.prototype.isolate = function (index, length) {\n        var target = this.split(index);\n        target.split(length);\n        return target;\n    };\n    ShadowBlot.prototype.length = function () {\n        return 1;\n    };\n    ShadowBlot.prototype.offset = function (root) {\n        if (root === void 0) { root = this.parent; }\n        if (this.parent == null || this == root)\n            return 0;\n        return this.parent.children.offset(this) + this.parent.offset(root);\n    };\n    ShadowBlot.prototype.optimize = function (context) {\n        // TODO clean up once we use WeakMap\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY] != null) {\n            // @ts-ignore\n            delete this.domNode[Registry.DATA_KEY].mutations;\n        }\n    };\n    ShadowBlot.prototype.remove = function () {\n        if (this.domNode.parentNode != null) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        this.detach();\n    };\n    ShadowBlot.prototype.replace = function (target) {\n        if (target.parent == null)\n            return;\n        target.parent.insertBefore(this, target.next);\n        target.remove();\n    };\n    ShadowBlot.prototype.replaceWith = function (name, value) {\n        var replacement = typeof name === 'string' ? Registry.create(name, value) : name;\n        replacement.replace(this);\n        return replacement;\n    };\n    ShadowBlot.prototype.split = function (index, force) {\n        return index === 0 ? this : this.next;\n    };\n    ShadowBlot.prototype.update = function (mutations, context) {\n        // Nothing to do by default\n    };\n    ShadowBlot.prototype.wrap = function (name, value) {\n        var wrapper = typeof name === 'string' ? Registry.create(name, value) : name;\n        if (this.parent != null) {\n            this.parent.insertBefore(wrapper, this.next);\n        }\n        wrapper.appendChild(this);\n        return wrapper;\n    };\n    ShadowBlot.blotName = 'abstract';\n    return ShadowBlot;\n}());\nexports.default = ShadowBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/abstract/shadow.ts\n// module id = 30\n// module chunks = 0 1 2","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nvar class_1 = require(\"./class\");\nvar style_1 = require(\"./style\");\nvar Registry = require(\"../registry\");\nvar AttributorStore = /** @class */ (function () {\n    function AttributorStore(domNode) {\n        this.attributes = {};\n        this.domNode = domNode;\n        this.build();\n    }\n    AttributorStore.prototype.attribute = function (attribute, value) {\n        // verb\n        if (value) {\n            if (attribute.add(this.domNode, value)) {\n                if (attribute.value(this.domNode) != null) {\n                    this.attributes[attribute.attrName] = attribute;\n                }\n                else {\n                    delete this.attributes[attribute.attrName];\n                }\n            }\n        }\n        else {\n            attribute.remove(this.domNode);\n            delete this.attributes[attribute.attrName];\n        }\n    };\n    AttributorStore.prototype.build = function () {\n        var _this = this;\n        this.attributes = {};\n        var attributes = attributor_1.default.keys(this.domNode);\n        var classes = class_1.default.keys(this.domNode);\n        var styles = style_1.default.keys(this.domNode);\n        attributes\n            .concat(classes)\n            .concat(styles)\n            .forEach(function (name) {\n            var attr = Registry.query(name, Registry.Scope.ATTRIBUTE);\n            if (attr instanceof attributor_1.default) {\n                _this.attributes[attr.attrName] = attr;\n            }\n        });\n    };\n    AttributorStore.prototype.copy = function (target) {\n        var _this = this;\n        Object.keys(this.attributes).forEach(function (key) {\n            var value = _this.attributes[key].value(_this.domNode);\n            target.format(key, value);\n        });\n    };\n    AttributorStore.prototype.move = function (target) {\n        var _this = this;\n        this.copy(target);\n        Object.keys(this.attributes).forEach(function (key) {\n            _this.attributes[key].remove(_this.domNode);\n        });\n        this.attributes = {};\n    };\n    AttributorStore.prototype.values = function () {\n        var _this = this;\n        return Object.keys(this.attributes).reduce(function (attributes, name) {\n            attributes[name] = _this.attributes[name].value(_this.domNode);\n            return attributes;\n        }, {});\n    };\n    return AttributorStore;\n}());\nexports.default = AttributorStore;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/store.ts\n// module id = 31\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nfunction match(node, prefix) {\n    var className = node.getAttribute('class') || '';\n    return className.split(/\\s+/).filter(function (name) {\n        return name.indexOf(prefix + \"-\") === 0;\n    });\n}\nvar ClassAttributor = /** @class */ (function (_super) {\n    __extends(ClassAttributor, _super);\n    function ClassAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ClassAttributor.keys = function (node) {\n        return (node.getAttribute('class') || '').split(/\\s+/).map(function (name) {\n            return name\n                .split('-')\n                .slice(0, -1)\n                .join('-');\n        });\n    };\n    ClassAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        this.remove(node);\n        node.classList.add(this.keyName + \"-\" + value);\n        return true;\n    };\n    ClassAttributor.prototype.remove = function (node) {\n        var matches = match(node, this.keyName);\n        matches.forEach(function (name) {\n            node.classList.remove(name);\n        });\n        if (node.classList.length === 0) {\n            node.removeAttribute('class');\n        }\n    };\n    ClassAttributor.prototype.value = function (node) {\n        var result = match(node, this.keyName)[0] || '';\n        var value = result.slice(this.keyName.length + 1); // +1 for hyphen\n        return this.canAdd(node, value) ? value : '';\n    };\n    return ClassAttributor;\n}(attributor_1.default));\nexports.default = ClassAttributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/class.ts\n// module id = 32\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar attributor_1 = require(\"./attributor\");\nfunction camelize(name) {\n    var parts = name.split('-');\n    var rest = parts\n        .slice(1)\n        .map(function (part) {\n        return part[0].toUpperCase() + part.slice(1);\n    })\n        .join('');\n    return parts[0] + rest;\n}\nvar StyleAttributor = /** @class */ (function (_super) {\n    __extends(StyleAttributor, _super);\n    function StyleAttributor() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StyleAttributor.keys = function (node) {\n        return (node.getAttribute('style') || '').split(';').map(function (value) {\n            var arr = value.split(':');\n            return arr[0].trim();\n        });\n    };\n    StyleAttributor.prototype.add = function (node, value) {\n        if (!this.canAdd(node, value))\n            return false;\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = value;\n        return true;\n    };\n    StyleAttributor.prototype.remove = function (node) {\n        // @ts-ignore\n        node.style[camelize(this.keyName)] = '';\n        if (!node.getAttribute('style')) {\n            node.removeAttribute('style');\n        }\n    };\n    StyleAttributor.prototype.value = function (node) {\n        // @ts-ignore\n        var value = node.style[camelize(this.keyName)];\n        return this.canAdd(node, value) ? value : '';\n    };\n    return StyleAttributor;\n}(attributor_1.default));\nexports.default = StyleAttributor;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/attributor/style.ts\n// module id = 33\n// module chunks = 0 1 2","class Theme {\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name) {\n    let moduleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new moduleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n}\nTheme.DEFAULTS = {\n  modules: {}\n};\nTheme.themes = {\n  'default': Theme\n};\n\n\nexport default Theme;\n\n\n\n// WEBPACK FOOTER //\n// ./core/theme.js","import Parchment from 'parchment';\nimport TextBlot from './text';\n\nconst GUARD_TEXT = \"\\uFEFF\";\n\n\nclass Embed extends Parchment.Embed {\n  constructor(node) {\n    super(node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', false);\n    [].slice.call(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node) {\n    let range, textNode;\n    let text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        let prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(Parchment.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        }\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(Parchment.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations, context) {\n    mutations.forEach((mutation) => {\n      if (mutation.type === 'characterData' &&\n          (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        let range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\n\nexport default Embed;\n\n\n\n// WEBPACK FOOTER //\n// ./blots/embed.js","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\n\nlet AlignAttribute = new Parchment.Attributor.Attribute('align', 'align', config);\nlet AlignClass = new Parchment.Attributor.Class('align', 'ql-align', config);\nlet AlignStyle = new Parchment.Attributor.Style('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/align.js","import Parchment from 'parchment';\nimport { ColorAttributor } from './color';\n\nlet BackgroundClass = new Parchment.Attributor.Class('background', 'ql-bg', {\n  scope: Parchment.Scope.INLINE\n});\nlet BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Parchment.Scope.INLINE\n});\n\nexport { BackgroundClass, BackgroundStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/background.js","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.BLOCK,\n  whitelist: ['rtl']\n};\n\nlet DirectionAttribute = new Parchment.Attributor.Attribute('direction', 'dir', config);\nlet DirectionClass = new Parchment.Attributor.Class('direction', 'ql-direction', config);\nlet DirectionStyle = new Parchment.Attributor.Style('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/direction.js","import Parchment from 'parchment';\n\nlet config = {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\n\nlet FontClass = new Parchment.Attributor.Class('font', 'ql-font', config);\n\nclass FontStyleAttributor extends Parchment.Attributor.Style {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nlet FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/font.js","import Parchment from 'parchment';\n\nlet SizeClass = new Parchment.Attributor.Class('size', 'ql-size', {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nlet SizeStyle = new Parchment.Attributor.Style('size', 'font-size', {\n  scope: Parchment.Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\n\nexport { SizeClass, SizeStyle };\n\n\n\n// WEBPACK FOOTER //\n// ./formats/size.js","import Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\n\n\nclass History extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.lastRecorded = 0;\n    this.ignoreChange = false;\n    this.clear();\n    this.quill.on(Quill.events.EDITOR_CHANGE, (eventName, delta, oldDelta, source) => {\n      if (eventName !== Quill.events.TEXT_CHANGE || this.ignoreChange) return;\n      if (!this.options.userOnly || source === Quill.sources.USER) {\n        this.record(delta, oldDelta);\n      } else {\n        this.transform(delta);\n      }\n    });\n    this.quill.keyboard.addBinding({ key: 'Z', shortKey: true }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({ key: 'Z', shortKey: true, shiftKey: true }, this.redo.bind(this));\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({ key: 'Y', shortKey: true }, this.redo.bind(this));\n    }\n  }\n\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    let delta = this.stack[source].pop();\n    this.stack[dest].push(delta);\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(delta[source], Quill.sources.USER);\n    this.ignoreChange = false;\n    let index = getLastChangeIndex(delta[source]);\n    this.quill.setSelection(index);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = this.quill.getContents().diff(oldDelta);\n    let timestamp = Date.now();\n    if (this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      let delta = this.stack.undo.pop();\n      undoDelta = undoDelta.compose(delta.undo);\n      changeDelta = delta.redo.compose(changeDelta);\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    this.stack.undo.push({\n      redo: changeDelta,\n      undo: undoDelta\n    });\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta) {\n    this.stack.undo.forEach(function(change) {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n    this.stack.redo.forEach(function(change) {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n}\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false\n};\n\nfunction endsWithNewlineChange(delta) {\n  let lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(function(attr) {\n      return Parchment.query(attr, Parchment.Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(delta) {\n  let deleteLength = delta.reduce(function(length, op) {\n    length += (op.delete || 0);\n    return length;\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\n\nexport { History as default, getLastChangeIndex };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/history.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedList = /** @class */ (function () {\n    function LinkedList() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n    LinkedList.prototype.append = function () {\n        var nodes = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            nodes[_i] = arguments[_i];\n        }\n        this.insertBefore(nodes[0], null);\n        if (nodes.length > 1) {\n            this.append.apply(this, nodes.slice(1));\n        }\n    };\n    LinkedList.prototype.contains = function (node) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            if (cur === node)\n                return true;\n        }\n        return false;\n    };\n    LinkedList.prototype.insertBefore = function (node, refNode) {\n        if (!node)\n            return;\n        node.next = refNode;\n        if (refNode != null) {\n            node.prev = refNode.prev;\n            if (refNode.prev != null) {\n                refNode.prev.next = node;\n            }\n            refNode.prev = node;\n            if (refNode === this.head) {\n                this.head = node;\n            }\n        }\n        else if (this.tail != null) {\n            this.tail.next = node;\n            node.prev = this.tail;\n            this.tail = node;\n        }\n        else {\n            node.prev = null;\n            this.head = this.tail = node;\n        }\n        this.length += 1;\n    };\n    LinkedList.prototype.offset = function (target) {\n        var index = 0, cur = this.head;\n        while (cur != null) {\n            if (cur === target)\n                return index;\n            index += cur.length();\n            cur = cur.next;\n        }\n        return -1;\n    };\n    LinkedList.prototype.remove = function (node) {\n        if (!this.contains(node))\n            return;\n        if (node.prev != null)\n            node.prev.next = node.next;\n        if (node.next != null)\n            node.next.prev = node.prev;\n        if (node === this.head)\n            this.head = node.next;\n        if (node === this.tail)\n            this.tail = node.prev;\n        this.length -= 1;\n    };\n    LinkedList.prototype.iterator = function (curNode) {\n        if (curNode === void 0) { curNode = this.head; }\n        // TODO use yield when we can\n        return function () {\n            var ret = curNode;\n            if (curNode != null)\n                curNode = curNode.next;\n            return ret;\n        };\n    };\n    LinkedList.prototype.find = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            var length = cur.length();\n            if (index < length ||\n                (inclusive && index === length && (cur.next == null || cur.next.length() !== 0))) {\n                return [cur, index];\n            }\n            index -= length;\n        }\n        return [null, 0];\n    };\n    LinkedList.prototype.forEach = function (callback) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            callback(cur);\n        }\n    };\n    LinkedList.prototype.forEachAt = function (index, length, callback) {\n        if (length <= 0)\n            return;\n        var _a = this.find(index), startNode = _a[0], offset = _a[1];\n        var cur, curIndex = index - offset, next = this.iterator(startNode);\n        while ((cur = next()) && curIndex < index + length) {\n            var curLength = cur.length();\n            if (index > curIndex) {\n                callback(cur, index - curIndex, Math.min(length, curIndex + curLength - index));\n            }\n            else {\n                callback(cur, 0, Math.min(curLength, index + length - curIndex));\n            }\n            curIndex += curLength;\n        }\n    };\n    LinkedList.prototype.map = function (callback) {\n        return this.reduce(function (memo, cur) {\n            memo.push(callback(cur));\n            return memo;\n        }, []);\n    };\n    LinkedList.prototype.reduce = function (callback, memo) {\n        var cur, next = this.iterator();\n        while ((cur = next())) {\n            memo = callback(memo, cur);\n        }\n        return memo;\n    };\n    return LinkedList;\n}());\nexports.default = LinkedList;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/collection/linked-list.ts\n// module id = 44\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar container_1 = require(\"./abstract/container\");\nvar Registry = require(\"../registry\");\nvar OBSERVER_CONFIG = {\n    attributes: true,\n    characterData: true,\n    characterDataOldValue: true,\n    childList: true,\n    subtree: true,\n};\nvar MAX_OPTIMIZE_ITERATIONS = 100;\nvar ScrollBlot = /** @class */ (function (_super) {\n    __extends(ScrollBlot, _super);\n    function ScrollBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.scroll = _this;\n        _this.observer = new MutationObserver(function (mutations) {\n            _this.update(mutations);\n        });\n        _this.observer.observe(_this.domNode, OBSERVER_CONFIG);\n        _this.attach();\n        return _this;\n    }\n    ScrollBlot.prototype.detach = function () {\n        _super.prototype.detach.call(this);\n        this.observer.disconnect();\n    };\n    ScrollBlot.prototype.deleteAt = function (index, length) {\n        this.update();\n        if (index === 0 && length === this.length()) {\n            this.children.forEach(function (child) {\n                child.remove();\n            });\n        }\n        else {\n            _super.prototype.deleteAt.call(this, index, length);\n        }\n    };\n    ScrollBlot.prototype.formatAt = function (index, length, name, value) {\n        this.update();\n        _super.prototype.formatAt.call(this, index, length, name, value);\n    };\n    ScrollBlot.prototype.insertAt = function (index, value, def) {\n        this.update();\n        _super.prototype.insertAt.call(this, index, value, def);\n    };\n    ScrollBlot.prototype.optimize = function (mutations, context) {\n        var _this = this;\n        if (mutations === void 0) { mutations = []; }\n        if (context === void 0) { context = {}; }\n        _super.prototype.optimize.call(this, context);\n        // We must modify mutations directly, cannot make copy and then modify\n        var records = [].slice.call(this.observer.takeRecords());\n        // Array.push currently seems to be implemented by a non-tail recursive function\n        // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n        while (records.length > 0)\n            mutations.push(records.pop());\n        // TODO use WeakMap\n        var mark = function (blot, markParent) {\n            if (markParent === void 0) { markParent = true; }\n            if (blot == null || blot === _this)\n                return;\n            if (blot.domNode.parentNode == null)\n                return;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [];\n            }\n            if (markParent)\n                mark(blot.parent);\n        };\n        var optimize = function (blot) {\n            // Post-order traversal\n            if (\n            // @ts-ignore\n            blot.domNode[Registry.DATA_KEY] == null ||\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations == null) {\n                return;\n            }\n            if (blot instanceof container_1.default) {\n                blot.children.forEach(optimize);\n            }\n            blot.optimize(context);\n        };\n        var remaining = mutations;\n        for (var i = 0; remaining.length > 0; i += 1) {\n            if (i >= MAX_OPTIMIZE_ITERATIONS) {\n                throw new Error('[Parchment] Maximum optimize iterations reached');\n            }\n            remaining.forEach(function (mutation) {\n                var blot = Registry.find(mutation.target, true);\n                if (blot == null)\n                    return;\n                if (blot.domNode === mutation.target) {\n                    if (mutation.type === 'childList') {\n                        mark(Registry.find(mutation.previousSibling, false));\n                        [].forEach.call(mutation.addedNodes, function (node) {\n                            var child = Registry.find(node, false);\n                            mark(child, false);\n                            if (child instanceof container_1.default) {\n                                child.children.forEach(function (grandChild) {\n                                    mark(grandChild, false);\n                                });\n                            }\n                        });\n                    }\n                    else if (mutation.type === 'attributes') {\n                        mark(blot.prev);\n                    }\n                }\n                mark(blot);\n            });\n            this.children.forEach(optimize);\n            remaining = [].slice.call(this.observer.takeRecords());\n            records = remaining.slice();\n            while (records.length > 0)\n                mutations.push(records.pop());\n        }\n    };\n    ScrollBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (context === void 0) { context = {}; }\n        mutations = mutations || this.observer.takeRecords();\n        // TODO use WeakMap\n        mutations\n            .map(function (mutation) {\n            var blot = Registry.find(mutation.target, true);\n            if (blot == null)\n                return null;\n            // @ts-ignore\n            if (blot.domNode[Registry.DATA_KEY].mutations == null) {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations = [mutation];\n                return blot;\n            }\n            else {\n                // @ts-ignore\n                blot.domNode[Registry.DATA_KEY].mutations.push(mutation);\n                return null;\n            }\n        })\n            .forEach(function (blot) {\n            if (blot == null ||\n                blot === _this ||\n                //@ts-ignore\n                blot.domNode[Registry.DATA_KEY] == null)\n                return;\n            // @ts-ignore\n            blot.update(blot.domNode[Registry.DATA_KEY].mutations || [], context);\n        });\n        // @ts-ignore\n        if (this.domNode[Registry.DATA_KEY].mutations != null) {\n            // @ts-ignore\n            _super.prototype.update.call(this, this.domNode[Registry.DATA_KEY].mutations, context);\n        }\n        this.optimize(mutations, context);\n    };\n    ScrollBlot.blotName = 'scroll';\n    ScrollBlot.defaultChild = 'block';\n    ScrollBlot.scope = Registry.Scope.BLOCK_BLOT;\n    ScrollBlot.tagName = 'DIV';\n    return ScrollBlot;\n}(container_1.default));\nexports.default = ScrollBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/scroll.ts\n// module id = 45\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"./abstract/format\");\nvar Registry = require(\"../registry\");\n// Shallow object comparison\nfunction isEqual(obj1, obj2) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length)\n        return false;\n    // @ts-ignore\n    for (var prop in obj1) {\n        // @ts-ignore\n        if (obj1[prop] !== obj2[prop])\n            return false;\n    }\n    return true;\n}\nvar InlineBlot = /** @class */ (function (_super) {\n    __extends(InlineBlot, _super);\n    function InlineBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    InlineBlot.formats = function (domNode) {\n        if (domNode.tagName === InlineBlot.tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    InlineBlot.prototype.format = function (name, value) {\n        var _this = this;\n        if (name === this.statics.blotName && !value) {\n            this.children.forEach(function (child) {\n                if (!(child instanceof format_1.default)) {\n                    child = child.wrap(InlineBlot.blotName, true);\n                }\n                _this.attributes.copy(child);\n            });\n            this.unwrap();\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    InlineBlot.prototype.formatAt = function (index, length, name, value) {\n        if (this.formats()[name] != null || Registry.query(name, Registry.Scope.ATTRIBUTE)) {\n            var blot = this.isolate(index, length);\n            blot.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    InlineBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        var formats = this.formats();\n        if (Object.keys(formats).length === 0) {\n            return this.unwrap(); // unformatted span\n        }\n        var next = this.next;\n        if (next instanceof InlineBlot && next.prev === this && isEqual(formats, next.formats())) {\n            next.moveChildren(this);\n            next.remove();\n        }\n    };\n    InlineBlot.blotName = 'inline';\n    InlineBlot.scope = Registry.Scope.INLINE_BLOT;\n    InlineBlot.tagName = 'SPAN';\n    return InlineBlot;\n}(format_1.default));\nexports.default = InlineBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/inline.ts\n// module id = 46\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar format_1 = require(\"./abstract/format\");\nvar Registry = require(\"../registry\");\nvar BlockBlot = /** @class */ (function (_super) {\n    __extends(BlockBlot, _super);\n    function BlockBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    BlockBlot.formats = function (domNode) {\n        var tagName = Registry.query(BlockBlot.blotName).tagName;\n        if (domNode.tagName === tagName)\n            return undefined;\n        return _super.formats.call(this, domNode);\n    };\n    BlockBlot.prototype.format = function (name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) == null) {\n            return;\n        }\n        else if (name === this.statics.blotName && !value) {\n            this.replaceWith(BlockBlot.blotName);\n        }\n        else {\n            _super.prototype.format.call(this, name, value);\n        }\n    };\n    BlockBlot.prototype.formatAt = function (index, length, name, value) {\n        if (Registry.query(name, Registry.Scope.BLOCK) != null) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    BlockBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null || Registry.query(value, Registry.Scope.INLINE) != null) {\n            // Insert text or inline\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n        else {\n            var after = this.split(index);\n            var blot = Registry.create(value, def);\n            after.parent.insertBefore(blot, after);\n        }\n    };\n    BlockBlot.prototype.update = function (mutations, context) {\n        if (navigator.userAgent.match(/Trident/)) {\n            this.build();\n        }\n        else {\n            _super.prototype.update.call(this, mutations, context);\n        }\n    };\n    BlockBlot.blotName = 'block';\n    BlockBlot.scope = Registry.Scope.BLOCK_BLOT;\n    BlockBlot.tagName = 'P';\n    return BlockBlot;\n}(format_1.default));\nexports.default = BlockBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/block.ts\n// module id = 47\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = require(\"./abstract/leaf\");\nvar EmbedBlot = /** @class */ (function (_super) {\n    __extends(EmbedBlot, _super);\n    function EmbedBlot() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EmbedBlot.formats = function (domNode) {\n        return undefined;\n    };\n    EmbedBlot.prototype.format = function (name, value) {\n        // super.formatAt wraps, which is what we want in general,\n        // but this allows subclasses to overwrite for formats\n        // that just apply to particular embeds\n        _super.prototype.formatAt.call(this, 0, this.length(), name, value);\n    };\n    EmbedBlot.prototype.formatAt = function (index, length, name, value) {\n        if (index === 0 && length === this.length()) {\n            this.format(name, value);\n        }\n        else {\n            _super.prototype.formatAt.call(this, index, length, name, value);\n        }\n    };\n    EmbedBlot.prototype.formats = function () {\n        return this.statics.formats(this.domNode);\n    };\n    return EmbedBlot;\n}(leaf_1.default));\nexports.default = EmbedBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/embed.ts\n// module id = 48\n// module chunks = 0 1 2","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar leaf_1 = require(\"./abstract/leaf\");\nvar Registry = require(\"../registry\");\nvar TextBlot = /** @class */ (function (_super) {\n    __extends(TextBlot, _super);\n    function TextBlot(node) {\n        var _this = _super.call(this, node) || this;\n        _this.text = _this.statics.value(_this.domNode);\n        return _this;\n    }\n    TextBlot.create = function (value) {\n        return document.createTextNode(value);\n    };\n    TextBlot.value = function (domNode) {\n        var text = domNode.data;\n        // @ts-ignore\n        if (text['normalize'])\n            text = text['normalize']();\n        return text;\n    };\n    TextBlot.prototype.deleteAt = function (index, length) {\n        this.domNode.data = this.text = this.text.slice(0, index) + this.text.slice(index + length);\n    };\n    TextBlot.prototype.index = function (node, offset) {\n        if (this.domNode === node) {\n            return offset;\n        }\n        return -1;\n    };\n    TextBlot.prototype.insertAt = function (index, value, def) {\n        if (def == null) {\n            this.text = this.text.slice(0, index) + value + this.text.slice(index);\n            this.domNode.data = this.text;\n        }\n        else {\n            _super.prototype.insertAt.call(this, index, value, def);\n        }\n    };\n    TextBlot.prototype.length = function () {\n        return this.text.length;\n    };\n    TextBlot.prototype.optimize = function (context) {\n        _super.prototype.optimize.call(this, context);\n        this.text = this.statics.value(this.domNode);\n        if (this.text.length === 0) {\n            this.remove();\n        }\n        else if (this.next instanceof TextBlot && this.next.prev === this) {\n            this.insertAt(this.length(), this.next.value());\n            this.next.remove();\n        }\n    };\n    TextBlot.prototype.position = function (index, inclusive) {\n        if (inclusive === void 0) { inclusive = false; }\n        return [this.domNode, index];\n    };\n    TextBlot.prototype.split = function (index, force) {\n        if (force === void 0) { force = false; }\n        if (!force) {\n            if (index === 0)\n                return this;\n            if (index === this.length())\n                return this.next;\n        }\n        var after = Registry.create(this.domNode.splitText(index));\n        this.parent.insertBefore(after, this.next);\n        this.text = this.statics.value(this.domNode);\n        return after;\n    };\n    TextBlot.prototype.update = function (mutations, context) {\n        var _this = this;\n        if (mutations.some(function (mutation) {\n            return mutation.type === 'characterData' && mutation.target === _this.domNode;\n        })) {\n            this.text = this.statics.value(this.domNode);\n        }\n    };\n    TextBlot.prototype.value = function () {\n        return this.text;\n    };\n    TextBlot.blotName = 'text';\n    TextBlot.scope = Registry.Scope.INLINE_BLOT;\n    return TextBlot;\n}(leaf_1.default));\nexports.default = TextBlot;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/parchment/src/blot/text.ts\n// module id = 49\n// module chunks = 0 1 2","let elem = document.createElement('div');\nelem.classList.toggle('test-class', false);\nif (elem.classList.contains('test-class')) {\n  let _toggle = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function(token, force) {\n    if (arguments.length > 1 && !this.contains(token) === !force) {\n      return force;\n    } else {\n      return _toggle.call(this, token);\n    }\n  };\n}\n\nif (!String.prototype.startsWith) {\n  String.prototype.startsWith = function(searchString, position){\n    position = position || 0;\n    return this.substr(position, searchString.length) === searchString;\n  };\n}\n\nif (!String.prototype.endsWith) {\n  String.prototype.endsWith = function(searchString, position) {\n    var subjectString = this.toString();\n    if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {\n      position = subjectString.length;\n    }\n    position -= searchString.length;\n    var lastIndex = subjectString.indexOf(searchString, position);\n    return lastIndex !== -1 && lastIndex === position;\n  };\n}\n\nif (!Array.prototype.find) {\n  Object.defineProperty(Array.prototype, \"find\", {\n    value: function(predicate) {\n      if (this === null) {\n        throw new TypeError('Array.prototype.find called on null or undefined');\n      }\n      if (typeof predicate !== 'function') {\n        throw new TypeError('predicate must be a function');\n      }\n      var list = Object(this);\n      var length = list.length >>> 0;\n      var thisArg = arguments[1];\n      var value;\n\n      for (var i = 0; i < length; i++) {\n        value = list[i];\n        if (predicate.call(thisArg, value, i, list)) {\n          return value;\n        }\n      }\n      return undefined;\n    }\n  });\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", function() {\n  // Disable resizing in Firefox\n  document.execCommand(\"enableObjectResizing\", false, false);\n  // Disable automatic linkifying in IE11\n  document.execCommand(\"autoUrlDetect\", false, false);\n});\n\n\n\n// WEBPACK FOOTER //\n// ./core/polyfill.js","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '', '\\uD83D\\uDC2F' === ''\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fast-diff/diff.js\n// module id = 51\n// module chunks = 0 1 2","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-equal/lib/keys.js\n// module id = 52\n// module chunks = 0 1 2","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/deep-equal/lib/is_arguments.js\n// module id = 53\n// module chunks = 0 1 2","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/eventemitter3/index.js\n// module id = 54\n// module chunks = 0 1 2","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport Parchment from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nimport { AlignAttribute, AlignStyle } from '../formats/align';\nimport { BackgroundStyle } from '../formats/background';\nimport CodeBlock from '../formats/code';\nimport { ColorStyle } from '../formats/color';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction';\nimport { FontStyle } from '../formats/font';\nimport { SizeStyle } from '../formats/size';\n\nlet debug = logger('quill:clipboard');\n\n\nconst DOM_KEY = '__ql-matcher';\n\nconst CLIPBOARD_CONFIG = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchSpacing],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['b', matchAlias.bind(matchAlias, 'bold')],\n  ['i', matchAlias.bind(matchAlias, 'italic')],\n  ['style', matchIgnore]\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [\n  AlignAttribute,\n  DirectionAttribute\n].reduce(function(memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle\n].reduce(function(memo, attr) {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\n\nclass Clipboard extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('paste', this.onPaste.bind(this));\n    this.container = this.quill.addContainer('ql-clipboard');\n    this.container.setAttribute('contenteditable', true);\n    this.container.setAttribute('tabindex', -1);\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(([selector, matcher]) => {\n      if (!options.matchVisual && matcher === matchSpacing) return;\n      this.addMatcher(selector, matcher);\n    });\n  }\n\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(html) {\n    if (typeof html === 'string') {\n      this.container.innerHTML = html.replace(/\\>\\r?\\n +\\</g, '><'); // Remove spaces between tags\n      return this.convert();\n    }\n    const formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n    if (formats[CodeBlock.blotName]) {\n      const text = this.container.innerText;\n      this.container.innerHTML = '';\n      return new Delta().insert(text, { [CodeBlock.blotName]: formats[CodeBlock.blotName] });\n    }\n    let [elementMatchers, textMatchers] = this.prepareMatching();\n    let delta = traverse(this.container, elementMatchers, textMatchers);\n    // Remove trailing newline\n    if (deltaEndsWith(delta, '\\n') && delta.ops[delta.ops.length - 1].attributes == null) {\n      delta = delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    debug.log('convert', this.container.innerHTML, delta);\n    this.container.innerHTML = '';\n    return delta;\n  }\n\n  dangerouslyPasteHTML(index, html, source = Quill.sources.API) {\n    if (typeof index === 'string') {\n      this.quill.setContents(this.convert(index), html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      let paste = this.convert(html);\n      this.quill.updateContents(new Delta().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onPaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    let range = this.quill.getSelection();\n    let delta = new Delta().retain(range.index);\n    let scrollTop = this.quill.scrollingContainer.scrollTop;\n    this.container.focus();\n    this.quill.selection.update(Quill.sources.SILENT);\n    setTimeout(() => {\n      delta = delta.concat(this.convert()).delete(range.length);\n      this.quill.updateContents(delta, Quill.sources.USER);\n      // range.length contributes to delta.length()\n      this.quill.setSelection(delta.length() - range.length, Quill.sources.SILENT);\n      this.quill.scrollingContainer.scrollTop = scrollTop;\n      this.quill.focus();\n    }, 1);\n  }\n\n  prepareMatching() {\n    let elementMatchers = [], textMatchers = [];\n    this.matchers.forEach((pair) => {\n      let [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          [].forEach.call(this.container.querySelectorAll(selector), (node) => {\n            // TODO use weakmap\n            node[DOM_KEY] = node[DOM_KEY] || [];\n            node[DOM_KEY].push(matcher);\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nClipboard.DEFAULTS = {\n  matchers: [],\n  matchVisual: true\n};\n\n\nfunction applyFormat(delta, format, value) {\n  if (typeof format === 'object') {\n    return Object.keys(format).reduce(function(delta, key) {\n      return applyFormat(delta, key, format[key]);\n    }, delta);\n  } else {\n    return delta.reduce(function(delta, op) {\n      if (op.attributes && op.attributes[format]) {\n        return delta.push(op);\n      } else {\n        return delta.insert(op.insert, extend({}, {[format]: value}, op.attributes));\n      }\n    }, new Delta());\n  }\n}\n\nfunction computeStyle(node) {\n  if (node.nodeType !== Node.ELEMENT_NODE) return {};\n  const DOM_KEY = '__ql-computed-style';\n  return node[DOM_KEY] || (node[DOM_KEY] = window.getComputedStyle(node));\n}\n\nfunction deltaEndsWith(delta, text) {\n  let endText = \"\";\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i) {\n    let op  = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1*text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false;   // Exclude embed blocks\n  let style = computeStyle(node);\n  return ['block', 'list-item'].indexOf(style.display) > -1;\n}\n\nfunction traverse(node, elementMatchers, textMatchers) {  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce(function(delta, matcher) {\n      return matcher(node, delta);\n    }, new Delta());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return [].reduce.call(node.childNodes || [], (delta, childNode) => {\n      let childrenDelta = traverse(childNode, elementMatchers, textMatchers);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce(function(childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n        childrenDelta = (childNode[DOM_KEY] || []).reduce(function(childrenDelta, matcher) {\n          return matcher(childNode, childrenDelta);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  } else {\n    return new Delta();\n  }\n}\n\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta) {\n  let attributes = Parchment.Attributor.Attribute.keys(node);\n  let classes = Parchment.Attributor.Class.keys(node);\n  let styles = Parchment.Attributor.Style.keys(node);\n  let formats = {};\n  attributes.concat(classes).concat(styles).forEach((name) => {\n    let attr = Parchment.query(name, Parchment.Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name]\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta) {\n  let match = Parchment.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof Parchment.Embed) {\n    let embed = {};\n    let value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      delta = new Delta().insert(embed, match.formats(node));\n    }\n  } else if (typeof match.formats === 'function') {\n    delta = applyFormat(delta, match.blotName, match.formats(node));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node, delta) {\n  let match = Parchment.query(node);\n  if (match == null || match.blotName !== 'list-item' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  let indent = -1, parent = node.parentNode;\n  while (!parent.classList.contains('ql-clipboard')) {\n    if ((Parchment.query(parent) || {}).blotName === 'list') {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(new Delta().retain(delta.length() - 1).retain(1, { indent: indent}));\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node) || (delta.length() > 0 && node.nextSibling && isLine(node.nextSibling))) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchSpacing(node, delta) {\n  if (isLine(node) && node.nextElementSibling != null && !deltaEndsWith(delta, '\\n\\n')) {\n    let nodeHeight = node.offsetHeight + parseFloat(computeStyle(node).marginTop) + parseFloat(computeStyle(node).marginBottom);\n    if (node.nextElementSibling.offsetTop > node.offsetTop + nodeHeight*1.5) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  let formats = {};\n  let style = node.style || {};\n  if (style.fontStyle && computeStyle(node).fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.fontWeight && (computeStyle(node).fontWeight.startsWith('bold') ||\n                           parseInt(computeStyle(node).fontWeight) >= 700)) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {  // Could be 0.5in\n    delta = new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchText(node, delta) {\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode.classList.contains('ql-clipboard')) {\n    return delta;\n  }\n  if (!computeStyle(node.parentNode).whiteSpace.startsWith('pre')) {\n    // eslint-disable-next-line func-style\n    let replacer = function(collapse, match) {\n      match = match.replace(/[^\\u00a0]/g, '');    // \\u00a0 is nbsp;\n      return match.length < 1 && collapse ? ' ' : match;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true));  // collapse whitespace\n    if ((node.previousSibling == null && isLine(node.parentNode)) ||\n        (node.previousSibling != null && isLine(node.previousSibling))) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if ((node.nextSibling == null && isLine(node.parentNode)) ||\n        (node.nextSibling != null && isLine(node.nextSibling))) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\n\nexport { Clipboard as default, matchAttributor, matchBlot, matchNewline, matchSpacing, matchText };\n\n\n\n// WEBPACK FOOTER //\n// ./modules/clipboard.js"],"sourceRoot":""}